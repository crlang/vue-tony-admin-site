var P=Object.defineProperty,v=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var w=(o,l,e)=>l in o?P(o,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[l]=e,f=(o,l)=>{for(var e in l||(l={}))y.call(l,e)&&w(o,e,l[e]);if(b)for(var e of b(l))V.call(l,e)&&w(o,e,l[e]);return o},_=(o,l)=>v(o,I(l));var h=(o,l,e)=>new Promise((n,s)=>{var u=t=>{try{r(e.next(t))}catch(a){s(a)}},c=t=>{try{r(e.throw(t))}catch(a){s(a)}},r=t=>t.done?n(t.value):Promise.resolve(t.value).then(u,c);r((e=e.apply(o,l)).next())});import{B as k,b as C}from"./index-6ee1af83.js";import{B as R}from"./index-a82db265.js";import{A as $}from"./index-179419ae.js";import{i as q,a as O}from"./system-58567010.js";import{u as U}from"./useForm-af19a7b1.js";import{E as T,r as F,f as j,u as m,ac as g,p as G,I as L,J as S,S as E,G as N}from"./vue-d691a816.js";import{_ as z}from"./index-795cdaa0.js";const le=[{label:"用户名",prop:"account",width:120},{label:"昵称",prop:"nickname",width:120},{label:"邮箱",prop:"email",width:120},{label:"创建时间",prop:"createTime",width:180},{label:"角色",prop:"role",width:200},{label:"备注",prop:"remark"}],te=[{field:"account",label:"用户名",component:"ElInput",colProps:{span:8}},{field:"nickname",label:"昵称",component:"ElInput",colProps:{span:8}},{label:"邮箱",field:"email",component:"ElInput",colProps:{span:8}}],J=[{field:"account",label:"用户名",component:"ElInput",helpMessage:["本字段演示异步验证","不能输入带有admin的用户名"],rules:[{required:!0,message:"请输入用户名"},{validator(o,l){return new Promise((e,n)=>{q(l).then(()=>e()).catch(s=>{n(s.message||"验证失败")})})}}]},{field:"pwd",label:"密码",component:"ElInput",required:!0,ifShow:!1,componentProps:{showPassword:!0}},{label:"角色",field:"role",component:"ElSelect",slot:"role",changeEvent:"change",required:!0},{field:"nickname",label:"昵称",component:"ElInput",required:!0},{label:"邮箱",field:"email",component:"ElInput",required:!0},{label:"备注",field:"remark",component:"ElInput",componentProps:{type:"textarea"}}],W=T({name:"AccountModal",components:{BasicModal:k,BasicForm:R,ApiSelect:$},emits:["success","register"],setup(o,{emit:l}){const e=F(!0),n=F(""),[s,{setFieldsValue:u,updateSchema:c,resetFields:r,validate:t,getFieldsValue:a}]=U({labelWidth:100,schemas:J,showActionButtonGroup:!1,colProps:{span:24},actionColProps:{span:24}}),[d,{setModalProps:p,closeModal:M}]=C(i=>h(this,null,function*(){r(),p({confirmOptions:{loading:!1}}),e.value=!!(i!=null&&i.isUpdate),m(e)&&(n.value=i.record.id,u(f({},i.record))),c({field:"pwd",show:!m(e),ifShow:!m(e)})})),A=j(()=>m(e)?"编辑账号":"新增账号");function B(){return h(this,null,function*(){try{yield t();const i=a();p({confirmOptions:{loading:!0}}),M(),l("success",{isUpdate:m(e),values:_(f({},i),{id:n.value})})}finally{p({confirmOptions:{loading:!1}})}})}return{registerModal:d,registerForm:s,getTitle:A,handleSubmit:B,getAllRoleList:O}}});function x(o,l,e,n,s,u){const c=g("ApiSelect"),r=g("BasicForm"),t=g("BasicModal");return G(),L(t,N(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onConfirm:o.handleSubmit}),{default:S(()=>[E(r,{onRegister:o.registerForm},{role:S(({model:a,field:d})=>[E(c,{api:o.getAllRoleList,filterable:"",placeholder:"请选择",style:{width:"100%"},modelValue:a[d],"onUpdate:modelValue":p=>a[d]=p,labelField:"roleName",valueField:"roleValue"},null,8,["api","modelValue","onUpdate:modelValue"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onConfirm"])}const D=z(W,[["render",x]]),ae=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}));export{D as A,ae as a,le as c,te as s};
