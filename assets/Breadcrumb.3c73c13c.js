var z=Object.defineProperty,D=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var M=(e,t,r)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C=(e,t)=>{for(var r in t||(t={}))L.call(t,r)&&M(e,r,t[r]);if(A)for(var r of A(t))N.call(t,r)&&M(e,r,t[r]);return e},y=(e,t)=>D(e,F(t));var P=(e,t,r)=>new Promise((_,f)=>{var b=u=>{try{d(r.next(u))}catch(p){f(p)}},h=u=>{try{d(r.throw(u))}catch(p){f(p)}},d=u=>u.done?_(u.value):Promise.resolve(u.value).then(b,h);d((r=r.apply(e,t)).next())});import{x as T,cz as G,cA as O,M as V,a as q,aj as x,X as v,z as g,Y as k,a2 as E,A as w,ao as H,a9 as W,F as S,aa as X,a7 as Y,G as J}from"./vendor.5e678e09.js";import{_ as K,I as Q,u as U,q as Z,k as ee,e as te,R as ne,y as ae,H as re,j as se}from"./index.a180eed7.js";import{g as oe}from"./index.7865af84.js";import"./index.0377b249.js";import"./useWindowSizeFn.c212c501.js";import"./propTypes.13e00d90.js";import"./clickOutside.d6da8543.js";import"./lock.5cda1607.js";const ce=T({name:"LayoutBreadcrumb",components:{ElBreadcrumb:G,ElBreadcrumbItem:O,Icon:Q},props:{},setup(){const e=V([]),{currentRoute:t}=q(),{prefixCls:r}=U("layout-breadcrumb"),{getShowBreadCrumbIcon:_}=Z(),f=ee(),{t:b}=te();x(()=>P(this,null,function*(){var I,j,R;if(t.value.name===ne)return;const s=yield oe(),a=t.value.matched,n=a==null?void 0:a[a.length-1];let o=t.value.path;n&&((I=n==null?void 0:n.meta)==null?void 0:I.currentActiveMenu)&&(o=n.meta.currentActiveMenu);const c=ae(s,o),m=s.filter($=>$.path===c[0]),l=h(m,c);if(!l||l.length===0)return;const B=d(l);((j=t.value.meta)==null?void 0:j.currentActiveMenu)&&B.push(y(C({},t.value),{name:((R=t.value.meta)==null?void 0:R.title)||t.value.name})),e.value=B}));function h(s,a){const n=[];return s.forEach(o=>{var c,m;a.includes(o.path)&&n.push(y(C({},o),{name:((c=o.meta)==null?void 0:c.title)||o.name})),((m=o.children)==null?void 0:m.length)&&n.push(...h(o.children,a))}),n}function d(s){return re(s,a=>{const{meta:n,name:o}=a;if(!n)return!!o;const{title:c,hideBreadcrumb:m}=n;return!(!c||m)}).filter(a=>{var n;return!((n=a.meta)==null?void 0:n.hideBreadcrumb)})}function u(s,a,n){n==null||n.preventDefault();const{children:o,redirect:c,meta:m}=s;if((o==null?void 0:o.length)&&!c){n==null||n.stopPropagation();return}if(!(m==null?void 0:m.carryParam))if(c&&se(c))f(c);else{let l="";a.length===1?l=a[0]:l=`${a.slice(1).pop()||""}`,l=/^\//.test(l)?l:`/${l}`,f(l)}}function p(s,a){return s.indexOf(a)!==s.length-1}function i(s){var a;return(a=s.meta)==null?void 0:a.icon}return{routes:e,t:b,prefixCls:r,getIcon:i,getShowBreadCrumbIcon:_,handleClick:u,hasRedirect:p}}}),ue={key:1};function ie(e,t,r,_,f,b){const h=v("Icon"),d=v("router-link"),u=v("ElBreadcrumbItem"),p=v("ElBreadcrumb");return g(),k(p,{separator:"/",class:J(e.prefixCls),routes:e.routes},{default:E(()=>[(g(!0),w(Y,null,H(e.routes,i=>(g(),k(u,{key:i.name},{default:E(()=>[e.getShowBreadCrumbIcon&&e.getIcon(i)?(g(),k(h,{key:0,icon:e.getIcon(i),size:"14",class:"mr-1"},null,8,["icon"])):W("",!0),e.hasRedirect(e.routes,i)?(g(),k(d,{key:2,to:"",onClick:s=>e.handleClick(i,e.routes,s)},{default:E(()=>[X(S(e.t(i.name||i.meta.title)),1)]),_:2},1032,["onClick"])):(g(),w("span",ue,S(e.t(i.name||i.meta.title)),1))]),_:2},1024))),128))]),_:1},8,["class","routes"])}var ve=K(ce,[["render",ie]]);export{ve as default};
