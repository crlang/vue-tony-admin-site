var y=(t,n,c)=>new Promise((m,p)=>{var _=a=>{try{r(c.next(a))}catch(e){p(e)}},E=a=>{try{r(c.throw(a))}catch(e){p(e)}},r=a=>a.done?m(a.value):Promise.resolve(a.value).then(_,E);r((c=c.apply(t,n)).next())});import P from"./CurrentPermissionMode-2e70d45e.js";import{a0 as v,m as h,c as g,g as M,l as S,_ as $}from"./index-795cdaa0.js";import{A as b}from"./index-9a34082b.js";import{n as w,ap as x}from"./elementui-66980f2a.js";import{E as T,f as N,ac as d,ap as V,p as i,I as l,J as u,S as o,t as k,P as s,Q as I,q as K,O as F,K as C,R as U}from"./vue-d691a816.js";import"./tsxHelper-f44f22cd.js";const W=T({components:{ElButton:w,ElDivider:x,CurrentPermissionMode:P,Authority:b},setup(){const{hasPermission:t}=v(),n=h(),c=g(),m=M(),p=N(()=>c.getProjectConfig.permissionMode===S.BACK);function _(E){return y(this,null,function*(){const r=`fakeToken${E}`;m.setToken(r),m.getUserInfoAction(),n.changePermissionCode()})}return{hasPermission:t,permissionStore:n,switchToken:_,isBackPremissionMode:p}}});function j(t,n,c,m,p,_){const E=d("CurrentPermissionMode"),r=d("el-divider"),a=d("el-alert"),e=d("el-button"),f=d("Authority"),A=d("PageWrapper"),B=V("auth");return i(),l(A,{contentBackground:"",title:"按钮权限控制",description:"必须处于后台权限模式才可测试此页面所展示的功能"},{default:u(()=>[o(E),k("p",null,[s(" 当前拥有的code列表: "),k("span",null,I(t.permissionStore.getPermCodeList),1)]),o(r),o(a,{class:"mt-4",type:"info",title:"点击后请查看按钮变化","show-icon":""}),o(r),o(e,{type:"primary",class:"mr-2",onClick:n[0]||(n[0]=D=>t.switchToken(2)),disabled:!t.isBackPremissionMode},{default:u(()=>[s("点击切换按钮权限(用户id为2)")]),_:1},8,["disabled"]),o(e,{type:"primary",onClick:n[1]||(n[1]=D=>t.switchToken(1)),disabled:!t.isBackPremissionMode},{default:u(()=>[s("点击切换按钮权限(用户id为1,默认)")]),_:1},8,["disabled"]),t.isBackPremissionMode?(i(),K(U,{key:0},[o(r,null,{default:u(()=>[s("组件方式判断权限")]),_:1}),o(f,{value:"1000"},{default:u(()=>[o(e,{type:"primary",class:"mx-4"},{default:u(()=>[s("拥有code ['1000']权限可见")]),_:1})]),_:1}),o(f,{value:"2000"},{default:u(()=>[o(e,{color:"success",class:"mx-4"},{default:u(()=>[s("拥有code ['2000']权限可见")]),_:1})]),_:1}),o(f,{value:["1000","2000"]},{default:u(()=>[o(e,{color:"error",class:"mx-4"},{default:u(()=>[s("拥有code ['1000','2000']角色权限可见")]),_:1})]),_:1}),o(r,null,{default:u(()=>[s("函数方式方式判断权限")]),_:1}),t.hasPermission("1000")?(i(),l(e,{key:0,type:"primary",class:"mx-4"},{default:u(()=>[s("拥有code ['1000']权限可见")]),_:1})):F("",!0),t.hasPermission("2000")?(i(),l(e,{key:1,color:"success",class:"mx-4"},{default:u(()=>[s("拥有code ['2000']权限可见")]),_:1})):F("",!0),t.hasPermission(["1000","2000"])?(i(),l(e,{key:2,color:"error",class:"mx-4"},{default:u(()=>[s("拥有code ['1000','2000']角色权限可见")]),_:1})):F("",!0),o(r,null,{default:u(()=>[s("指令方式方式判断权限(该方式不能动态修改权限.)")]),_:1}),C((i(),l(e,{type:"primary",class:"mx-4"},{default:u(()=>[s("拥有code ['1000']权限可见")]),_:1})),[[B,"1000"]]),C((i(),l(e,{color:"success",class:"mx-4"},{default:u(()=>[s("拥有code ['2000']权限可见")]),_:1})),[[B,"2000"]]),C((i(),l(e,{color:"error",class:"mx-4"},{default:u(()=>[s("拥有code ['1000','2000']角色权限可见")]),_:1})),[[B,["1000","2000"]]])],64)):F("",!0)]),_:1})}const G=$(W,[["render",j],["__scopeId","data-v-79593d75"]]);export{G as default};
