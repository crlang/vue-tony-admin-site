var V=(y,d,n)=>new Promise((c,i)=>{var f=o=>{try{r(n.next(o))}catch(a){i(a)}},p=o=>{try{r(n.throw(o))}catch(a){i(a)}},r=o=>o.done?c(o.value):Promise.resolve(o.value).then(f,p);r((n=n.apply(y,d)).next())});import{E as k,r as g,W as C,f as K,u as e,K as b,T as I,p as N,I as h,J as t,S as s,af as U,P as w}from"./vue-d691a816.js";import{K as B,g as D}from"./index-795cdaa0.js";import{u as T,a as M,L as E,b as O}from"./useLogin-74691b1d.js";import{a1 as _,Z as v,K as P,L,a2 as W,n as x,a3 as $}from"./elementui-66980f2a.js";const j=k({__name:"LoginForm",setup(y){const{createNotification:d}=B(),n=D(),{setLoginState:c,getLoginState:i}=T(),{getFormRules:f}=M(),p=g(),r=g(!1),o=g(!1),a=C({account:"admin",password:"123456"}),{validForm:F}=O(p),R=K(()=>e(i)===E.LOGIN);function S(){return V(this,null,function*(){yield F();try{r.value=!0;const m=yield n.login({password:a.password,username:a.account});m&&d({title:"登录成功",type:"success",message:`欢迎回来: ${m.realName}`,duration:3e3})}catch(m){d({title:"错误提示",type:"error",message:m.message||"网络异常，请检查您的网络连接是否正常"})}finally{r.value=!1}})}return(m,l)=>b((N(),h(e($),{model:a,rules:e(f),ref_key:"formRef",ref:p},{default:t(()=>[s(e(_),{prop:"account"},{default:t(()=>[s(e(v),{modelValue:a.account,"onUpdate:modelValue":l[0]||(l[0]=u=>a.account=u),placeholder:"账号 admin/tony"},null,8,["modelValue"])]),_:1}),s(e(_),{prop:"password",class:"mb-1"},{default:t(()=>[s(e(v),{modelValue:a.password,"onUpdate:modelValue":l[1]||(l[1]=u=>a.password=u),placeholder:"密码 123456",onKeypress:U(S,["enter"])},null,8,["modelValue","onKeypress"])]),_:1}),s(e(P),{class:"mt-3"},{default:t(()=>[s(e(L),{span:12},{default:t(()=>[s(e(W),{modelValue:o.value,"onUpdate:modelValue":l[2]||(l[2]=u=>o.value=u),size:"small"},{default:t(()=>[w("记住我")]),_:1},8,["modelValue"])]),_:1}),s(e(L),{span:12,class:"text-right"},{default:t(()=>[s(e(x),{text:"",onClick:l[3]||(l[3]=u=>e(c)(e(E).RESET_PASSWORD))},{default:t(()=>[w("忘记密码?")]),_:1})]),_:1})]),_:1}),s(e(_),null,{default:t(()=>[s(e(x),{type:"primary",class:"login--submit",loading:r.value,onClick:S},{default:t(()=>[w("登录")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])),[[I,e(R)]])}});export{j as _};
