import{ca as Ne,a3 as S,cq as Y,d as j,F as x,C as pe,co as Q,cm as se,cr as Pe,o as B,j as Ce,i as re,I as N,aB as Ae,as as Be,c as m,cs as Oe,N as me,D as X,Q as Z,r as I,bb as Le,a1 as Re,q as ve,w as J,M as ie,Y as fe,al as Ie,c3 as g,$ as ke,s as Se,v as De,am as he,U as be,c9 as ye,O as ce,P as We,ct as je,a7 as W,H as qe,R as Ve,b5 as Fe,e as Ue,f as ee,g as de,n as te,m as Ge,t as He,L as Ke,ac as Me}from"./index.b263d89e.js";import{_ as Qe}from"./index.7eeeac30.js";import{E as Ee,a as Ye}from"./index.ee4e75a5.js";const Je=function(e){for(const n of e){const t=n.target.__resizeListeners__||[];t.length&&t.forEach(l=>{l()})}},Xe=function(e,n){!Ne||!e||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new ResizeObserver(Je),e.__ro__.observe(e)),e.__resizeListeners__.push(n))},Ze=function(e,n){var t;!e||!e.__resizeListeners__||(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(n),1),e.__resizeListeners__.length||(t=e.__ro__)==null||t.disconnect())},et={beforeMount(e,n){e._handleResize=()=>{var t;e&&((t=n.value)==null||t.call(n,e))},Xe(e,e._handleResize)},beforeUnmount(e){Ze(e,e._handleResize)}};class tt{constructor(n,t){this.parent=n,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(n){n===this.subMenuItems.length?n=0:n<0&&(n=this.subMenuItems.length-1),this.subMenuItems[n].focus(),this.subIndex=n}addListeners(){const n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,t=>{t.addEventListener("keydown",l=>{let u=!1;switch(l.code){case S.down:{this.gotoSubIndex(this.subIndex+1),u=!0;break}case S.up:{this.gotoSubIndex(this.subIndex-1),u=!0;break}case S.tab:{Y(n,"mouseleave");break}case S.enter:case S.space:{u=!0,l.currentTarget.click();break}}return u&&(l.preventDefault(),l.stopPropagation()),!1})})}}class nt{constructor(n,t){this.domNode=n,this.submenu=null,this.submenu=null,this.init(t)}init(n){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(`.${n}-menu`);t&&(this.submenu=new tt(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",n=>{let t=!1;switch(n.code){case S.down:{Y(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),t=!0;break}case S.up:{Y(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),t=!0;break}case S.tab:{Y(n.currentTarget,"mouseleave");break}case S.enter:case S.space:{t=!0,n.currentTarget.click();break}}t&&n.preventDefault()})}}class ot{constructor(n,t){this.domNode=n,this.init(t)}init(n){const t=this.domNode.childNodes;Array.from(t).forEach(l=>{l.nodeType===1&&new nt(l,n)})}}const st=j({name:"ElMenuCollapseTransition",setup(){const e=x("menu");return{listeners:{onBeforeEnter:t=>t.style.opacity="0.2",onEnter(t,l){Q(t,`${e.namespace.value}-opacity-transition`),t.style.opacity="1",l()},onAfterEnter(t){se(t,`${e.namespace.value}-opacity-transition`),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),Pe(t,e.m("collapse"))?(se(t,e.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),Q(t,e.m("collapse"))):(Q(t,e.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),se(t,e.m("collapse"))),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(t){Q(t,"horizontal-collapse-transition"),t.style.width=`${t.dataset.scrollWidth}px`}}}}});function at(e,n,t,l,u,_){return B(),Ce(Be,Ae({mode:"out-in"},e.listeners),{default:re(()=>[N(e.$slots,"default")]),_:3},16)}var lt=pe(st,[["render",at],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function xe(e,n){const t=m(()=>{let u=e.parent;const _=[n.value];for(;u.type.name!=="ElMenu";)u.props.index&&_.unshift(u.props.index),u=u.parent;return _});return{parentMenu:m(()=>{let u=e.parent;for(;u&&!["ElMenu","ElSubMenu"].includes(u.type.name);)u=u.parent;return u}),indexPath:t}}function ut(e){return m(()=>{const t=e.backgroundColor;return t?new Oe(t).shade(20).toString():""})}const $e=(e,n)=>{const t=x("menu");return m(()=>t.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":ut(e).value||"","active-color":e.activeTextColor||"",level:`${n}`}))},rt=me({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6}}),ae="ElSubMenu";var ge=j({name:ae,props:rt,setup(e,{slots:n,expose:t}){const l=be(),{indexPath:u,parentMenu:_}=xe(l,m(()=>e.index)),d=x("menu"),M=x("sub-menu"),s=X("rootMenu");s||Z(ae,"can not inject root menu");const i=X(`subMenu:${_.value.uid}`);i||Z(ae,"can not inject sub menu");const v=I({}),y=I({});let C;const q=I(!1),O=I(),$=I(null),P=m(()=>c.value==="horizontal"&&A.value?"bottom-start":"right-start"),ne=m(()=>c.value==="horizontal"&&A.value||c.value==="vertical"&&!s.props.collapse?Le:Re),A=m(()=>i.level===0),L=m(()=>e.popperAppendToBody===void 0?A.value:Boolean(e.popperAppendToBody)),V=m(()=>s.props.collapse?`${d.namespace.value}-zoom-in-left`:`${d.namespace.value}-zoom-in-top`),F=m(()=>c.value==="horizontal"&&A.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","left-start","bottom-start","bottom-end","top-start","top-end"]),T=m(()=>s.openedMenus.includes(e.index)),o=m(()=>{let p=!1;return Object.values(v.value).forEach(h=>{h.active&&(p=!0)}),Object.values(y.value).forEach(h=>{h.active&&(p=!0)}),p}),a=m(()=>s.props.backgroundColor||""),r=m(()=>s.props.activeTextColor||""),f=m(()=>s.props.textColor||""),c=m(()=>s.props.mode),k=ve({index:e.index,indexPath:u,active:o}),U=m(()=>c.value!=="horizontal"?{color:f.value}:{borderBottomColor:o.value?s.props.activeTextColor?r.value:"":"transparent",color:o.value?r.value:f.value}),_e=()=>{var p,h,b;return(b=(h=(p=$.value)==null?void 0:p.popperRef)==null?void 0:h.popperInstanceRef)==null?void 0:b.destroy()},G=p=>{p||_e()},w=()=>{s.props.menuTrigger==="hover"&&s.props.mode==="horizontal"||s.props.collapse&&s.props.mode==="vertical"||e.disabled||s.handleSubMenuClick({index:e.index,indexPath:u.value,active:o.value})},z=(p,h=e.showTimeout)=>{var b;p.type!=="focus"&&(s.props.menuTrigger==="click"&&s.props.mode==="horizontal"||!s.props.collapse&&s.props.mode==="vertical"||e.disabled||(i.mouseInChild.value=!0,C==null||C(),{stop:C}=ye(()=>{s.openMenu(e.index,u.value)},h),L.value&&((b=_.value.vnode.el)==null||b.dispatchEvent(new MouseEvent("mouseenter")))))},R=(p=!1)=>{var h,b;s.props.menuTrigger==="click"&&s.props.mode==="horizontal"||!s.props.collapse&&s.props.mode==="vertical"||(C==null||C(),i.mouseInChild.value=!1,{stop:C}=ye(()=>!q.value&&s.closeMenu(e.index,u.value),e.hideTimeout),L.value&&p&&((h=l.parent)==null?void 0:h.type.name)==="ElSubMenu"&&((b=i.handleMouseleave)==null||b.call(i,!0)))};J(()=>s.props.collapse,p=>G(Boolean(p)));{const p=b=>{y.value[b.index]=b},h=b=>{delete y.value[b.index]};ie(`subMenu:${l.uid}`,{addSubMenu:p,removeSubMenu:h,handleMouseleave:R,mouseInChild:q,level:i.level+1})}return t({opened:T}),fe(()=>{s.addSubMenu(k),i.addSubMenu(k)}),Ie(()=>{i.removeSubMenu(k),s.removeSubMenu(k)}),()=>{var p;const h=[(p=n.title)==null?void 0:p.call(n),g(ke,{class:M.e("icon-arrow")},{default:()=>g(ne.value)})],b=$e(s.props,i.level+1),H=s.isMenuPopup?g(Ee,{ref:$,visible:T.value,effect:"light",pure:!0,offset:e.popperOffset,showArrow:!1,persistent:!0,popperClass:e.popperClass,placement:P.value,teleported:L.value,fallbackPlacements:F.value,transition:V.value,gpuAcceleration:!1},{content:()=>{var E;return g("div",{class:[d.m(c.value),d.m("popup-container"),e.popperClass],onMouseenter:D=>z(D,100),onMouseleave:()=>R(!0),onFocus:D=>z(D,100)},[g("ul",{class:[d.b(),d.m("popup"),d.m(`popup-${P.value}`)],style:b.value},[(E=n.default)==null?void 0:E.call(n)])])},default:()=>g("div",{class:M.e("title"),style:[U.value,{backgroundColor:a.value}],onClick:w},h)}):g(he,{},[g("div",{class:M.e("title"),style:[U.value,{backgroundColor:a.value}],ref:O,onClick:w},h),g(Qe,{},{default:()=>{var E;return Se(g("ul",{role:"menu",class:[d.b(),d.m("inline")],style:b.value},[(E=n.default)==null?void 0:E.call(n)]),[[De,T.value]])}})]);return g("li",{class:[M.b(),M.is("active",o.value),M.is("opened",T.value),M.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:T.value,onMouseenter:z,onMouseleave:()=>R(!0),onFocus:z},[H])}}});const it=me({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:ce(Array),default:()=>We([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0}}),le=e=>Array.isArray(e)&&e.every(n=>W(n)),ct={close:(e,n)=>W(e)&&le(n),open:(e,n)=>W(e)&&le(n),select:(e,n,t,l)=>W(e)&&le(n)&&qe(t)&&(l===void 0||l instanceof Promise)};var dt=j({name:"ElMenu",props:it,emits:ct,setup(e,{emit:n,slots:t,expose:l}){const u=be(),_=u.appContext.config.globalProperties.$router,d=I(),M=x("menu"),s=x("sub-menu"),i=I(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),v=I(e.defaultActive),y=I({}),C=I({}),q=m(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),O=()=>{const o=v.value&&y.value[v.value];if(!o||e.mode==="horizontal"||e.collapse)return;o.indexPath.forEach(r=>{const f=C.value[r];f&&$(r,f.indexPath)})},$=(o,a)=>{i.value.includes(o)||(e.uniqueOpened&&(i.value=i.value.filter(r=>a.includes(r))),i.value.push(o),n("open",o,a))},P=(o,a)=>{const r=i.value.indexOf(o);r!==-1&&i.value.splice(r,1),n("close",o,a)},ne=({index:o,indexPath:a})=>{i.value.includes(o)?P(o,a):$(o,a)},A=o=>{(e.mode==="horizontal"||e.collapse)&&(i.value=[]);const{index:a,indexPath:r}=o;if(!(a===void 0||r===void 0))if(e.router&&_){const f=o.route||a,c=_.push(f).then(k=>(k||(v.value=a),k));n("select",a,r,{index:a,indexPath:r,route:f},c)}else v.value=a,n("select",a,r,{index:a,indexPath:r})},L=o=>{const a=y.value,r=a[o]||v.value&&a[v.value]||a[e.defaultActive];r?(v.value=r.index,O()):v.value=o},V=()=>{Ve(()=>u.proxy.$forceUpdate())};J(()=>e.defaultActive,o=>{y.value[o]||(v.value=""),L(o)}),J(y.value,()=>O()),J(()=>e.collapse,o=>{o&&(i.value=[])});{const o=c=>{C.value[c.index]=c},a=c=>{delete C.value[c.index]};ie("rootMenu",ve({props:e,openedMenus:i,items:y,subMenus:C,activeIndex:v,isMenuPopup:q,addMenuItem:c=>{y.value[c.index]=c},removeMenuItem:c=>{delete y.value[c.index]},addSubMenu:o,removeSubMenu:a,openMenu:$,closeMenu:P,handleMenuItemClick:A,handleSubMenuClick:ne})),ie(`subMenu:${u.uid}`,{addSubMenu:o,removeSubMenu:a,mouseInChild:I(!1),level:0})}fe(()=>{O(),e.mode==="horizontal"&&new ot(u.vnode.el,M.namespace.value)}),l({open:a=>{const{indexPath:r}=C.value[a];r.forEach(f=>$(f,r))},close:P,handleResize:V});const F=o=>{const a=Array.isArray(o)?o:[o],r=[];return a.forEach(f=>{Array.isArray(f.children)?r.push(...F(f.children)):r.push(f)}),r},T=o=>e.mode==="horizontal"?Se(o,[[et,V]]):o;return()=>{var o,a,r,f;let c=(a=(o=t.default)==null?void 0:o.call(t))!=null?a:[];const k=[];if(e.mode==="horizontal"&&d.value){const w=Array.from((f=(r=d.value)==null?void 0:r.childNodes)!=null?f:[]).filter(K=>K.nodeName!=="#text"||K.nodeValue),z=F(c),R=64,p=Number.parseInt(getComputedStyle(d.value).paddingLeft,10),h=Number.parseInt(getComputedStyle(d.value).paddingRight,10),b=d.value.clientWidth-p-h;let H=0,E=0;w.forEach((K,ze)=>{H+=K.offsetWidth||0,H<=b-R&&(E=ze+1)});const D=z.slice(0,E),oe=z.slice(E);(oe==null?void 0:oe.length)&&e.ellipsis&&(c=D,k.push(g(ge,{index:"sub-menu-more",class:s.e("hide-arrow")},{title:()=>g(ke,{class:s.e("icon-more")},{default:()=>g(je)}),default:()=>oe})))}const U=$e(e,0),G=(w=>e.ellipsis?T(w):w)(g("ul",{key:String(e.collapse),role:"menubar",ref:d,style:U.value,class:{[M.b()]:!0,[M.m(e.mode)]:!0,[M.m("collapse")]:e.collapse}},[...c,...k]));return e.collapseTransition&&e.mode==="vertical"?g(lt,()=>G):G}}});const pt=me({index:{type:ce([String,null]),default:null},route:{type:ce([String,Object])},disabled:Boolean}),mt={click:e=>W(e.index)&&Array.isArray(e.indexPath)},ue="ElMenuItem",vt=j({name:ue,components:{ElTooltip:Ee},props:pt,emits:mt,setup(e,{emit:n}){const t=be(),l=X("rootMenu"),u=x("menu"),_=x("menu-item");l||Z(ue,"can not inject root menu");const{parentMenu:d,indexPath:M}=xe(t,Fe(e,"index")),s=X(`subMenu:${d.value.uid}`);s||Z(ue,"can not inject sub menu");const i=m(()=>e.index===l.activeIndex),v=ve({index:e.index,indexPath:M,active:i}),y=()=>{e.disabled||(l.handleMenuItemClick({index:e.index,indexPath:M.value,route:e.route}),n("click",v))};return fe(()=>{s.addSubMenu(v),l.addMenuItem(v)}),Ie(()=>{s.removeSubMenu(v),l.removeMenuItem(v)}),{Effect:Ye,parentMenu:d,rootMenu:l,active:i,nsMenu:u,nsMenuItem:_,handleClick:y}}});function ft(e,n,t,l,u,_){const d=Ue("el-tooltip");return B(),ee("li",{class:te([e.nsMenuItem.b(),e.nsMenuItem.is("active",e.active),e.nsMenuItem.is("disabled",e.disabled)]),role:"menuitem",tabindex:"-1",onClick:n[0]||(n[0]=(...M)=>e.handleClick&&e.handleClick(...M))},[e.parentMenu.type.name==="ElMenu"&&e.rootMenu.props.collapse&&e.$slots.title?(B(),Ce(d,{key:0,effect:e.Effect.DARK,placement:"right","fallback-placements":["left"],persistent:""},{content:re(()=>[N(e.$slots,"title")]),default:re(()=>[de("div",{class:te(e.nsMenu.be("tooltip","trigger"))},[N(e.$slots,"default")],2)]),_:3},8,["effect"])):(B(),ee(he,{key:1},[N(e.$slots,"default"),N(e.$slots,"title")],64))],2)}var Te=pe(vt,[["render",ft],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const ht={title:String},bt="ElMenuItemGroup",Mt=j({name:bt,props:ht,setup(){return{ns:x("menu-item-group")}}});function gt(e,n,t,l,u,_){return B(),ee("li",{class:te(e.ns.b())},[de("div",{class:te(e.ns.e("title"))},[e.$slots.title?N(e.$slots,"title",{key:1}):(B(),ee(he,{key:0},[Ge(He(e.title),1)],64))],2),de("ul",null,[N(e.$slots,"default")])],2)}var we=pe(Mt,[["render",gt],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const It=Ke(dt,{MenuItem:Te,MenuItemGroup:we,SubMenu:ge}),kt=Me(Te);Me(we);const St=Me(ge);export{St as E,kt as a,It as b};
