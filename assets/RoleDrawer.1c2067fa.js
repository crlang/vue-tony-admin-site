var _=Object.defineProperty;var g=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var b=(e,a,t)=>a in e?_(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,F=(e,a)=>{for(var t in a||(a={}))S.call(a,t)&&b(e,t,a[t]);if(g)for(var t of g(a))v.call(a,t)&&b(e,t,a[t]);return e};var d=(e,a,t)=>new Promise((u,n)=>{var p=o=>{try{r(t.next(o))}catch(s){n(s)}},i=o=>{try{r(t.throw(o))}catch(s){n(s)}},r=o=>o.done?u(o.value):Promise.resolve(o.value).then(p,i);r((t=t.apply(e,a)).next())});import{B as R}from"./BasicForm.b4f64650.js";import{u as C}from"./useForm.c1733d5f.js";import{s as k,d as y}from"./system.bee4670e.js";import{f as V,_ as j}from"./index.16f9732e.js";import{a7 as P,ao as N}from"./ex-pkg-element-plus.e1a09009.js";import{a4 as T,y as x,a as h,l as I,u as f,Z as D,z as $,G as L,H as w,R as B,D as M}from"./ex-pkg-@vue.dfd8e273.js";import{B as U,a as O}from"./index.48ae15c5.js";const ee=[{label:"\u89D2\u8272\u540D\u79F0",prop:"roleName",width:200},{label:"\u89D2\u8272\u503C",prop:"roleValue",width:180},{label:"\u6392\u5E8F",prop:"orderNo",width:50},{label:"\u72B6\u6001",prop:"status",width:120,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),T(P,{modelValue:e.status==="1",activeText:"Y",inactiveText:"N",inlinePrompt:!0,loading:e.pendingStatus,onChange(a){e.pendingStatus=!0;const t=a?"1":"0",{createMessage:u}=V();k(e.id,t).then(()=>{e.status=t,u.success("\u5DF2\u6210\u529F\u4FEE\u6539\u89D2\u8272\u72B6\u6001")}).catch(()=>{u.error("\u4FEE\u6539\u89D2\u8272\u72B6\u6001\u5931\u8D25")}).finally(()=>{e.pendingStatus=!1})}}))},{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:180},{label:"\u5907\u6CE8",prop:"remark"}],te=[{field:"roleNme",label:"\u89D2\u8272\u540D\u79F0",component:"ElInput",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"ElSelect",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]},colProps:{span:8}}],q=[{field:"roleName",label:"\u89D2\u8272\u540D\u79F0",required:!0,component:"ElInput"},{field:"roleValue",label:"\u89D2\u8272\u503C",required:!0,component:"ElInput"},{field:"status",label:"\u72B6\u6001",component:"ElRadioButton",defaultValue:"0",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]}},{label:"\u5907\u6CE8",field:"remark",component:"ElInput",componentProps:{type:"textarea"}},{label:" ",field:"menu",slot:"menu",component:"ElInput"}],z=x({name:"RoleDrawer",components:{ElTree:N,BasicDrawer:U,BasicForm:R},emits:["success","register"],setup(e,{emit:a}){const t=h(!0),u=h([]),[n,{resetFields:p,setFieldsValue:i,validate:r}]=C({labelWidth:90,schemas:q,showActionButtonGroup:!1}),[o,{setDrawerProps:s,closeDrawer:c}]=O(l=>d(this,null,function*(){p(),s({confirmLoading:!1}),f(u).length===0&&(u.value=yield y()),t.value=!!(l==null?void 0:l.isUpdate),f(t)&&i(F({},l.record))})),m=I(()=>f(t)?"\u7F16\u8F91\u89D2\u8272":"\u65B0\u589E\u89D2\u8272");function E(){return d(this,null,function*(){try{const l=yield r();s({confirmLoading:!0}),console.log(l),c(),a("success")}finally{s({confirmLoading:!1})}})}return{registerDrawer:o,registerForm:n,getTitle:m,handleSubmit:E,treeData:u}}});function A(e,a,t,u,n,p){const i=D("el-tree"),r=D("BasicForm"),o=D("BasicDrawer");return $(),L(o,M(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onOk:e.handleSubmit}),{default:w(()=>[B(r,{onRegister:e.registerForm},{menu:w(({model:s,field:c})=>[B(i,{modelValue:s[c],"onUpdate:modelValue":m=>s[c]=m,treeData:e.treeData,prop:{label:"menuName",key:"id"},checkable:"",toolbar:"",title:"\u83DC\u5355\u5206\u914D"},null,8,["modelValue","onUpdate:modelValue","treeData"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var G=j(z,[["render",A]]),ae=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:G});export{G as R,ae as a,ee as c,te as s};
