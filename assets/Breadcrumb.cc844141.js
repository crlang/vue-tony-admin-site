var D=Object.defineProperty,z=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var P=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))L.call(t,r)&&P(e,r,t[r]);if(M)for(var r of M(t))N.call(t,r)&&P(e,r,t[r]);return e},y=(e,t)=>z(e,F(t));var w=(e,t,r)=>new Promise((b,p)=>{var _=u=>{try{d(r.next(u))}catch(f){p(f)}},h=u=>{try{d(r.throw(u))}catch(f){p(f)}},d=u=>u.done?b(u.value):Promise.resolve(u.value).then(_,h);d((r=r.apply(e,t)).next())});import{x as T,cC as G,cD as V,M as q,a as x,aj as H,X as v,z as g,Y as B,a2 as E,A,ao as O,a9 as W,F as S,aa as X,a7 as Y,G as J}from"./vendor.edbe4fa8.js";import{_ as K,I as Q,u as U,q as Z,k as ee,e as te,R as ne,y as ae,H as re,j as se}from"./index.ccefc80e.js";import{g as oe}from"./index.96189393.js";import"./index.256bfe38.js";import"./useWindowSizeFn.ba2f9a46.js";import"./propTypes.13e00d90.js";import"./lock.bd5464e0.js";const ce=T({name:"LayoutBreadcrumb",components:{ElBreadcrumb:G,ElBreadcrumbItem:V,Icon:Q},props:{},setup(){const e=q([]),{currentRoute:t}=x(),{prefixCls:r}=U("layout-breadcrumb"),{getShowBreadCrumbIcon:b}=Z(),p=ee(),{t:_}=te();H(()=>w(this,null,function*(){var C,j,R;if(t.value.name===ne)return;const s=yield oe(),a=t.value.matched,n=a==null?void 0:a[a.length-1];let o=t.value.path;n&&((C=n==null?void 0:n.meta)==null?void 0:C.currentActiveMenu)&&(o=n.meta.currentActiveMenu);const c=ae(s,o),m=s.filter($=>$.path===c[0]),l=h(m,c);if(!l||l.length===0)return;const k=d(l);((j=t.value.meta)==null?void 0:j.currentActiveMenu)&&k.push(y(I({},t.value),{name:((R=t.value.meta)==null?void 0:R.title)||t.value.name})),e.value=k}));function h(s,a){const n=[];return s.forEach(o=>{var c,m;a.includes(o.path)&&n.push(y(I({},o),{name:((c=o.meta)==null?void 0:c.title)||o.name})),((m=o.children)==null?void 0:m.length)&&n.push(...h(o.children,a))}),n}function d(s){return re(s,a=>{const{meta:n,name:o}=a;if(!n)return!!o;const{title:c,hideBreadcrumb:m}=n;return!(!c||m)}).filter(a=>{var n;return!((n=a.meta)==null?void 0:n.hideBreadcrumb)})}function u(s,a,n){n==null||n.preventDefault();const{children:o,redirect:c,meta:m}=s;if((o==null?void 0:o.length)&&!c){n==null||n.stopPropagation();return}if(!(m==null?void 0:m.carryParam))if(c&&se(c))p(c);else{let l="";a.length===1?l=a[0]:l=`${a.slice(1).pop()||""}`,l=/^\//.test(l)?l:`/${l}`,p(l)}}function f(s,a){return s.indexOf(a)!==s.length-1}function i(s){var a;return(a=s.meta)==null?void 0:a.icon}return{routes:e,t:_,prefixCls:r,getIcon:i,getShowBreadCrumbIcon:b,handleClick:u,hasRedirect:f}}}),ue={key:1};function ie(e,t,r,b,p,_){const h=v("Icon"),d=v("router-link"),u=v("ElBreadcrumbItem"),f=v("ElBreadcrumb");return g(),B(f,{separator:"/",class:J(e.prefixCls),routes:e.routes},{default:E(()=>[(g(!0),A(Y,null,O(e.routes,i=>(g(),B(u,{key:i.name},{default:E(()=>[e.getShowBreadCrumbIcon&&e.getIcon(i)?(g(),B(h,{key:0,icon:e.getIcon(i),size:"14",class:"mr-1"},null,8,["icon"])):W("",!0),e.hasRedirect(e.routes,i)?(g(),B(d,{key:2,to:"",onClick:s=>e.handleClick(i,e.routes,s)},{default:E(()=>[X(S(e.t(i.name||i.meta.title)),1)]),_:2},1032,["onClick"])):(g(),A("span",ue,S(e.t(i.name||i.meta.title)),1))]),_:2},1024))),128))]),_:1},8,["class","routes"])}var _e=K(ce,[["render",ie]]);export{_e as default};
