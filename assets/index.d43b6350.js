var m=(t,n,e)=>new Promise((s,u)=>{var l=o=>{try{r(e.next(o))}catch(c){u(c)}},a=o=>{try{r(e.throw(o))}catch(c){u(c)}},r=o=>o.done?s(o.value):Promise.resolve(o.value).then(l,a);r((e=e.apply(t,n)).next())});import{_ as v,i as F,e as _,u as E,w as C}from"./index.b7d256c2.js";import{ae as h,I as T,J as V,aj as S,y as w,aZ as N,W as j,M as p,u as d,ai as k,x as I,aJ as A,X as f,z as $,Y as g,a2 as y,aa as x,F as D,a0 as B,al as J,$ as O}from"./vendor.1ced56aa.js";function U(t,n="modelValue",e="change",s){const u=h(),l=u==null?void 0:u.emit,a=T({value:t[n]}),r=V(a),o=i=>{a.value=i};return S(()=>{a.value=t[n]}),[w({get(){return a.value},set(i){N(i,r.value)||(a.value=i,j(()=>{l==null||l(e,i,s)}))}}),o,r]}function q(t){const n=p(t),e=p(!1);let s;function u(){s&&window.clearInterval(s)}function l(){e.value=!1,u(),s=null}function a(){d(e)||!!s||(e.value=!0,s=setInterval(()=>{d(n)===1?(l(),n.value=t):n.value-=1},1e3))}function r(){n.value=t,l()}function o(){r(),a()}return k(()=>{r()}),{start:a,reset:r,restart:o,clear:u,stop:l,currentCount:n,isStart:e}}const z={value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},M=I({name:"CountButton",components:{ElButton:A},props:z,setup(t){const n=p(!1),{currentCount:e,isStart:s,start:u,reset:l}=q(t.count),{t:a}=_(),r=w(()=>d(s)?a("component.countdown.sendText",[d(e)]):a("component.countdown.normalText"));S(()=>{t.value===void 0&&l()});function o(){return m(this,null,function*(){const{beforeStartFunc:c}=t;if(c&&F(c)){n.value=!0;try{(yield c())&&u()}finally{n.value=!1}}else u()})}return{handleStart:o,currentCount:e,loading:n,getButtonText:r,isStart:s}}});function P(t,n,e,s,u,l){const a=f("ElButton");return $(),g(a,B(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:y(()=>[x(D(t.getButtonText),1)]),_:1},16,["disabled","onClick","loading"])}var b=v(M,[["render",P]]);const R={count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},W=I({name:"CountDownInput",components:{ElInput:J,CountButton:b},inheritAttrs:!1,props:R,setup(t){const{prefixCls:n}=E("countdown-input"),[e]=U(t);return{prefixCls:n,state:e}}});function X(t,n,e,s,u,l){const a=f("CountButton"),r=f("ElInput");return $(),g(r,B(t.$attrs,{class:t.prefixCls,modelValue:t.state,"onUpdate:modelValue":n[0]||(n[0]=o=>t.state=o)}),{append:y(()=>[O(a,{count:t.count,value:t.state,beforeStartFunc:t.sendCodeApi},null,8,["count","value","beforeStartFunc"])]),_:1},16,["class","modelValue"])}var Y=v(W,[["render",X]]);const K=C(Y);C(b);export{K as C,U as u};
