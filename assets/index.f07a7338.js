var Q=Object.defineProperty,W=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var N=(e,n,s)=>n in e?Q(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,p=(e,n)=>{for(var s in n||(n={}))Y.call(n,s)&&N(e,s,n[s]);if(z)for(var s of z(n))Z.call(n,s)&&N(e,s,n[s]);return e},S=(e,n)=>W(e,X(n));var U=(e,n,s)=>new Promise((u,i)=>{var d=t=>{try{o(s.next(t))}catch(c){i(c)}},a=t=>{try{o(s.throw(t))}catch(c){i(c)}},o=t=>t.done?u(t.value):Promise.resolve(t.value).then(d,a);o((s=s.apply(e,n)).next())});import{d as _,z as x,bJ as ee,r as v,c as k,b as l,cz as oe,w as q,R as G,_ as se,l as ne,U as j,e as b,bU as te,o as f,j as O,i as D,g as ae,f as $,h as A,n as B,k as g,m as F,t as R,am as J,I as w,v as re,aB as I,s as H,cB as E,bC as P,aA as le,az as K,cC as ie,aC as ue}from"./index.61be89a1.js";import{S as ce}from"./index.9574a6b4.js";import{B as de}from"./index.0526f740.js";import{g as pe}from"./index.8337b38c.js";import{E as fe}from"./index.5e1ef5ac.js";import{E as me}from"./index.37ecb140.js";import{i as ge}from"./isEqual.755d4a14.js";const M={modelValue:{type:Boolean},title:{type:String},isDetail:Boolean,loading:Boolean,loadingText:String,closeFn:{type:Function,default:null},showFooter:Boolean,showConfirmBtn:{type:Boolean,default:!0},confirmOptions:{type:Object,default:{btnText:"\u786E\u8BA4",type:"primary"}},showCancelBtn:{type:Boolean,default:!0},cancelOptions:{type:Object,default:{btnText:"\u53D6\u6D88",type:"default"}}},we=p(S(p({},pe),{appendToBody:{type:Boolean,default:!0},modelValue:{type:Boolean}}),M);const ve=_({name:"BasicDrawer",components:{ElDrawer:fe,ElButton:x,ScrollContainer:ce,BasicTitle:de,SvgIcon:ee},directives:{loading:me.directive},inheritAttrs:!1,props:we,emits:["update:modelValue","visible-change","confirm","cancel","register"],setup(e,{attrs:n,emit:s}){const u=v(!1),i=v(null),{prefixCls:d}=ne("basic-drawer"),a=j(),o=k(()=>{const r=p(p({},e),l(i));return S(p({},r),{customClass:`${d} ${(r==null?void 0:r.customClass)||""} ${d}-${a==null?void 0:a.uid}`})}),t=k(()=>{const r=p(p({},n),l(o)),y=Object.keys(M);return oe(r,y)}),c=k(()=>{var r;return!!((r=l(o))!=null&&r.loading)});function C(r){i.value=p(p({},l(i)),r),Reflect.has(r,"modelValue")&&(u.value=!!r.modelValue)}function T(){return U(this,null,function*(){const{closeFn:r}=l(o);if(typeof r=="function"){const y=yield r();u.value=!y;return}else u.value=!1;s("cancel")})}function m(){s("confirm")}const V={setDrawerProps:C,emitVisible:void 0};return a&&s("register",V),q(()=>e.modelValue,r=>{u.value=!!r},{deep:!0}),q(()=>u.value,r=>{G(()=>{var y;s("visible-change",r),s("update:modelValue",r),a&&((y=V.emitVisible)==null||y.call(V,r,a.uid))})}),{handleClose:T,prefixCls:d,visibleRef:u,getProps:o,getLoading:c,getBindValues:t,handleOk:m}}});function Ce(e,n,s,u,i,d){const a=b("SvgIcon"),o=b("BasicTitle"),t=b("ScrollContainer"),c=b("ElButton"),C=b("ElDrawer"),T=te("loading");return f(),O(C,I({onClose:n[1]||(n[1]=m=>e.handleClose())},e.getBindValues,{modelValue:e.visibleRef,"onUpdate:modelValue":n[2]||(n[2]=m=>e.visibleRef=m)}),{header:D(()=>[ae("div",{class:B(`${e.prefixCls}-header`)},[e.isDetail?(f(),$("span",{key:0,class:B(`${e.prefixCls}-header__back`),onClick:n[0]||(n[0]=m=>e.handleClose())},[A(a,{name:"left"})],2)):g("",!0),A(o,{class:B(`${e.prefixCls}-header__title`)},{default:D(()=>[e.title?(f(),$(J,{key:0},[F(R(e.title||""),1)],64)):w(e.$slots,"header",{key:1})]),_:3},8,["class"]),e.$slots.toolbar?(f(),$("span",{key:1,class:B(`${e.prefixCls}-header__toolbar`)},[w(e.$slots,"toolbar")],2)):g("",!0)],2)]),default:D(()=>{var m;return[re((f(),O(t,{class:B(`${e.prefixCls}-body`),"element-loading-text":e.loadingText},{default:D(()=>[w(e.$slots,"default")]),_:3},8,["class","element-loading-text"])),[[T,e.getLoading]]),e.showFooter?(f(),$("div",{key:0,class:B(`${e.prefixCls}-footer`)},[e.$slots.footer?w(e.$slots,"footer",{key:0}):(f(),$(J,{key:1},[e.$slots.prependFooter?w(e.$slots,"prependFooter",{key:0}):g("",!0),e.showCancelBtn?(f(),O(c,I({key:1,onClick:e.handleClose},e.cancelOptions),{default:D(()=>[F(R(e.cancelOptions.btnText||"Cancel"),1)]),_:1},16,["onClick"])):g("",!0),e.$slots.centerFooter?w(e.$slots,"centerFooter",{key:2}):g("",!0),e.showConfirmBtn?(f(),O(c,I({key:3,onClick:e.handleOk},e.confirmOptions,{loading:(m=e.getProps.confirmOptions)==null?void 0:m.loading}),{default:D(()=>[F(R(e.confirmOptions.btnText||"Ok"),1)]),_:1},16,["onClick","loading"])):g("",!0),e.$slots.appendFooter?w(e.$slots,"appendFooter",{key:4}):g("",!0)],64))],2)):g("",!0)]}),_:3},16,["modelValue"])}var ye=se(ve,[["render",Ce]]);const h=H({}),L=H({});function Pe(){j()||E("useDrawer() can only be used inside setup() or functional components!");const e=v(null),n=v(!1),s=v("");function u(a,o){K(()=>{e.value=null,n.value=null,h[l(s)]=null}),!(l(n)&&ie()&&a===l(e))&&(s.value=o,e.value=a,n.value=!0,a.emitVisible=(t,c)=>{L[c]=t})}const i=()=>{const a=l(e);return a||E("The drawer instance has not been obtained, please make sure the instance is rendered when performing the instance operation!"),a},d={setDrawerProps:a=>{var o;(o=i())==null||o.setDrawerProps(a)},getVisible:k(()=>L[~~l(s)]),openDrawer:(a=!0,o,t=!0)=>{var C;if((C=i())==null||C.setDrawerProps({modelValue:a}),!o)return;if(t){h[l(s)]=null,h[l(s)]=P(o);return}ge(P(h[l(s)]),P(o))||(h[l(s)]=P(o))},closeDrawer:()=>{var a;(a=i())==null||a.setDrawerProps({modelValue:!1})}};return[u,d]}const Ee=e=>{const n=v(null),s=j(),u=v("");s||E("useDrawerInner() can only be used inside setup() or functional components!");const i=()=>{const o=l(n);if(!o){E("useDrawerInner instance is undefined!");return}return o},d=(o,t)=>{K(()=>{n.value=null}),u.value=t,n.value=o,s==null||s.emit("register",o,t)},a={getVisible:k(()=>L[~~l(u)]),changeLoading:(o=!0)=>{var t;(t=i())==null||t.setDrawerProps({loading:o})},changeConfirmLoading:(o=!0)=>{var t;(t=i())==null||t.setDrawerProps({confirmOptions:{loading:o}})},closeDrawer:()=>{var o;(o=i())==null||o.setDrawerProps({modelValue:!1})},setDrawerProps:o=>{var t;(t=i())==null||t.setDrawerProps(o)}};return le(()=>{const o=h[l(u)];!o||!e||typeof e!="function"||G(()=>{e(o)})}),[d,a]},Te=ue(ye);export{Te as B,Ee as a,Pe as u};
