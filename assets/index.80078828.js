import{d as S,b7 as ge,K as ee,ba as me,c as B,fL as he,o as y,f as H,g as D,F as b,n as k,b as o,t as U,h as w,i as m,k as F,H as Ce,a0 as ye,l as V,G as Y,I as ne,fM as be,aa as ve,a5 as oe,C as $e,r as v,D as ke,fN as Me,v as te,bU as Be,bV as we,aD as A,b8 as se,x as Fe,bF as Te,bW as Ee,J as He,bC as Re,_ as Q,e as E,al as j,j as K,bz as De,bA as Ve,aC as X,w as le,U as _,bO as Se,z as Pe,W as Z,m as Ie,cF as Ae,s as ae,aw as z,cG as G,ac as Oe,cH as _e,aB as Le,aE as We}from"./index.a812ffa9.js";import{c as Ne}from"./index.fbd5cbb3.js";import{B as qe}from"./index.6c72c066.js";import{E as ze}from"./index.48be7fd2.js";import{u as Ue}from"./useWindowSizeFn.1725b147.js";import{S as je}from"./index.ba82fa59.js";import{E as Ke}from"./index.fb19ae5d.js";import{l as Ge,m as Je,k as Ye,o as Qe}from"./drawer.55be0fb4.js";import{c as Xe}from"./refs.7c70278f.js";import{u as Ze}from"./use-dialog.8523a096.js";import{i as xe}from"./isEqual.f6c0098b.js";const re=Symbol("dialogInjectionKey"),eo=["aria-label"],oo=["id"],no=S({name:"ElDialogContent"}),to=S({...no,props:Ge,emits:Je,setup(e){const d=e,{t:c}=ge(),{Close:u}=be,{dialogRef:i,headerRef:l,bodyId:s,ns:n,style:t}=ee(re),{focusTrapRef:r}=ee(me),h=Xe(r,i),f=B(()=>d.draggable);return he(i,l,f),(p,M)=>(y(),H("div",{ref:o(h),class:k([o(n).b(),o(n).is("fullscreen",p.fullscreen),o(n).is("draggable",o(f)),o(n).is("align-center",p.alignCenter),{[o(n).m("center")]:p.center},p.customClass]),style:Y(o(t)),tabindex:"-1"},[D("header",{ref_key:"headerRef",ref:l,class:k(o(n).e("header"))},[b(p.$slots,"header",{},()=>[D("span",{role:"heading",class:k(o(n).e("title"))},U(p.title),3)]),p.showClose?(y(),H("button",{key:0,"aria-label":o(c)("el.dialog.close"),class:k(o(n).e("headerbtn")),type:"button",onClick:M[0]||(M[0]=R=>p.$emit("close"))},[w(o(ye),{class:k(o(n).e("close"))},{default:m(()=>[(y(),F(Ce(p.closeIcon||o(u))))]),_:1},8,["class"])],10,eo)):V("v-if",!0)],2),D("div",{id:o(s),class:k(o(n).e("body"))},[b(p.$slots,"default")],10,oo),p.$slots.footer?(y(),H("footer",{key:0,class:k(o(n).e("footer"))},[b(p.$slots,"footer")],2)):V("v-if",!0)],6))}});var so=ne(to,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const lo=["aria-label","aria-labelledby","aria-describedby"],ao=S({name:"ElDialog",inheritAttrs:!1}),ro=S({...ao,props:Ye,emits:Qe,setup(e,{expose:d}){const c=e,u=ve();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},B(()=>!!u.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},B(()=>!!c.customClass));const i=$e("dialog"),l=v(),s=v(),n=v(),{visible:t,titleId:r,bodyId:h,style:f,overlayDialogStyle:p,rendered:M,zIndex:R,afterEnter:T,afterLeave:L,beforeLeave:W,handleClose:a,onModalClick:C,onOpenAutoFocus:$,onCloseAutoFocus:q,onCloseRequested:x,onFocusoutPrevented:fe}=Ze(c,l);ke(re,{dialogRef:l,headerRef:s,bodyId:h,ns:i,rendered:M,style:f});const P=Me(C),pe=B(()=>c.draggable&&!c.fullscreen);return d({visible:t,dialogContentRef:n}),(g,I)=>(y(),F(Ee,{to:"body",disabled:!g.appendToBody},[w(Te,{name:"dialog-fade",onAfterEnter:o(T),onAfterLeave:o(L),onBeforeLeave:o(W),persisted:""},{default:m(()=>[te(w(o(Be),{"custom-mask-event":"",mask:g.modal,"overlay-class":g.modalClass,"z-index":o(R)},{default:m(()=>[D("div",{role:"dialog","aria-modal":"true","aria-label":g.title||void 0,"aria-labelledby":g.title?void 0:o(r),"aria-describedby":o(h),class:k(`${o(i).namespace.value}-overlay-dialog`),style:Y(o(p)),onClick:I[0]||(I[0]=(...N)=>o(P).onClick&&o(P).onClick(...N)),onMousedown:I[1]||(I[1]=(...N)=>o(P).onMousedown&&o(P).onMousedown(...N)),onMouseup:I[2]||(I[2]=(...N)=>o(P).onMouseup&&o(P).onMouseup(...N))},[w(o(we),{loop:"",trapped:o(t),"focus-start-el":"container",onFocusAfterTrapped:o($),onFocusAfterReleased:o(q),onFocusoutPrevented:o(fe),onReleaseRequested:o(x)},{default:m(()=>[o(M)?(y(),F(so,A({key:0,ref_key:"dialogContentRef",ref:n},g.$attrs,{"custom-class":g.customClass,center:g.center,"align-center":g.alignCenter,"close-icon":g.closeIcon,draggable:o(pe),fullscreen:g.fullscreen,"show-close":g.showClose,title:g.title,onClose:o(a)}),se({header:m(()=>[g.$slots.title?b(g.$slots,"title",{key:1}):b(g.$slots,"header",{key:0,close:o(a),titleId:o(r),titleClass:o(i).e("title")})]),default:m(()=>[b(g.$slots,"default")]),_:2},[g.$slots.footer?{name:"footer",fn:m(()=>[b(g.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):V("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,lo)]),_:3},8,["mask","overlay-class","z-index"]),[[Fe,o(t)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var io=ne(ro,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const co=He(io),ie={showClose:{type:Boolean,default:!0},showFullscreen:{type:Boolean,default:!0},helpMessage:{type:[String,Array],default:""}},ce={dyncHeight:{type:Boolean,default:!0},loading:Boolean,loadingText:{type:String,default:"\u52A0\u8F7D\u4E2D..."}},uo={showConfirmBtn:{type:Boolean,default:!0},confirmOptions:{type:Object,default:{btnText:"\u786E\u5B9A",type:"primary"}},showCancelBtn:{type:Boolean,default:!0},cancelOptions:{type:Object,default:{btnText:"\u53D6\u6D88",type:"default"}}},de={modelValue:Boolean,...ie,...ce,...uo,showFooter:{type:Boolean,default:!0},scrollTop:{type:Boolean,default:!0},closeFn:Function},fo={...Ne,...de,appendToBody:{type:Boolean,default:!0},onOpen:Function,onOpened:Function,onClose:Function,onClosed:Function},po=S({name:"BasicModalHeader",components:{ElTooltip:ze,BasicTitle:qe,SvgIcon:Re},inheritAttrs:!1,props:{fullscreen:Boolean,prefixCls:String,title:String,...ie},emits:["cancel","fullscreen"],setup(e,{emit:d}){function c(l){!e.showFullscreen||(l.stopPropagation(),i(l))}function u(l){d("cancel",l)}function i(l){l==null||l.stopPropagation(),l==null||l.preventDefault(),d("fullscreen")}return{handleCancel:u,handleFullscreen:i,handleTitleDbClick:c}}});function go(e,d,c,u,i,l){const s=E("BasicTitle"),n=E("SvgIcon"),t=E("ElTooltip");return y(),H("div",{class:k(e.prefixCls),onDblclick:d[0]||(d[0]=(...r)=>e.handleTitleDbClick&&e.handleTitleDbClick(...r))},[w(s,{helpMessage:e.helpMessage},{default:m(()=>[e.title?(y(),H(j,{key:0},[K(U(e.title),1)],64)):b(e.$slots,"header",{key:1})]),_:3},8,["helpMessage"]),D("div",{class:k(`${e.prefixCls}__extra`)},[e.showFullscreen?(y(),H(j,{key:0},[e.fullscreen?(y(),F(t,{key:0,content:"\u8FD8\u539F",placement:"bottom"},{default:m(()=>[w(n,{onClick:e.handleFullscreen,name:"shrink"},null,8,["onClick"])]),_:1})):(y(),F(t,{key:1,content:"\u6700\u5927\u5316",placement:"bottom"},{default:m(()=>[w(n,{onClick:e.handleFullscreen,name:"arrowsalt"},null,8,["onClick"])]),_:1}))],64)):V("",!0),e.showClose?(y(),F(t,{key:1,content:"\u5173\u95ED",placement:"bottom"},{default:m(()=>[w(n,{onClick:e.handleCancel,name:"close"},null,8,["onClick"])]),_:1})):V("",!0)],2)],34)}const mo=Q(po,[["render",go]]),ue=Symbol();function ho(e){return De(e,ue)}function Ao(){return Ve(ue)}const Co=S({name:"ModalWrapper",components:{ScrollContainer:je},directives:{loading:Ke.directive},inheritAttrs:!1,props:{modelValue:Boolean,fullscreen:Boolean,prefixCls:String,...ce},emits:["height-change"],setup(e,{emit:d}){const c=v(null),u=v(null),i=v(null),l=v(0),s=B(()=>{const{dyncHeight:r}=e;return r?{height:`${o(l)}px`}:{height:"auto",padding:"1rem"}});async function n(){_(()=>{var h;const r=o(c);!r||(h=r==null?void 0:r.scrollTo)==null||h.call(r,0)})}async function t(){var M,R;if(!e.modelValue||!e.dyncHeight)return;const r=o(u);if(!r)return;await _();const h=r.parentElement;if(!h)return;const f=o(i);if(!f)return;const p=(f==null?void 0:f.clientHeight)||0;await _();try{const T=h.parentElement;if(!T)return;const L=((M=T.querySelector(".el-dialog__header"))==null?void 0:M.clientHeight)||0,W=((R=T.querySelector(".el-dialog__footer"))==null?void 0:R.clientHeight)||0,a=T.offsetTop;let C=window.innerHeight-a*2-W-L;p<C&&(C=p),l.value=C>100?C:100,d("height-change",o(l))}catch(T){}}return Ue(t.bind(null,!1)),ho({redoModalHeight:t}),X(()=>{e.dyncHeight&&t()}),le(()=>e.fullscreen,()=>{t()}),{wrapperRef:c,spinRef:u,innerRef:i,spinStyle:s,scrollTop:n,setModalHeight:t}}}),yo=["element-loading-text"],bo={ref:"innerRef"};function vo(e,d,c,u,i,l){const s=E("ScrollContainer"),n=Se("loading");return te((y(),H("div",{ref:"spinRef",style:Y(e.spinStyle),"element-loading-text":e.loadingText},[e.dyncHeight?(y(),F(s,{key:0,ref:"wrapperRef",class:k(e.prefixCls)},{default:m(()=>[D("div",bo,[b(e.$slots,"default")],512)]),_:3},8,["class"])):b(e.$slots,"default",{key:1})],12,yo)),[[n,e.loading]])}const $o=Q(Co,[["render",vo]]);const ko=S({name:"BasicModal",components:{ElDialog:co,ElButton:Pe,ModalWrapper:$o,ModalHeader:mo},inheritAttrs:!1,props:fo,emits:["visible-change","height-change","cancel","confirm","register","update:modelValue"],setup(e,{emit:d}){const c=v(!1),u=v(null),i=v(null),{prefixCls:l}=Ie("basic-modal"),s=v(!1),n={setModalProps:M,emitVisible:void 0,redoModalHeight:()=>{_(()=>{o(i)&&o(i).setModalHeight()})}},t=Z();t&&d("register",n,t.uid);const r=B(()=>({...e,...o(u)})),h=B(()=>{const a={...o(r),fullscreen:o(s)},C=`${l} ${(a==null?void 0:a.class)||""} ${l}-${t==null?void 0:t.uid}`;a.class=C;const $=Object.keys(de);return Ae(a,$)}),f=B(()=>{const{showFullscreen:a,showClose:C,helpMessage:$,title:q}=o(r);return{title:q,showFullscreen:a,showClose:C,helpMessage:$,fullscreen:o(s),prefixCls:`${l}-header`}}),p=B(()=>{const{dyncHeight:a,loading:C,loadingText:$}=o(r);return{dyncHeight:a,loading:C,loadingText:$,fullscreen:o(s),modelValue:o(c),prefixCls:`${l}__body`}});function M(a){u.value={...o(u),...a},Reflect.has(a,"modelValue")&&(c.value=!!a.modelValue),Reflect.has(a,"fullscreen")&&(s.value=!!a.fullscreen)}async function R(a){a==null||a.stopPropagation();const{closeFn:C}=o(r);if(typeof C=="function"){const $=await C();c.value=!$;return}else c.value=!1;d("cancel",a)}function T(a){d("confirm",a)}function L(a){d("height-change",a)}function W(){M({fullscreen:!o(s)})}return X(()=>{c.value=!!e.modelValue,s.value=!!e.fullscreen}),le(()=>o(c),a=>{var C;d("visible-change",a),d("update:modelValue",a),t&&((C=n.emitVisible)==null||C.call(n,a,t.uid)),_(()=>{var $;(e==null?void 0:e.scrollTop)&&a&&o(i)&&(($=o(i))==null||$.scrollTop(0))})},{immediate:!1}),{prefixCls:l,getBindValues:h,getHeaderBindValues:f,getWrapperBindValue:p,visibleRef:c,fullscreenRef:s,getProps:r,modalWrapperRef:i,handleFullscreen:W,handleCancel:R,handleConfirm:T,handleHeightChange:L}}});function Mo(e,d,c,u,i,l){const s=E("ModalHeader"),n=E("ModalWrapper"),t=E("ElButton"),r=E("ElDialog");return y(),F(r,A(e.getBindValues,{showClose:!1,modelValue:e.visibleRef,"onUpdate:modelValue":d[0]||(d[0]=h=>e.visibleRef=h)}),se({header:m(()=>[w(s,A(e.getHeaderBindValues,{onFullscreen:e.handleFullscreen,onCancel:e.handleCancel}),{header:m(()=>[b(e.$slots,"header")]),_:3},16,["onFullscreen","onCancel"])]),default:m(()=>[w(n,A({ref:"modalWrapperRef"},e.getWrapperBindValue,{onHeightChange:e.handleHeightChange}),{default:m(()=>[b(e.$slots,"default")]),_:3},16,["onHeightChange"])]),_:2},[e.showFooter?{name:"footer",fn:m(()=>{var h;return[D("div",{class:k(`${e.prefixCls}-footer`)},[e.$slots.footer?b(e.$slots,"footer",{key:0}):(y(),H(j,{key:1},[b(e.$slots,"prependFooter"),e.showCancelBtn?(y(),F(t,A({key:0},e.cancelOptions,{onClick:e.handleCancel}),{default:m(()=>{var f;return[K(U(((f=e.cancelOptions)==null?void 0:f.btnText)||"Cancel"),1)]}),_:1},16,["onClick"])):V("",!0),b(e.$slots,"centerFooter"),e.showConfirmBtn?(y(),F(t,A({key:1},e.confirmOptions,{loading:(h=e.getProps.confirmOptions)==null?void 0:h.loading,onClick:e.handleConfirm}),{default:m(()=>{var f;return[K(U(((f=e.confirmOptions)==null?void 0:f.btnText)||"OK"),1)]}),_:1},16,["loading","onClick"])):V("",!0),b(e.$slots,"appendFooter")],64))],2)]}),key:"0"}:void 0]),1040,["modelValue"])}const Bo=Q(ko,[["render",Mo]]),O=ae({}),J=ae({});function Oo(){const e=v(null),d=v(!1),c=v("");function u(s,n){Z()||G("useModal() can only be used inside setup() or functional components!"),c.value=n,Oe(()=>{e.value=null,d.value=!1,O[o(c)]=null}),!(o(d)&&_e()&&s===o(e))&&(e.value=s,d.value=!0,s.emitVisible=(t,r)=>{J[r]=t})}const i=()=>{const s=o(e);return s||G("The modal instance has not been obtained, please make sure the instance is rendered when performing the instance operation!"),s},l={setModalProps:s=>{var n;(n=i())==null||n.setModalProps(s)},getVisible:B(()=>J[~~o(c)]),redoModalHeight:()=>{var s,n;(n=(s=i())==null?void 0:s.redoModalHeight)==null||n.call(s)},openModal:(s=!0,n,t=!0)=>{var f;if((f=i())==null||f.setModalProps({modelValue:s}),!n)return;const r=o(c);if(t){O[r]=null,O[r]=z(n);return}xe(z(O[r]),z(n))||(O[r]=z(n))},closeModal:()=>{var s;(s=i())==null||s.setModalProps({modelValue:!1})}};return[u,l]}const _o=e=>{const d=v(null),c=Z(),u=v(""),i=()=>{const n=o(d);return n||G("useModalInner instance is undefined!"),n},l=(n,t)=>{Le(()=>{d.value=null}),u.value=t,d.value=n,c==null||c.emit("register",n,t)},s={changeLoading:(n=!0)=>{var t;(t=i())==null||t.setModalProps({loading:n})},getVisible:B(()=>J[~~o(u)]),changeConfirmLoading:(n=!0)=>{var t;(t=i())==null||t.setModalProps({confirmButton:{loading:n}})},closeModal:()=>{var n;(n=i())==null||n.setModalProps({modelValue:!1})},setModalProps:n=>{var t;(t=i())==null||t.setModalProps(n)},redoModalHeight:()=>{var t;const n=(t=i())==null?void 0:t.redoModalHeight;n&&n()}};return X(()=>{const n=O[o(u)];!n||!e||typeof e!="function"||_(()=>{e(n)})}),[l,s]},Lo=We(Bo);export{Lo as B,Oo as a,_o as b,Ao as u};
