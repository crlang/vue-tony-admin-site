var p=(e,t,a)=>new Promise((o,s)=>{var r=n=>{try{u(a.next(n))}catch(i){s(i)}},l=n=>{try{u(a.throw(n))}catch(i){s(i)}},u=n=>n.done?o(n.value):Promise.resolve(n.value).then(r,l);u((a=a.apply(e,t)).next())});import{r as f,az as w,b as d,d as g,E as B,z as V,c as v,aA as I,w as h,_ as y,l as E,e as m,o as S,j as b,i as C,h as D,m as $,t as A,aB as _,aC as k}from"./index.61be89a1.js";function N(e){const t=f(e),a=f(!1);let o;function s(){o&&window.clearInterval(o)}function r(){a.value=!1,s(),o=null}function l(){d(a)||!!o||(a.value=!0,o=setInterval(()=>{d(t)===1?(r(),t.value=e):t.value-=1},1e3))}function u(){t.value=e,r()}function n(){u(),l()}return w(()=>{u()}),{currentCount:t,isStart:a,start:l,reset:u,restart:n,clear:s,stop:r}}const R=g({name:"CountdownInput",components:{ElInput:B,ElButton:V},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},emits:["change","update:modelValue"],setup(e,{emit:t}){const{prefixCls:a}=E("basic-countdown-input"),o=f(!1),s=f(),{currentCount:r,isStart:l,start:u}=N(e.count),n=v(()=>d(l)?`${d(r)}\u79D2\u540E\u91CD\u65B0\u83B7\u53D6`:"\u83B7\u53D6\u9A8C\u8BC1\u7801");function i(){return p(this,null,function*(){const{sendCodeApi:c}=e;if(typeof c=="function"){o.value=!0;try{(yield c())&&u()}finally{o.value=!1}}else u()})}return I(()=>{s.value=e.modelValue||""}),h(()=>d(s),c=>{t("update:modelValue",c),t("change",c)}),{prefixCls:a,loading:o,isStart:l,innerValueRef:s,getButtonText:n,handleStart:i}}});function T(e,t,a,o,s,r){const l=m("ElButton"),u=m("ElInput");return S(),b(u,_(e.$attrs,{class:e.prefixCls,modelValue:e.innerValueRef,"onUpdate:modelValue":t[0]||(t[0]=n=>e.innerValueRef=n)}),{append:C(()=>[D(l,{disabled:e.isStart,onClick:e.handleStart,loading:e.loading},{default:C(()=>[$(A(e.getButtonText),1)]),_:1},8,["disabled","onClick","loading"])]),_:1},16,["class","modelValue"])}var z=y(R,[["render",T]]);const F=k(z);export{F as C};
