var _=Object.defineProperty;var F=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var E=(e,u,o)=>u in e?_(e,u,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[u]=o,h=(e,u)=>{for(var o in u||(u={}))S.call(u,o)&&E(e,o,u[o]);if(F)for(var o of F(u))y.call(u,o)&&E(e,o,u[o]);return e};var f=(e,u,o)=>new Promise((r,a)=>{var p=t=>{try{n(o.next(t))}catch(l){a(l)}},i=t=>{try{n(o.throw(t))}catch(l){a(l)}},n=t=>t.done?r(t.value):Promise.resolve(t.value).then(p,i);n((o=o.apply(e,u)).next())});import{B as I}from"./index.4ad4c889.js";import{B as V,a as R}from"./index.bb24e9c9.js";import{I as M}from"./index.c620dc1c.js";import{d as N}from"./system.40c8cc41.js";import{I as k}from"./index.e7a25dd6.js";import{E as $}from"./index.6adb7f1a.js";import{c2 as w,d as G,r as T,c as q,b as B,_ as A,e as b,o as U,j,i as D,h as C,aB as x}from"./index.12e2b36d.js";import{u as z}from"./useForm.e1560826.js";const le=[{label:"\u83DC\u5355\u540D\u79F0",prop:"menuName",width:200,align:"left"},{label:"\u56FE\u6807",prop:"icon",width:100,customRender:({record:e})=>w(k,{name:e.icon})},{label:"\u6743\u9650\u6807\u8BC6",prop:"permission",width:180},{label:"\u7EC4\u4EF6",prop:"component"},{label:"\u6392\u5E8F",prop:"orderNo",width:100},{label:"\u72B6\u6001",prop:"status",width:100,customRender:({record:e})=>{const o=~~e.status===0,r=o?"success":"danger",a=o?"\u542F\u7528":"\u505C\u7528";return w($,{type:r},()=>a)}},{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:180}],L=e=>e==="0",g=e=>e==="1",m=e=>e==="2",ae=[{field:"menuName",label:"\u83DC\u5355\u540D\u79F0",component:"ElInput",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"ElSelect",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]},colProps:{span:8}}],O=[{field:"type",label:"\u83DC\u5355\u7C7B\u578B",component:"ElRadioButton",defaultValue:"0",componentProps:{options:[{label:"\u76EE\u5F55",value:"0"},{label:"\u83DC\u5355",value:"1"},{label:"\u6309\u94AE",value:"2"}]}},{field:"menuName",label:"\u83DC\u5355\u540D\u79F0",component:"ElInput",required:!0},{field:"orderNo",label:"\u6392\u5E8F",component:"ElInputNumber",defaultValue:0,required:!0},{field:"icon",label:"\u56FE\u6807",component:"ElSelect",slot:"icon",required:!0,ifShow:({values:e})=>!m(e.type)},{field:"routePath",label:"\u8DEF\u7531\u5730\u5740",component:"ElInput",required:!0,ifShow:({values:e})=>!m(e.type)},{field:"component",label:"\u7EC4\u4EF6\u8DEF\u5F84",component:"ElInput",ifShow:({values:e})=>g(e.type)},{field:"permission",label:"\u6743\u9650\u6807\u8BC6",component:"ElInput",ifShow:({values:e})=>!L(e.type)},{field:"status",label:"\u72B6\u6001",component:"ElRadioGroup",defaultValue:"0",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u7981\u7528",value:"1"}]}},{field:"isExt",label:"\u662F\u5426\u5916\u94FE",component:"ElRadioGroup",defaultValue:"0",componentProps:{options:[{label:"\u5426",value:"0"},{label:"\u662F",value:"1"}]},ifShow:({values:e})=>!m(e.type)},{field:"keepalive",label:"\u662F\u5426\u7F13\u5B58",component:"ElRadioGroup",defaultValue:"0",componentProps:{options:[{label:"\u5426",value:"0"},{label:"\u662F",value:"1"}]},ifShow:({values:e})=>g(e.type)},{field:"show",label:"\u662F\u5426\u663E\u793A",component:"ElRadioGroup",defaultValue:"0",componentProps:{options:[{label:"\u662F",value:"0"},{label:"\u5426",value:"1"}]},ifShow:({values:e})=>!m(e.type)}],W=G({name:"MenuDrawer",components:{BasicDrawer:V,BasicForm:I,IconPicker:M},emits:["success","register"],setup(e,{emit:u}){const o=T(!0),[r,{resetFields:a,setFieldsValue:p,updateSchema:i,validate:n}]=z({labelWidth:100,schemas:O,showActionButtonGroup:!1,colProps:{span:24},actionColProps:{span:24}}),[t,{closeDrawer:l,changeConfirmLoading:s}]=R(c=>f(this,null,function*(){a(),s(!1),o.value=!!(c!=null&&c.isUpdate),B(o)&&p(h({},c.record));const P=yield N();i({field:"parentMenu",componentProps:{treeData:P}})})),d=q(()=>B(o)?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355");function v(){return f(this,null,function*(){try{yield n(),s(!0),l(),u("success")}finally{s(!1)}})}return{registerDrawer:t,registerForm:r,getTitle:d,handleSubmit:v}}});function H(e,u,o,r,a,p){const i=b("IconPicker"),n=b("BasicForm"),t=b("BasicDrawer");return U(),j(t,x(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,size:"500px",onConfirm:e.handleSubmit}),{default:D(()=>[C(n,{onRegister:e.registerForm},{icon:D(({model:l,field:s})=>[C(i,{modelValue:l[s],"onUpdate:modelValue":d=>l[s]=d},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onConfirm"])}var J=A(W,[["render",H]]),ne=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{J as M,ne as a,le as c,ae as s};
