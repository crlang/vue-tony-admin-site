var z=Object.defineProperty,D=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var A=(e,t,r)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C=(e,t)=>{for(var r in t||(t={}))G.call(t,r)&&A(e,r,t[r]);if(R)for(var r of R(t))L.call(t,r)&&A(e,r,t[r]);return e},E=(e,t)=>D(e,F(t));var P=(e,t,r)=>new Promise((g,p)=>{var _=u=>{try{d(r.next(u))}catch(f){p(f)}},h=u=>{try{d(r.throw(u))}catch(f){p(f)}},d=u=>u.done?g(u.value):Promise.resolve(u.value).then(_,h);d((r=r.apply(e,t)).next())});import{x as N,cz as x,cA as O,M as T,a as V,ak as W,Y as v,z as b,Z as k,a3 as y,A as S,ao as Y,aa as Z,F as w,ab as q,a8 as H,G as J}from"./vendor.041d4bc7.js";import{_ as K,I as Q,u as U,r as X,k as ee,e as te,R as ne,x as ae,G as re,j as se}from"./index.ecb3b302.js";import{g as oe}from"./index.c54f549d.js";import"./index.8ca21f57.js";import"./useWindowSizeFn.b4a2eb84.js";import"./useMenuSetting.29b8db62.js";import"./clickOutside.233dba34.js";import"./lock.ed097f7a.js";const ce=N({name:"LayoutBreadcrumb",components:{ElBreadcrumb:x,ElBreadcrumbItem:O,Icon:Q},props:{},setup(){const e=T([]),{currentRoute:t}=V(),{prefixCls:r}=U("layout-breadcrumb"),{getShowBreadCrumbIcon:g}=X(),p=ee(),{t:_}=te();W(()=>P(this,null,function*(){var I,j,M;if(t.value.name===ne)return;const s=yield oe(),a=t.value.matched,n=a==null?void 0:a[a.length-1];let o=t.value.path;n&&((I=n==null?void 0:n.meta)==null?void 0:I.currentActiveMenu)&&(o=n.meta.currentActiveMenu);const c=ae(s,o),m=s.filter($=>$.path===c[0]),l=h(m,c);if(!l||l.length===0)return;const B=d(l);((j=t.value.meta)==null?void 0:j.currentActiveMenu)&&B.push(E(C({},t.value),{name:((M=t.value.meta)==null?void 0:M.title)||t.value.name})),e.value=B}));function h(s,a){const n=[];return s.forEach(o=>{var c,m;a.includes(o.path)&&n.push(E(C({},o),{name:((c=o.meta)==null?void 0:c.title)||o.name})),((m=o.children)==null?void 0:m.length)&&n.push(...h(o.children,a))}),n}function d(s){return re(s,a=>{const{meta:n,name:o}=a;if(!n)return!!o;const{title:c,hideBreadcrumb:m}=n;return!(!c||m)}).filter(a=>{var n;return!((n=a.meta)==null?void 0:n.hideBreadcrumb)})}function u(s,a,n){n==null||n.preventDefault();const{children:o,redirect:c,meta:m}=s;if((o==null?void 0:o.length)&&!c){n==null||n.stopPropagation();return}if(!(m==null?void 0:m.carryParam))if(c&&se(c))p(c);else{let l="";a.length===1?l=a[0]:l=`${a.slice(1).pop()||""}`,l=/^\//.test(l)?l:`/${l}`,p(l)}}function f(s,a){return s.indexOf(a)!==s.length-1}function i(s){var a;return(a=s.meta)==null?void 0:a.icon}return{routes:e,t:_,prefixCls:r,getIcon:i,getShowBreadCrumbIcon:g,handleClick:u,hasRedirect:f}}}),ue={key:1};function ie(e,t,r,g,p,_){const h=v("Icon"),d=v("router-link"),u=v("ElBreadcrumbItem"),f=v("ElBreadcrumb");return b(),k(f,{separator:"/",class:J(e.prefixCls),routes:e.routes},{default:y(()=>[(b(!0),S(H,null,Y(e.routes,i=>(b(),k(u,{key:i.name},{default:y(()=>[e.getShowBreadCrumbIcon&&e.getIcon(i)?(b(),k(h,{key:0,icon:e.getIcon(i),size:"14",class:"mr-1"},null,8,["icon"])):Z("",!0),e.hasRedirect(e.routes,i)?(b(),k(d,{key:2,to:"",onClick:s=>e.handleClick(i,e.routes,s)},{default:y(()=>[q(w(e.t(i.name||i.meta.title)),1)]),_:2},1032,["onClick"])):(b(),S("span",ue,w(e.t(i.name||i.meta.title)),1))]),_:2},1024))),128))]),_:1},8,["class","routes"])}var ve=K(ce,[["render",ie]]);export{ve as default};
