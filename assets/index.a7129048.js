var pe=Object.defineProperty,de=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var G=(e,s,o)=>s in e?pe(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,g=(e,s)=>{for(var o in s||(s={}))ge.call(s,o)&&G(e,o,s[o]);if(M)for(var o of M(s))me.call(s,o)&&G(e,o,s[o]);return e},O=(e,s)=>de(e,fe(s));var U=(e,s,o)=>new Promise((p,l)=>{var d=i=>{try{n(o.next(i))}catch(u){l(u)}},t=i=>{try{n(o.throw(i))}catch(u){l(u)}},n=i=>i.done?p(i.value):Promise.resolve(i.value).then(d,t);n((o=o.apply(e,s)).next())});import{e as Y,aR as we,_ as L,ai as he,W as ye,u as Ce,aq as J,i as K,ac as De,ad as W,w as $e}from"./index.ecb3b302.js";import{x as R,aI as ve,Y as $,z as m,A as k,a4 as w,a8 as X,Z as T,a3 as h,ab as A,F as V,aa as P,G as B,S as Z,bG as ke,D as Q,a0 as F,be as Be,M as y,y as C,u as a,t as S,o as be,O as H,aO as Pe,X as x,af as E,ad as ee,a1 as I,ao as Se,aJ as Te,aK as Ve,I as te,aj as oe,aY as Fe,ak as Ee}from"./vendor.041d4bc7.js";import{u as Oe}from"./useAttrs.374c949f.js";const{t:se}=Y(),j={showConfirmBtn:{type:Boolean,default:!0},confirmText:{type:String,default:se("common.confirmText")},confirmType:{type:String,default:"primary"},confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelText:{type:String,default:se("common.cancelText")},cancelType:{type:String,default:"default"},showFooter:{type:Boolean},footerHeight:{type:Number,default:60}},re={isDetail:{type:Boolean},showDetailBack:{type:Boolean,default:!0},loading:{type:Boolean},loadingText:{type:String},closeFunc:{type:[Function,Object],default:null}},Le=g(g(O(g({},we),{title:{type:String},modelValue:{type:Boolean}}),re),j),Re=R({name:"BasicDrawerFooter",components:{ElButton:ve},inheritAttrs:!1,props:O(g({},j),{prefixCls:{type:String},height:{type:String,default:"60px"}}),emits:["ok","close"],setup(e,{emit:s}){function o(){s("ok")}function p(){s("close")}return{handleOk:o,handleClose:p}}});function Ae(e,s,o,p,l,d){const t=$("ElButton");return e.showFooter?(m(),k("div",{key:0,class:B(`${e.prefixCls}-footer`),style:Z({height:e.height})},[e.$slots.footer?w(e.$slots,"footer",{key:0}):(m(),k(X,{key:1},[w(e.$slots,"insertFooter"),e.showCancelBtn?(m(),T(t,{key:0,onClick:e.handleClose},{default:h(()=>[A(V(e.cancelText),1)]),_:1},8,["onClick"])):P("",!0),w(e.$slots,"centerFooter"),e.showConfirmBtn?(m(),T(t,{key:1,type:e.confirmType,onClick:e.handleOk,loading:e.confirmLoading},{default:h(()=>[A(V(e.confirmText),1)]),_:1},8,["type","onClick","loading"])):P("",!0),w(e.$slots,"appendFooter")],64))],6)):P("",!0)}var He=L(Re,[["render",Ae]]);const Ie=R({name:"BasicDrawerHeader",components:{BasicTitle:he,ArrowLeft:ke},inheritAttrs:!1,props:{prefixCls:{type:String},isDetail:{type:Boolean},showDetailBack:{type:Boolean},title:{type:String}},emits:["close"],setup(e,{emit:s}){function o(){s("close")}return{handleClose:o}}}),je={key:1};function Ne(e,s,o,p,l,d){const t=$("ArrowLeft"),n=$("BasicTitle");return e.isDetail?(m(),k("div",{key:0,class:B(`${e.prefixCls}-header`)},[Q("span",{class:B(`${e.prefixCls}-header__title`)},[e.showDetailBack?(m(),k("span",{key:0,class:B(`${e.prefixCls}-header__back`),onClick:s[0]||(s[0]=(...i)=>e.handleClose&&e.handleClose(...i))},[F(t)],2)):P("",!0),e.title?(m(),k("span",je,V(e.title),1)):P("",!0)],2),Q("span",{class:B(`${e.prefixCls}-header__toolbar`)},[w(e.$slots,"titleToolbar")],2)],2)):(m(),T(n,{key:1,class:B(e.prefixCls)},{default:h(()=>[e.$slots.title?w(e.$slots,"title",{key:0}):(m(),k(X,{key:1},[A(V(e.title||""),1)],64))]),_:3},8,["class"]))}var _e=L(Ie,[["render",Ne]]);const qe=R({components:{ElDrawer:Be,ScrollContainer:ye,DrawerFooter:He,DrawerHeader:_e},inheritAttrs:!1,props:Le,emits:["visible-change","ok","close","register"],setup(e,{emit:s}){const o=y(!1),p=Oe(),l=y(null),d=y(),{t}=Y(),{prefixCls:n}=Ce("basic-drawer"),i={setDrawerProps:ue,emitVisible:void 0},u=E();u&&s("register",i,u.uid);const f=C(()=>J(S(e),a(l))),D=C(()=>{const r=g(g({},a(p)),a(f)),{isDetail:c,width:v,customClass:q}=r;if(c){v||(r.width="100%");const z=`${n}__detail`;r.customClass=q?`${q} ${z}`:z}return r}),ne=C(()=>{const r=g({},a(D));return r.customClass=`${n} ${r==null?void 0:r.customClass} basic-drawer-${u==null?void 0:u.uid}`,be(r,Object.getOwnPropertyNames(g(g({},j),re)))}),_=C(()=>{const{footerHeight:r,showFooter:c}=a(D);return c&&r?`${parseInt(r)}px`:"0px"}),ae=C(()=>{const r=a(_);return{position:"relative",height:`calc(100% - ${r})`}}),le=C(()=>{var r;return!!((r=a(D))==null?void 0:r.loading)});H(()=>e.modelValue,(r,c)=>{r!==c&&(o.value=r)},{deep:!0}),H(()=>{var r;return(r=l.value)==null?void 0:r.loading},r=>{var c,v;r?d.value=Pe.service({target:`.basic-drawer-${u==null?void 0:u.uid}`,text:((c=l.value)==null?void 0:c.loadingText)||e.loadingText||"Loading"}):(v=d.value)==null||v.close()},{deep:!0}),H(()=>o.value,r=>{x(()=>{var c;s("visible-change",r),u&&((c=i.emitVisible)==null||c.call(i,r,u.uid))})});function ie(r){return U(this,null,function*(){const{closeFunc:c}=a(D);if(s("close",r),c&&K(c)){const v=yield c();o.value=!v;return}o.value=!1})}function ue(r){l.value=J(a(l)||{},r),Reflect.has(r,"modelValue")&&(o.value=!!r.modelValue)}function ce(){s("ok")}return{onClose:ie,t,prefixCls:n,visibleRef:o,getMergeProps:f,getScrollContentStyle:ae,getProps:D,getLoading:le,getBindValues:ne,getFooterHeight:_,handleOk:ce}}});function ze(e,s,o,p,l,d){const t=$("DrawerHeader"),n=$("ScrollContainer"),i=$("DrawerFooter"),u=$("ElDrawer");return m(),T(u,I({onClose:e.onClose},e.getBindValues,{modelValue:e.visibleRef,"onUpdate:modelValue":s[0]||(s[0]=f=>e.visibleRef=f)}),{title:h(()=>[F(t,I(e.getProps,{prefixCls:e.prefixCls,onClose:e.onClose}),ee({_:2},[e.$slots.title?{name:"title",fn:h(()=>[w(e.$slots,"title")])}:void 0,e.$slots.titleToolbar?{name:"titleToolbar",fn:h(()=>[w(e.$slots,"titleToolbar")])}:void 0]),1040,["prefixCls","onClose"])]),default:h(()=>[F(n,{style:Z(e.getScrollContentStyle)},{default:h(()=>[w(e.$slots,"default")]),_:3},8,["style"]),F(i,I(e.getProps,{prefixCls:e.prefixCls,height:e.getFooterHeight,onClose:e.onClose,onOk:e.handleOk}),ee({_:2},[Se(Object.keys(e.$slots),f=>({name:f,fn:h(D=>[w(e.$slots,f,Te(Ve(D||{})))])}))]),1040,["prefixCls","height","onClose","onOk"])]),_:3},16,["onClose","modelValue"])}var Me=L(qe,[["render",ze]]);const b=te({}),N=te({});function Ke(){if(!E())throw new Error("useDrawer() can only be used inside setup() or functional components!");const e=y(null),s=y(!1),o=y("");function p(t,n){oe(()=>{e.value=null,s.value=null,b[a(o)]=null}),!(a(s)&&De()&&t===a(e))&&(o.value=n,e.value=t,s.value=!0,t.emitVisible=(i,u)=>{N[u]=i})}const l=()=>{const t=a(e);return t||W("useDrawer instance is undefined!"),t},d={setDrawerProps:t=>{var n;(n=l())==null||n.setDrawerProps(t)},getVisible:C(()=>N[~~a(o)]),openDrawer:(t=!0,n,i=!0)=>{var f;if((f=l())==null||f.setDrawerProps({modelValue:t}),!n)return;if(i){b[a(o)]=null,b[a(o)]=S(n);return}Fe(S(b[a(o)]),S(n))||(b[a(o)]=S(n))},closeDrawer:()=>{var t;(t=l())==null||t.setDrawerProps({modelValue:!1})}};return[p,d]}const We=e=>{const s=y(null),o=E(),p=y("");if(!E())throw new Error("useDrawerInner() can only be used inside setup() or functional components!");const l=()=>{const t=a(s);if(!t){W("useDrawerInner instance is undefined!");return}return t},d=(t,n)=>{oe(()=>{s.value=null}),p.value=n,s.value=t,o==null||o.emit("register",t,n)};return Ee(()=>{const t=b[a(p)];!t||!e||!K(e)||x(()=>{e(t)})}),[d,{changeLoading:(t=!0)=>{var n;(n=l())==null||n.setDrawerProps({loading:t})},changeOkLoading:(t=!0)=>{var n;(n=l())==null||n.setDrawerProps({confirmLoading:t})},getVisible:C(()=>N[~~a(p)]),closeDrawer:()=>{var t;(t=l())==null||t.setDrawerProps({modelValue:!1})},setDrawerProps:t=>{var n;(n=l())==null||n.setDrawerProps(t)}}]},Xe=$e(Me);export{Xe as B,We as a,Ke as u};
