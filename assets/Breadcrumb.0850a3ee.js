var $=Object.defineProperty,z=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var R=(e,t,a)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,y=(e,t)=>{for(var a in t||(t={}))L.call(t,a)&&R(e,a,t[a]);if(P)for(var a of P(t))F.call(t,a)&&R(e,a,t[a]);return e},I=(e,t)=>z(e,D(t));var w=(e,t,a)=>new Promise((b,f)=>{var k=u=>{try{p(a.next(u))}catch(d){f(d)}},g=u=>{try{p(a.throw(u))}catch(d){f(d)}},p=u=>u.done?b(u.value):Promise.resolve(u.value).then(k,g);p((a=a.apply(e,t)).next())});import{bX as N}from"./ex-pkg-vendor.ab2d902e.js";import{_ as T,I as G,u as H,q as O,k as V,e as q,R as Q,y as W,H as X,j as Z}from"./index.16f9732e.js";import{g as J}from"./index.0167b528.js";import{at as K,au as U}from"./ex-pkg-element-plus.e1a09009.js";import{y as Y,a as ee,w as te,Z as v,z as h,G as _,H as C,A,a3 as ne,O as re,Q as M,P as ae,F as se,L as oe}from"./ex-pkg-@vue.dfd8e273.js";import"./ex-pkg-mockjs.0bec78f1.js";import"./ex-pkg-@element-plus.e8ce6c8b.js";import"./ex-pkg-@vueuse.e5d644bd.js";import"./ex-pkg-@iconify.345c6dc9.js";import"./ex-pkg-@popperjs.f3a17871.js";import"./index.acc9f221.js";import"./useWindowSizeFn.732207ab.js";import"./propTypes.6bd760c6.js";import"./lock.f5bb7ab4.js";const ce=Y({name:"LayoutBreadcrumb",components:{ElBreadcrumb:K,ElBreadcrumbItem:U,Icon:G},props:{},setup(){const e=ee([]),{currentRoute:t}=N(),{prefixCls:a}=H("layout-breadcrumb"),{getShowBreadCrumbIcon:b}=O(),f=V(),{t:k}=q();te(()=>w(this,null,function*(){var B,E,x;if(t.value.name===Q)return;const s=yield J(),r=t.value.matched,n=r==null?void 0:r[r.length-1];let o=t.value.path;n&&((B=n==null?void 0:n.meta)==null?void 0:B.currentActiveMenu)&&(o=n.meta.currentActiveMenu);const c=W(s,o),m=s.filter(S=>S.path===c[0]),l=g(m,c);if(!l||l.length===0)return;const j=p(l);((E=t.value.meta)==null?void 0:E.currentActiveMenu)&&j.push(I(y({},t.value),{name:((x=t.value.meta)==null?void 0:x.title)||t.value.name})),e.value=j}));function g(s,r){const n=[];return s.forEach(o=>{var c,m;r.includes(o.path)&&n.push(I(y({},o),{name:((c=o.meta)==null?void 0:c.title)||o.name})),((m=o.children)==null?void 0:m.length)&&n.push(...g(o.children,r))}),n}function p(s){return X(s,r=>{const{meta:n,name:o}=r;if(!n)return!!o;const{title:c,hideBreadcrumb:m}=n;return!(!c||m)}).filter(r=>{var n;return!((n=r.meta)==null?void 0:n.hideBreadcrumb)})}function u(s,r,n){n==null||n.preventDefault();const{children:o,redirect:c,meta:m}=s;if((o==null?void 0:o.length)&&!c){n==null||n.stopPropagation();return}if(!(m==null?void 0:m.carryParam))if(c&&Z(c))f(c);else{let l="";r.length===1?l=r[0]:l=`${r.slice(1).pop()||""}`,l=/^\//.test(l)?l:`/${l}`,f(l)}}function d(s,r){return s.indexOf(r)!==s.length-1}function i(s){var r;return(r=s.meta)==null?void 0:r.icon}return{routes:e,t:k,prefixCls:a,getIcon:i,getShowBreadCrumbIcon:b,handleClick:u,hasRedirect:d}}}),ue={key:1};function ie(e,t,a,b,f,k){const g=v("Icon"),p=v("router-link"),u=v("ElBreadcrumbItem"),d=v("ElBreadcrumb");return h(),_(d,{separator:"/",class:oe(e.prefixCls),routes:e.routes},{default:C(()=>[(h(!0),A(se,null,ne(e.routes,i=>(h(),_(u,{key:i.name},{default:C(()=>[e.getShowBreadCrumbIcon&&e.getIcon(i)?(h(),_(g,{key:0,icon:e.getIcon(i),size:"14",class:"mr-1"},null,8,["icon"])):re("",!0),e.hasRedirect(e.routes,i)?(h(),_(p,{key:2,to:"",onClick:s=>e.handleClick(i,e.routes,s)},{default:C(()=>[ae(M(e.t(i.name||i.meta.title)),1)]),_:2},1032,["onClick"])):(h(),A("span",ue,M(e.t(i.name||i.meta.title)),1))]),_:2},1024))),128))]),_:1},8,["class","routes"])}var Ce=T(ce,[["render",ie]]);export{Ce as default};
