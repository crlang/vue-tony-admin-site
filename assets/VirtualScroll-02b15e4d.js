import{b as R,I as T,_ as B}from"./index-795cdaa0.js";import{E as W,r as I,W as M,f as c,u as i,w as k,o as L,n as b,A as P,S as l,ac as F,p as U,I as q,J as m,P as A,t as p,Q as w}from"./vue-d691a816.js";import{d as J}from"./data-a394c940.js";import{ap as Q}from"./elementui-66980f2a.js";const j=W({name:"VirtualScroll",props:{height:[Number,String],width:[Number,String],itemHeight:{type:Number,required:!0},listData:{type:Array,default:()=>[]},bench:{type:Number,default:0},maxHeight:[Number,String],minHeight:[Number,String],maxWidth:[Number,String],minWidth:[Number,String]},setup(e,{slots:E}){const o=I(null),r=M({first:0,last:0,scrollTop:0}),{prefixCls:f}=R("virtual-scroll"),v=c(()=>parseInt(e.bench,10)),s=c(()=>parseInt(e.itemHeight,10)),d=c(()=>Math.max(0,r.first-i(v))),S=c(()=>Math.min((e.listData||[]).length,r.last+i(v))),h=c(()=>({height:a((e.listData||[]).length*i(s))})),D=c(()=>{const t={},n=a(e.height),u=a(e.minHeight),_=a(e.minWidth),g=a(e.maxHeight),x=a(e.maxWidth),N=a(e.width);return n&&(t.height=n),u&&(t.minHeight=u),_&&(t.minWidth=_),g&&(t.maxHeight=g),x&&(t.maxWidth=x),N&&(t.width=N),t});function a(t,n="px"){if(!(t==null||t===""))return isNaN(+t)?String(t):`${Number(t)}${n}`}function H(t){const n=i(o);if(!n)return 0;const u=parseInt(e.height||0,10)||n.clientHeight;return t+Math.ceil(u/i(s))}function V(){return Math.floor(r.scrollTop/i(s))}function y(){const t=i(o);t&&(r.scrollTop=t.scrollTop,r.first=V(),r.last=H(r.first))}function C(){const{listData:t=[]}=e;return t.slice(i(d),i(S)).map($)}function $(t,n){n+=i(d);const u=a(i(s)),_=a(n*i(s)),g=E.default;return l("div",{class:`${f}__item`,style:{top:_,height:u},key:n},{default:()=>g({index:n,item:t})})}return k([()=>e.itemHeight,()=>e.height],()=>{y()}),L(()=>{r.last=H(0),b(()=>{const t=i(o);t&&t.addEventListener("scroll",y)})}),P(()=>{b(()=>{const t=i(o);t&&t.removeEventListener("scroll",y)})}),()=>l("div",{class:f,style:i(D),ref:o},[l("div",{class:`${f}__container`,style:i(h)},[C()])])}});const z=T(j),G=W({components:{ElDivider:Q,VirtualScroll:z},setup(){return{data:J}}});const K={class:"virtual-scroll-demo-wrap"},O={class:"virtual-scroll-demo__item"},X={class:"virtual-scroll-demo-wrap"},Y={class:"virtual-scroll-demo__item"};function Z(e,E,o,r,f,v){const s=F("el-divider"),d=F("VirtualScroll",!0),S=F("PageWrapper");return U(),q(S,{title:"虚拟滚动示例"},{default:m(()=>[l(s,null,{default:m(()=>[A("基础滚动示例")]),_:1}),p("div",K,[l(d,{itemHeight:60,listData:e.data,height:300},{default:m(({item:h,index:D})=>[p("div",O,w(D)+" - "+w(h.title),1)]),_:1},8,["listData"])]),l(s,null,{default:m(()=>[A("即使不可见，也预先加载50条数据，防止空白")]),_:1}),p("div",X,[l(d,{listData:e.data,itemHeight:60,height:300,bench:50},{default:m(({item:h})=>[p("div",Y,w(h.title),1)]),_:1},8,["listData"])])]),_:1})}const rt=B(G,[["render",Z],["__scopeId","data-v-235972ed"]]);export{rt as default};
