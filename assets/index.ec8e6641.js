var ue=Object.defineProperty,se=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var G=(t,i,s)=>i in t?ue(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,L=(t,i)=>{for(var s in i||(i={}))oe.call(i,s)&&G(t,s,i[s]);if($)for(var s of $(i))ce.call(i,s)&&G(t,s,i[s]);return t},R=(t,i)=>se(t,ie(i));import{N as de,at as me,G as p,cY as pe,dE as be,cb as I,a6 as fe,d as ve,bc as Ne,F as Ve,r as he,q as Ie,dw as ge,c as h,a7 as w,af as ye,du as _e,w as we,Y as Ee,Z as Se,o as f,f as C,s as j,b as a,n as B,x as E,h as T,i as q,j as S,bb as Pe,dK as ke,$ as H,k as W,c_ as Fe,a5 as Ae,bF as D,E as xe,C as Ce,a8 as Be,ag as Z,L as Te}from"./index.12e2b36d.js";import{v as J}from"./index.a5c4e050.js";const De=de({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,disabled:Boolean,size:me,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||p(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),Ke={[pe]:(t,i)=>t!==i,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[be]:t=>p(t)||I(t),[fe]:t=>p(t)||I(t)},ze=["aria-label","onKeydown"],Me=["aria-label","onKeydown"],Oe={name:"ElInputNumber"},Ue=ve(R(L({},Oe),{props:De,emits:Ke,setup(t,{expose:i,emit:s}){const r=t,{t:K}=Ne(),m=Ve("input-number"),N=he(),o=Ie({currentValue:r.modelValue,userInput:null}),{formItem:v}=ge(),z=h(()=>p(r.modelValue)&&g(r.modelValue,-1)<r.min),M=h(()=>p(r.modelValue)&&g(r.modelValue)>r.max),Q=h(()=>{const e=U(r.step);return w(r.precision)?Math.max(U(r.modelValue),e):(e>r.precision,r.precision)}),P=h(()=>r.controls&&r.controlsPosition==="right"),O=ye(),V=_e(),X=h(()=>{if(o.userInput!==null)return o.userInput;let e=o.currentValue;if(I(e))return"";if(p(e)){if(Number.isNaN(e))return"";w(r.precision)||(e=e.toFixed(r.precision))}return e}),k=(e,n)=>{if(w(n)&&(n=Q.value),n===0)return Math.round(e);let l=String(e);const u=l.indexOf(".");if(u===-1||!l.replace(".","").split("")[u+n])return e;const y=l.length;return l.charAt(y-1)==="5"&&(l=`${l.slice(0,Math.max(0,y-1))}6`),Number.parseFloat(Number(l).toFixed(n))},U=e=>{if(I(e))return 0;const n=e.toString(),l=n.indexOf(".");let u=0;return l!==-1&&(u=n.length-l-1),u},g=(e,n=1)=>p(e)?k(e+r.step*n):o.currentValue,F=()=>{if(V.value||M.value)return;const e=r.modelValue||0,n=g(e);x(n)},A=()=>{if(V.value||z.value)return;const e=r.modelValue||0,n=g(e,-1);x(n)},Y=(e,n)=>{const{max:l,min:u,step:c,precision:b,stepStrictly:y,valueOnClear:_}=r;let d=Number(e);if(I(e)||Number.isNaN(d))return null;if(e===""){if(_===null)return null;d=Be(_)?{min:u,max:l}[_]:_}return y&&(d=k(Math.round(d/c)*c,b)),w(b)||(d=k(d,b)),(d>l||d<u)&&(d=d>l?l:u,n&&s("update:modelValue",d)),d},x=e=>{var n;const l=o.currentValue,u=Y(e);l!==u&&(o.userInput=null,s("update:modelValue",u),s("input",u),s("change",u,l),r.validateEvent&&((n=v==null?void 0:v.validate)==null||n.call(v,"change").catch(c=>Z())),o.currentValue=u)},ee=e=>o.userInput=e,ne=e=>{const n=e!==""?Number(e):"";(p(n)&&!Number.isNaN(n)||e==="")&&x(n),o.userInput=null},te=()=>{var e,n;(n=(e=N.value)==null?void 0:e.focus)==null||n.call(e)},ae=()=>{var e,n;(n=(e=N.value)==null?void 0:e.blur)==null||n.call(e)},re=e=>{s("focus",e)},le=e=>{var n;s("blur",e),r.validateEvent&&((n=v==null?void 0:v.validate)==null||n.call(v,"blur").catch(l=>Z()))};return we(()=>r.modelValue,e=>{o.currentValue=Y(e,!0),o.userInput=null},{immediate:!0}),Ee(()=>{var e;const{min:n,max:l,modelValue:u}=r,c=(e=N.value)==null?void 0:e.input;if(c.setAttribute("role","spinbutton"),Number.isFinite(l)?c.setAttribute("aria-valuemax",String(l)):c.removeAttribute("aria-valuemax"),Number.isFinite(n)?c.setAttribute("aria-valuemin",String(n)):c.removeAttribute("aria-valuemin"),c.setAttribute("aria-valuenow",String(o.currentValue)),c.setAttribute("aria-disabled",String(V.value)),!p(u)&&u!=null){let b=Number(u);Number.isNaN(b)&&(b=null),s("update:modelValue",b)}}),Se(()=>{var e;const n=(e=N.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${o.currentValue}`)}),i({focus:te,blur:ae}),(e,n)=>(f(),C("div",{class:B([a(m).b(),a(m).m(a(O)),a(m).is("disabled",a(V)),a(m).is("without-controls",!e.controls),a(m).is("controls-right",a(P))]),onDragstart:n[0]||(n[0]=D(()=>{},["prevent"]))},[e.controls?j((f(),C("span",{key:0,role:"button","aria-label":a(K)("el.inputNumber.decrease"),class:B([a(m).e("decrease"),a(m).is("disabled",a(z))]),onKeydown:E(A,["enter"])},[T(a(H),null,{default:q(()=>[a(P)?(f(),S(a(Pe),{key:0})):(f(),S(a(ke),{key:1}))]),_:1})],42,ze)),[[a(J),A]]):W("v-if",!0),e.controls?j((f(),C("span",{key:1,role:"button","aria-label":a(K)("el.inputNumber.increase"),class:B([a(m).e("increase"),a(m).is("disabled",a(M))]),onKeydown:E(F,["enter"])},[T(a(H),null,{default:q(()=>[a(P)?(f(),S(a(Fe),{key:0})):(f(),S(a(Ae),{key:1}))]),_:1})],42,Me)),[[a(J),F]]):W("v-if",!0),T(a(xe),{id:e.id,ref_key:"input",ref:N,type:"number",step:e.step,"model-value":a(X),placeholder:e.placeholder,disabled:a(V),size:a(O),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[E(D(F,["prevent"]),["up"]),E(D(A,["prevent"]),["down"])],onBlur:le,onFocus:re,onInput:ee,onChange:ne},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown"])],34))}}));var Ye=Ce(Ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Re=Te(Ye);export{Re as E};
