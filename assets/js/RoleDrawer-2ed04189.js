var _=Object.defineProperty;var g=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var D=(e,a,t)=>a in e?_(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,h=(e,a)=>{for(var t in a||(a={}))S.call(a,t)&&D(e,t,a[t]);if(g)for(var t of g(a))k.call(a,t)&&D(e,t,a[t]);return e};var m=(e,a,t)=>new Promise((u,r)=>{var i=s=>{try{n(t.next(s))}catch(o){r(o)}},l=s=>{try{n(t.throw(s))}catch(o){r(o)}},n=s=>s.done?u(s.value):Promise.resolve(s.value).then(i,l);n((t=t.apply(e,a)).next())});import{B as v}from"./BasicForm-d9c6bead.js";import{u as R}from"./useForm-2317b26a.js";import{s as y,d as C}from"./system-ac390bf9.js";import{f as j,_ as x}from"./index-94a7e7e0.js";import{a9 as P,aq as N}from"./ex-pkg-element-plus-6a2cfc13.js";import{a4 as T,y as I,a as b,l as V,u as d,Z as f,z as $,G as L,H as F,R as w,D as M}from"./ex-pkg-@vue-6f720869.js";import{B as q,a as A}from"./index-34738798.js";const ee=[{label:"\u89D2\u8272\u540D\u79F0",prop:"roleName",width:200},{label:"\u89D2\u8272\u503C",prop:"roleValue",width:180},{label:"\u6392\u5E8F",prop:"orderNo",width:50},{label:"\u72B6\u6001",prop:"status",width:120,customRender:({record:e},{row:a})=>(Reflect.has(e,"pendingStatus")||(a.pendingStatus=!1),T(P,{modelValue:e.status==="0",activeText:"Y",inactiveText:"N",inlinePrompt:!0,loading:e.pendingStatus,onChange(t){a.pendingStatus=!0;const u=t?"0":"1",{createMessage:r}=j();y(e.id,u).then(()=>{a.status=u,r.success("\u5DF2\u6210\u529F\u4FEE\u6539\u89D2\u8272\u72B6\u6001")}).catch(()=>{r.error("\u4FEE\u6539\u89D2\u8272\u72B6\u6001\u5931\u8D25")}).finally(()=>{a.pendingStatus=!1})}}))},{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:180},{label:"\u5907\u6CE8",prop:"remark"}],te=[{field:"roleNme",label:"\u89D2\u8272\u540D\u79F0",component:"ElInput",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"ElSelect",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]},colProps:{span:8}}],O=[{field:"roleName",label:"\u89D2\u8272\u540D\u79F0",required:!0,component:"ElInput"},{field:"roleValue",label:"\u89D2\u8272\u503C",required:!0,component:"ElInput"},{field:"status",label:"\u72B6\u6001",component:"ElRadioButton",defaultValue:"0",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]}},{label:"\u5907\u6CE8",field:"remark",component:"ElInput",componentProps:{type:"textarea"}},{label:" ",field:"menu",slot:"menu",component:"ElInput"}],z=I({name:"RoleDrawer",components:{ElTree:N,BasicDrawer:q,BasicForm:v},emits:["success","register"],setup(e,{emit:a}){const t=b(!0),u=b([]),[r,{resetFields:i,setFieldsValue:l,validate:n}]=R({labelWidth:90,schemas:O,showActionButtonGroup:!1}),[s,{setDrawerProps:o,closeDrawer:p}]=A(c=>m(this,null,function*(){i(),o({confirmLoading:!1}),d(u).length===0&&(u.value=yield C()),t.value=!!(c==null?void 0:c.isUpdate),d(t)&&l(h({},c.record))})),B=V(()=>d(t)?"\u7F16\u8F91\u89D2\u8272":"\u65B0\u589E\u89D2\u8272");function E(){return m(this,null,function*(){try{yield n(),o({confirmLoading:!0}),p(),a("success")}finally{o({confirmLoading:!1})}})}return{registerDrawer:s,registerForm:r,getTitle:B,handleSubmit:E,treeData:u}}});function G(e,a,t,u,r,i){const l=f("el-tree"),n=f("BasicForm"),s=f("BasicDrawer");return $(),L(s,M(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onOk:e.handleSubmit}),{default:F(()=>[w(n,{onRegister:e.registerForm},{menu:F(({model:o,field:p})=>[w(l,{"default-checked-keys":o[p],data:e.treeData,"node-key":"id",defaultExpandAll:"",props:{label:"menuName"},"show-checkbox":"",title:"\u83DC\u5355\u5206\u914D"},null,8,["default-checked-keys","data"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var U=x(z,[["render",G]]),ae=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:U});export{U as R,ae as a,ee as c,te as s};
