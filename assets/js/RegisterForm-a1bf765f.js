var b=(k,s,d)=>new Promise((f,p)=>{var u=n=>{try{m(d.next(n))}catch(c){p(c)}},o=n=>{try{m(d.throw(n))}catch(c){p(c)}},m=n=>n.done?f(n.value):Promise.resolve(n.value).then(u,o);m((d=d.apply(k,s)).next())});import{S as E}from"./index-7fc3c83a.js";import{C as h}from"./index-504d29a3.js";import{e as v}from"./index-034694ef.js";import{u as R,a as F,L as I,b as L}from"./useLogin-22db80bc.js";import{C as g,D as i,F as P,u as w,G as U,b as x}from"./ex-pkg-element-plus-fdfdae45.js";import{y as _,a as C,_ as B,l as N,u as e,z as T,G as D,H as r,R as a,P as y,Q as V,O as G}from"./ex-pkg-@vue-6f720869.js";import"./ex-pkg-vendor-a94c680b.js";import"./ex-pkg-mockjs-2c72399a.js";import"./propTypes-7bd4f998.js";const X=_({setup(k){const{t:s}=v(),{handleBackLogin:d,getLoginState:f}=R(),p=C(),u=C(!1),o=B({account:"",password:"",confirmPassword:"",mobile:"",sms:"",policy:!1}),{getFormRules:m}=F(o),{validForm:n}=L(p),c=N(()=>e(f)===I.REGISTER);function S(){return b(this,null,function*(){if(!!(yield n()))try{u.value=!0,x({title:s("sys.login.registerSuccessTitle"),message:s("sys.login.registerSuccessDesc"),type:"success"})}catch(l){x({title:s("sys.api.errorTip"),message:l.message||s("sys.api.networkExceptionMsg"),type:"error"})}finally{u.value=!1}})}return(j,l)=>e(c)?(T(),D(e(U),{key:0,model:e(o),rules:e(m),ref_key:"formRef",ref:p},{default:r(()=>[a(e(i),{prop:"account"},{default:r(()=>[a(e(g),{modelValue:e(o).account,"onUpdate:modelValue":l[0]||(l[0]=t=>e(o).account=t),placeholder:e(s)("sys.login.userName")},null,8,["modelValue","placeholder"])]),_:1}),a(e(i),{prop:"mobile"},{default:r(()=>[a(e(g),{modelValue:e(o).mobile,"onUpdate:modelValue":l[1]||(l[1]=t=>e(o).mobile=t),placeholder:e(s)("sys.login.mobile")},null,8,["modelValue","placeholder"])]),_:1}),a(e(i),{prop:"sms"},{default:r(()=>[a(e(h),{modelValue:e(o).sms,"onUpdate:modelValue":l[2]||(l[2]=t=>e(o).sms=t),placeholder:e(s)("sys.login.smsCode")},null,8,["modelValue","placeholder"])]),_:1}),a(e(i),{prop:"password"},{default:r(()=>[a(e(E),{modelValue:e(o).password,"onUpdate:modelValue":l[3]||(l[3]=t=>e(o).password=t),placeholder:e(s)("sys.login.password")},null,8,["modelValue","placeholder"])]),_:1}),a(e(i),{prop:"confirmPassword"},{default:r(()=>[a(e(g),{modelValue:e(o).confirmPassword,"onUpdate:modelValue":l[4]||(l[4]=t=>e(o).confirmPassword=t),placeholder:e(s)("sys.login.confirmPassword"),clearable:"","show-password":""},null,8,["modelValue","placeholder"])]),_:1}),a(e(i),{prop:"policy"},{default:r(()=>[a(e(P),{modelValue:e(o).policy,"onUpdate:modelValue":l[5]||(l[5]=t=>e(o).policy=t),checked:e(o).policy},{default:r(()=>[y(V(e(s)("sys.login.policy")),1)]),_:1},8,["modelValue","checked"])]),_:1}),a(e(w),{type:"primary",class:"login--submit",onClick:S,loading:u.value,disabled:e(o).policy===!1},{default:r(()=>[y(V(e(s)("sys.login.registerButton")),1)]),_:1},8,["loading","disabled"]),a(e(w),{onClick:e(d),class:"login--back"},{default:r(()=>[y(V(e(s)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])]),_:1},8,["model","rules"])):G("",!0)}});export{X as default};
