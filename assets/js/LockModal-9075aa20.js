var f=(e,l,o)=>new Promise((d,a)=>{var m=s=>{try{r(o.next(s))}catch(i){a(i)}},t=s=>{try{r(o.throw(s))}catch(i){a(i)}},r=s=>s.done?d(s.value):Promise.resolve(s.value).then(m,t);r((o=o.apply(e,l)).next())});import{_ as B,e as y,u as C,h as w}from"./index-c76c27a8.js";import{B as F,a as L}from"./index-b5118db3.js";import{u as S}from"./lock-b8e33340.js";import{h as $}from"./header-3277e2cf.js";import{B as M}from"./BasicForm-8c6c9953.js";import{u as I}from"./useForm-a69bdb0d.js";import{u as R}from"./ex-pkg-element-plus-387a9e67.js";import{y as N,l as j,Z as u,z,G as E,H as g,K as p,L as c,Q as k,R as _,P as T}from"./ex-pkg-@vue-6f720869.js";import"./ex-pkg-vendor-ad21d406.js";import"./ex-pkg-mockjs-d5ed3ada.js";import"./ex-pkg-@element-plus-8be47ecc.js";import"./ex-pkg-@vueuse-7c1f2694.js";import"./ex-pkg-@iconify-9ec765d0.js";import"./ex-pkg-@popperjs-d61e97fc.js";import"./useAttrs-fe96f36e.js";import"./useWindowSizeFn-e2bb9137.js";import"./index-c26878d4.js";import"./index-b5c2dac5.js";import"./tsxHelper-6b2f4741.js";import"./index-5b1d7164.js";import"./useTimeout-a639f925.js";import"./index-0a4c95ac.js";import"./index-17b9734e.js";import"./propTypes-7529eeb4.js";import"./download-00b02bb0.js";import"./base64Conver-6d09fa87.js";import"./index-7788d2aa.js";import"./ex-pkg-@zxcvbn-ts-4e0726c1.js";import"./index-c48e4c62.js";import"./useCopyToClipboard-ec23ff2f.js";const V=N({name:"LockModal",components:{ElButton:R,BasicModal:F,BasicForm:M},props:{visible:{type:Boolean,default:!1}},setup(){const{t:e}=y(),{prefixCls:l}=C("header-lock-modal"),o=w(),d=S(),a=j(()=>{var n;return(n=o.getUserInfo)==null?void 0:n.realName}),[m,{closeModal:t}]=L(),[r,{validateField:s,resetFields:i,getFieldsValue:b}]=I({showActionButtonGroup:!1,schemas:[{field:"password",label:"",component:"ElInput",componentProps:{type:"password",placeholder:e("layout.header.lockScreenPassword")},required:!0}]});function h(){return f(this,null,function*(){yield s();const x=b().password;t(),d.setLockInfo({isLock:!0,pwd:x}),yield i()})}const v=j(()=>{const{avatar:n}=o.getUserInfo;return n||$});return{prefixCls:l,getRealName:a,register:m,registerForm:r,avatar:v,t:e,handleLock:h}}}),P=["src"];function U(e,l,o,d,a,m){const t=u("BasicForm"),r=u("ElButton"),s=u("BasicModal");return z(),E(s,{title:e.t("layout.header.lockScreen"),onRegister:e.register,width:600,showFooter:!1,"custom-class":e.prefixCls},{default:g(()=>[p("div",{class:c(`${e.prefixCls}__entry`)},[p("div",{class:c(`${e.prefixCls}__header`)},[p("img",{src:e.avatar,class:c(`${e.prefixCls}__header-img`)},null,10,P),p("p",{class:c(`${e.prefixCls}__header-name`)},k(e.getRealName),3)],2),_(t,{onRegister:e.registerForm},null,8,["onRegister"]),p("div",{class:c(`${e.prefixCls}__footer`)},[_(r,{type:"primary",class:"mt-2",onClick:e.handleLock},{default:g(()=>[T(k(e.t("layout.header.lockScreenBtn")),1)]),_:1},8,["onClick"])],2)],2)]),_:1},8,["title","onRegister","custom-class"])}var _e=B(V,[["render",U]]);export{_e as default};
