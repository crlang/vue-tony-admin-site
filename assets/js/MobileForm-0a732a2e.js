var y=(g,s,t)=>new Promise((u,l)=>{var p=a=>{try{o(t.next(a))}catch(n){l(n)}},d=a=>{try{o(t.throw(a))}catch(n){l(n)}},o=a=>a.done?u(a.value):Promise.resolve(a.value).then(p,d);o((t=t.apply(g,s)).next())});import{y as V,a as x,_ as v,l as _,u as e,z as j,G as E,H as m,R as i,a9 as C,P as L,Q as S,O as h}from"./ex-pkg-@vue-6f720869.js";import{C as w}from"./index-4a8d1af3.js";import{e as F}from"./index-94a7e7e0.js";import{u as B,a as I,L as R,b as N}from"./useLogin-59985804.js";import{G as D,H as f,x as K,J as T,d as k}from"./ex-pkg-element-plus-6a2cfc13.js";import"./ex-pkg-vendor-69b4619e.js";import"./ex-pkg-mockjs-abb76a9d.js";const Q=V({setup(g){const{t:s}=F(),{getLoginState:t}=B(),u=x(),l=x(!1),{getFormRules:p}=I(),{validForm:d}=N(u),o=v({mobile:"",sms:""}),a=_(()=>e(t)===R.MOBILE);function n(){return y(this,null,function*(){if(!!(yield d()))try{l.value=!0,k({title:s("sys.login.loginSuccessTitle"),message:s("sys.login.loginSuccessDesc"),type:"success"})}catch(r){k({title:s("sys.api.errorTip"),message:r.message||s("sys.api.networkExceptionMsg"),type:"error"})}finally{l.value=!1}})}return(b,r)=>e(a)?(j(),E(e(T),{key:0,model:e(o),rules:e(p),ref_key:"formRef",ref:u},{default:m(()=>[i(e(f),{prop:"mobile"},{default:m(()=>[i(e(D),{modelValue:e(o).mobile,"onUpdate:modelValue":r[0]||(r[0]=c=>e(o).mobile=c),placeholder:e(s)("sys.login.mobile")},null,8,["modelValue","placeholder"])]),_:1}),i(e(f),{prop:"sms"},{default:m(()=>[i(e(w),{modelValue:e(o).sms,"onUpdate:modelValue":r[1]||(r[1]=c=>e(o).sms=c),placeholder:e(s)("sys.login.smsCode"),onKeypress:C(n,["enter"])},null,8,["modelValue","placeholder","onKeypress"])]),_:1}),i(e(f),null,{default:m(()=>[i(e(K),{type:"primary",onClick:n,loading:l.value,class:"login--submit"},{default:m(()=>[L(S(e(s)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])):h("",!0)}});export{Q as default};
