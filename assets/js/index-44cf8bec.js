var m=(t,e,n)=>new Promise((u,s)=>{var l=o=>{try{r(n.next(o))}catch(c){s(c)}},a=o=>{try{r(n.throw(o))}catch(c){s(c)}},r=o=>o.done?u(o.value):Promise.resolve(o.value).then(l,a);r((n=n.apply(t,e)).next())});import{_ as v,i as _,u as E,w as C}from"./index-26bedde3.js";import{m as F,_ as D,r as h,w as g,l as B,U as k,a as d,u as p,y as S,Z as f,z as b,G as $,H as w,P as A,Q as V,D as y,R as j}from"./ex-pkg-@vue-feb543c0.js";import{m as N,cF as T}from"./ex-pkg-vendor-bb3f8859.js";import{u as x,A as U}from"./ex-pkg-element-plus-f609432a.js";function O(t,e="modelValue",n="change",u){const s=F(),l=s==null?void 0:s.emit,a=D({value:t[e]}),r=h(a),o=i=>{a.value=i};return g(()=>{a.value=t[e]}),[B({get(){return a.value},set(i){N(i,r.value)||(a.value=i,k(()=>{l==null||l(n,i,u)}))}}),o,r]}function P(t){const e=d(t),n=d(!1);let u;function s(){u&&window.clearInterval(u)}function l(){n.value=!1,s(),u=null}function a(){p(n)||!!u||(n.value=!0,u=setInterval(()=>{p(e)===1?(l(),e.value=t):e.value-=1},1e3))}function r(){e.value=t,l()}function o(){r(),a()}return T(()=>{r()}),{start:a,reset:r,restart:o,clear:s,stop:l,currentCount:e,isStart:n}}const R={value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},q=S({name:"CountButton",components:{ElButton:x},props:R,setup(t){const e=d(!1),{currentCount:n,isStart:u,start:s,reset:l}=P(t.count),a=B(()=>p(u)?`${p(n)}\u79D2\u540E\u91CD\u65B0\u83B7\u53D6`:"\u83B7\u53D6\u9A8C\u8BC1\u7801");g(()=>{t.value===void 0&&l()});function r(){return m(this,null,function*(){const{beforeStartFunc:o}=t;if(o&&_(o)){e.value=!0;try{(yield o())&&s()}finally{e.value=!1}}else s()})}return{handleStart:r,currentCount:n,loading:e,getButtonText:a,isStart:u}}});function z(t,e,n,u,s,l){const a=f("ElButton");return b(),$(a,y(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:w(()=>[A(V(t.getButtonText),1)]),_:1},16,["disabled","onClick","loading"])}var I=v(q,[["render",z]]);const G={count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},H=S({name:"CountDownInput",components:{ElInput:U,CountButton:I},inheritAttrs:!1,props:G,setup(t){const{prefixCls:e}=E("countdown-input"),[n]=O(t);return{prefixCls:e,state:n}}});function Q(t,e,n,u,s,l){const a=f("CountButton"),r=f("ElInput");return b(),$(r,y(t.$attrs,{class:t.prefixCls,modelValue:t.state,"onUpdate:modelValue":e[0]||(e[0]=o=>t.state=o)}),{append:w(()=>[j(a,{count:t.count,value:t.state,beforeStartFunc:t.sendCodeApi},null,8,["count","value","beforeStartFunc"])]),_:1},16,["class","modelValue"])}var Z=v(H,[["render",Q]]);const X=C(Z);C(I);export{X as C,O as u};
