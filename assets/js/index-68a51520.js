var ie=Object.defineProperty,ue=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var U=(e,s,o)=>s in e?ie(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,m=(e,s)=>{for(var o in s||(s={}))pe.call(s,o)&&U(e,o,s[o]);if(M)for(var o of M(s))fe.call(s,o)&&U(e,o,s[o]);return e},L=(e,s)=>ue(e,ce(s));var Y=(e,s,o)=>new Promise((c,i)=>{var f=a=>{try{n(o.next(a))}catch(d){i(d)}},t=a=>{try{n(o.throw(a))}catch(d){i(d)}},n=a=>a.done?c(a.value):Promise.resolve(a.value).then(f,t);n((o=o.apply(e,s)).next())});import{at as de,_ as O,u as me,ae as G,i as K,a5 as ge,a7 as Q,w as we}from"./index-26bedde3.js";import{u as he,N as ye,v as Ce}from"./ex-pkg-element-plus-f609432a.js";import{y as R,Z as D,z as g,A as v,B as w,F as Z,G as S,H as h,P as j,Q as T,O as b,L as k,Y as J,K as W,R as V,a as y,l as C,u as l,ak as P,b as A,U as X,m as F,af as x,D as H,a3 as De,ag as $e,ah as ve,_ as ee,w as ke}from"./ex-pkg-@vue-feb543c0.js";import{a as Be}from"./index-8a4d5146.js";import{cY as be,cm as Pe,cF as te,m as Se}from"./ex-pkg-vendor-bb3f8859.js";import{S as Te}from"./index-93f62e3c.js";import{u as Ve}from"./useAttrs-972c2e18.js";const N={showConfirmBtn:{type:Boolean,default:!0},confirmText:{type:String,default:"\u786E\u8BA4"},confirmType:{type:String,default:"primary"},confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelText:{type:String,default:"\u53D6\u6D88"},cancelType:{type:String,default:"default"},showFooter:{type:Boolean},footerHeight:{type:Number,default:60}},oe={isDetail:{type:Boolean},showDetailBack:{type:Boolean,default:!0},loading:{type:Boolean},loadingText:{type:String},closeFunc:{type:[Function,Object],default:null}},Fe=m(m(L(m({},de),{appendToBody:{type:Boolean,default:!0},title:{type:String},modelValue:{type:Boolean}}),oe),N),Ee=R({name:"BasicDrawerFooter",components:{ElButton:he},inheritAttrs:!1,props:L(m({},N),{prefixCls:{type:String},height:{type:String,default:"60px"}}),emits:["ok","close"],setup(e,{emit:s}){function o(){s("ok")}function c(){s("close")}return{handleOk:o,handleClose:c}}});function Le(e,s,o,c,i,f){const t=D("ElButton");return e.showFooter?(g(),v("div",{key:0,class:k(`${e.prefixCls}-footer`),style:J({height:e.height})},[e.$slots.footer?w(e.$slots,"footer",{key:0}):(g(),v(Z,{key:1},[w(e.$slots,"insertFooter"),e.showCancelBtn?(g(),S(t,{key:0,onClick:e.handleClose},{default:h(()=>[j(T(e.cancelText),1)]),_:1},8,["onClick"])):b("",!0),w(e.$slots,"centerFooter"),e.showConfirmBtn?(g(),S(t,{key:1,type:e.confirmType,onClick:e.handleOk,loading:e.confirmLoading},{default:h(()=>[j(T(e.confirmText),1)]),_:1},8,["type","onClick","loading"])):b("",!0),w(e.$slots,"appendFooter")],64))],6)):b("",!0)}var Oe=O(Ee,[["render",Le]]);const Re=R({name:"BasicDrawerHeader",components:{BasicTitle:Be,ArrowLeft:be},inheritAttrs:!1,props:{prefixCls:{type:String},isDetail:{type:Boolean},showDetailBack:{type:Boolean},title:{type:String}},emits:["close"],setup(e,{emit:s}){function o(){s("close")}return{handleClose:o}}}),je={key:1};function Ae(e,s,o,c,i,f){const t=D("ArrowLeft"),n=D("BasicTitle");return e.isDetail?(g(),v("div",{key:0,class:k(`${e.prefixCls}-header`)},[W("span",{class:k(`${e.prefixCls}-header__title`)},[e.showDetailBack?(g(),v("span",{key:0,class:k(`${e.prefixCls}-header__back`),onClick:s[0]||(s[0]=(...a)=>e.handleClose&&e.handleClose(...a))},[V(t)],2)):b("",!0),e.title?(g(),v("span",je,T(e.title),1)):b("",!0)],2),W("span",{class:k(`${e.prefixCls}-header__toolbar`)},[w(e.$slots,"titleToolbar")],2)],2)):(g(),S(n,{key:1,class:k(e.prefixCls)},{default:h(()=>[e.$slots.title?w(e.$slots,"title",{key:0}):(g(),v(Z,{key:1},[j(T(e.title||""),1)],64))]),_:3},8,["class"]))}var He=O(Re,[["render",Ae]]);const Ne=R({components:{ElDrawer:ye,ScrollContainer:Te,DrawerFooter:Oe,DrawerHeader:He},inheritAttrs:!1,props:Fe,emits:["visible-change","ok","close","register"],setup(e,{emit:s}){const o=y(!1),c=Ve(),i=y(null),f=y(),{prefixCls:t}=me("basic-drawer"),n={setDrawerProps:ae,emitVisible:void 0},a=F();a&&s("register",n,a.uid);const d=C(()=>G(P(e),l(i))),p=C(()=>{const r=m(m({},l(c)),l(d)),{isDetail:u,width:$,customClass:z}=r;if(u){$||(r.width="100%");const q=`${t}__detail`;r.customClass=z?`${z} ${q}`:q}return r}),E=C(()=>{const r=m({},l(p));return r.customClass=`${t} ${r==null?void 0:r.customClass} basic-drawer-${a==null?void 0:a.uid}`,Pe(r,Object.getOwnPropertyNames(m(m({},N),oe)))}),I=C(()=>{const{footerHeight:r,showFooter:u}=l(p);return u&&r?`${parseInt(r)}px`:"0px"}),se=C(()=>{const r=l(I);return{position:"relative",height:`calc(100% - ${r})`}}),re=C(()=>{var r;return!!((r=l(p))==null?void 0:r.loading)});A(()=>e.modelValue,(r,u)=>{r!==u&&(o.value=r)},{deep:!0}),A(()=>{var r;return(r=i.value)==null?void 0:r.loading},r=>{var u,$;r?f.value=Ce.service({target:`.basic-drawer-${a==null?void 0:a.uid}`,text:((u=i.value)==null?void 0:u.loadingText)||e.loadingText||"Loading"}):($=f.value)==null||$.close()},{deep:!0}),A(()=>o.value,r=>{X(()=>{var u;s("visible-change",r),a&&((u=n.emitVisible)==null||u.call(n,r,a.uid))})});function ne(r){return Y(this,null,function*(){const{closeFunc:u}=l(p);if(s("close",r),u&&K(u)){const $=yield u();o.value=!$;return}o.value=!1})}function ae(r){i.value=G(l(i)||{},r),Reflect.has(r,"modelValue")&&(o.value=!!r.modelValue)}function le(){s("ok")}return{onClose:ne,prefixCls:t,visibleRef:o,getMergeProps:d,getScrollContentStyle:se,getProps:p,getLoading:re,getBindValues:E,getFooterHeight:I,handleOk:le}}});function _e(e,s,o,c,i,f){const t=D("DrawerHeader"),n=D("ScrollContainer"),a=D("DrawerFooter"),d=D("ElDrawer");return g(),S(d,H({onClose:e.onClose},e.getBindValues,{modelValue:e.visibleRef,"onUpdate:modelValue":s[0]||(s[0]=p=>e.visibleRef=p)}),{title:h(()=>[V(t,H(e.getProps,{prefixCls:e.prefixCls,onClose:e.onClose}),x({_:2},[e.$slots.title?{name:"title",fn:h(()=>[w(e.$slots,"title")])}:void 0,e.$slots.titleToolbar?{name:"titleToolbar",fn:h(()=>[w(e.$slots,"titleToolbar")])}:void 0]),1040,["prefixCls","onClose"])]),default:h(()=>[V(n,{style:J(e.getScrollContentStyle)},{default:h(()=>[w(e.$slots,"default")]),_:3},8,["style"]),V(a,H(e.getProps,{prefixCls:e.prefixCls,height:e.getFooterHeight,onClose:e.onClose,onOk:e.handleOk}),x({_:2},[De(Object.keys(e.$slots),p=>({name:p,fn:h(E=>[w(e.$slots,p,$e(ve(E||{})))])}))]),1040,["prefixCls","height","onClose","onOk"])]),_:3},16,["onClose","modelValue"])}var Ie=O(Ne,[["render",_e]]);const B=ee({}),_=ee({});function Ze(){if(!F())throw new Error("useDrawer() can only be used inside setup() or functional components!");const e=y(null),s=y(!1),o=y("");function c(t,n){te(()=>{e.value=null,s.value=null,B[l(o)]=null}),!(l(s)&&ge()&&t===l(e))&&(o.value=n,e.value=t,s.value=!0,t.emitVisible=(a,d)=>{_[d]=a})}const i=()=>{const t=l(e);return t||Q("useDrawer instance is undefined!"),t},f={setDrawerProps:t=>{var n;(n=i())==null||n.setDrawerProps(t)},getVisible:C(()=>_[~~l(o)]),openDrawer:(t=!0,n,a=!0)=>{var p;if((p=i())==null||p.setDrawerProps({modelValue:t}),!n)return;if(a){B[l(o)]=null,B[l(o)]=P(n);return}Se(P(B[l(o)]),P(n))||(B[l(o)]=P(n))},closeDrawer:()=>{var t;(t=i())==null||t.setDrawerProps({modelValue:!1})}};return[c,f]}const Je=e=>{const s=y(null),o=F(),c=y("");if(!F())throw new Error("useDrawerInner() can only be used inside setup() or functional components!");const i=()=>{const t=l(s);if(!t){Q("useDrawerInner instance is undefined!");return}return t},f=(t,n)=>{te(()=>{s.value=null}),c.value=n,s.value=t,o==null||o.emit("register",t,n)};return ke(()=>{const t=B[l(c)];!t||!e||!K(e)||X(()=>{e(t)})}),[f,{changeLoading:(t=!0)=>{var n;(n=i())==null||n.setDrawerProps({loading:t})},changeOkLoading:(t=!0)=>{var n;(n=i())==null||n.setDrawerProps({confirmLoading:t})},getVisible:C(()=>_[~~l(c)]),closeDrawer:()=>{var t;(t=i())==null||t.setDrawerProps({modelValue:!1})},setDrawerProps:t=>{var n;(n=i())==null||n.setDrawerProps(t)}}]},We=we(Ie);export{We as B,Je as a,Ze as u};
