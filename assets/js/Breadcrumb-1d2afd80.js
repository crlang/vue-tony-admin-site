var $=Object.defineProperty,z=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var R=(e,t,s)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,I=(e,t)=>{for(var s in t||(t={}))L.call(t,s)&&R(e,s,t[s]);if(P)for(var s of P(t))T.call(t,s)&&R(e,s,t[s]);return e},y=(e,t)=>z(e,D(t));var w=(e,t,s)=>new Promise((b,f)=>{var k=i=>{try{p(s.next(i))}catch(d){f(d)}},h=i=>{try{p(s.throw(i))}catch(d){f(d)}},p=i=>i.done?b(i.value):Promise.resolve(i.value).then(k,h);p((s=s.apply(e,t)).next())});import{bX as F}from"./ex-pkg-vendor-ad21d406.js";import{_ as G,I as N,u as H,q as O,k as V,e as q,R as Q,x as W,G as X,j as Z}from"./index-c76c27a8.js";import{g as J}from"./index-6f12a559.js";import{at as K,au as U}from"./ex-pkg-element-plus-387a9e67.js";import{y as Y,a as ee,w as te,Z as j,z as g,G as v,H as C,A,a3 as ne,O as re,Q as M,P as se,F as ae,L as oe}from"./ex-pkg-@vue-6f720869.js";import"./ex-pkg-mockjs-d5ed3ada.js";import"./ex-pkg-@element-plus-8be47ecc.js";import"./ex-pkg-@vueuse-7c1f2694.js";import"./ex-pkg-@iconify-9ec765d0.js";import"./ex-pkg-@popperjs-d61e97fc.js";import"./index-a4e3f2c2.js";import"./useWindowSizeFn-e2bb9137.js";import"./propTypes-7529eeb4.js";import"./useTimeout-a639f925.js";import"./index-b5c2dac5.js";import"./tsxHelper-6b2f4741.js";import"./index-c26878d4.js";import"./index-5b1d7164.js";import"./lock-b8e33340.js";const ce=Y({name:"LayoutBreadcrumb",components:{ElBreadcrumb:K,ElBreadcrumbItem:U,Icon:N},props:{},setup(){const e=ee([]),{currentRoute:t}=F(),{prefixCls:s}=H("layout-header-breadcrumb"),{getShowBreadCrumbIcon:b}=O(),f=V(),{t:k}=q();te(()=>w(this,null,function*(){var B,x,E;if(t.value.name===Q)return;const a=yield J(),r=t.value.matched,n=r==null?void 0:r[r.length-1];let o=t.value.path;n&&((B=n==null?void 0:n.meta)==null?void 0:B.currentActiveMenu)&&(o=n.meta.currentActiveMenu);const c=W(a,o),m=a.filter(S=>S.path===c[0]),l=h(m,c);if(!l||l.length===0)return;const _=p(l);((x=t.value.meta)==null?void 0:x.currentActiveMenu)&&_.push(y(I({},t.value),{name:((E=t.value.meta)==null?void 0:E.title)||t.value.name})),e.value=_}));function h(a,r){const n=[];return a.forEach(o=>{var c,m;r.includes(o.path)&&n.push(y(I({},o),{name:((c=o.meta)==null?void 0:c.title)||o.name})),((m=o.children)==null?void 0:m.length)&&n.push(...h(o.children,r))}),n}function p(a){return X(a,r=>{const{meta:n,name:o}=r;if(!n)return!!o;const{title:c,hideBreadcrumb:m}=n;return!(!c||m)}).filter(r=>{var n;return!((n=r.meta)==null?void 0:n.hideBreadcrumb)})}function i(a,r,n){n==null||n.preventDefault();const{children:o,redirect:c,meta:m}=a;if((o==null?void 0:o.length)&&!c){n==null||n.stopPropagation();return}if(!(m==null?void 0:m.carryParam))if(c&&Z(c))f(c);else{let l="";r.length===1?l=r[0]:l=`${r.slice(1).pop()||""}`,l=/^\//.test(l)?l:`/${l}`,f(l)}}function d(a,r){return a.indexOf(r)!==a.length-1}function u(a){var r;return(r=a.meta)==null?void 0:r.icon}return{routes:e,t:k,prefixCls:s,getIcon:u,getShowBreadCrumbIcon:b,handleClick:i,hasRedirect:d}}}),ie={key:1};function ue(e,t,s,b,f,k){const h=j("Icon"),p=j("router-link"),i=j("ElBreadcrumbItem"),d=j("ElBreadcrumb");return g(),v(d,{separator:"/",class:oe(e.prefixCls),routes:e.routes},{default:C(()=>[(g(!0),A(ae,null,ne(e.routes,u=>(g(),v(i,{key:u.name},{default:C(()=>[e.getShowBreadCrumbIcon&&e.getIcon(u)?(g(),v(h,{key:0,icon:e.getIcon(u),size:"14",class:"mr-1"},null,8,["icon"])):re("",!0),e.hasRedirect(e.routes,u)?(g(),v(p,{key:2,to:"",onClick:a=>e.handleClick(u,e.routes,a)},{default:C(()=>[se(M(e.t(u.name||u.meta.title)),1)]),_:2},1032,["onClick"])):(g(),A("span",ie,M(e.t(u.name||u.meta.title)),1))]),_:2},1024))),128))]),_:1},8,["class","routes"])}var we=G(ce,[["render",ue]]);export{we as default};
