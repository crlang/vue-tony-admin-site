var S=Object.defineProperty,$=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var P=(e,t,s)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,B=(e,t)=>{for(var s in t||(t={}))D.call(t,s)&&P(e,s,t[s]);if(x)for(var s of x(t))L.call(t,s)&&P(e,s,t[s]);return e},y=(e,t)=>$(e,z(t));var R=(e,t,s)=>new Promise((g,d)=>{var h=i=>{try{m(s.next(i))}catch(p){d(p)}},b=i=>{try{m(s.throw(i))}catch(p){d(p)}},m=i=>i.done?g(i.value):Promise.resolve(i.value).then(h,b);m((s=s.apply(e,t)).next())});import{ck as T}from"./ex-pkg-vendor-bb3f8859.js";import{_ as F,I as N,u as G,j as H,e as O,R as V,p as Q,y as W,a2 as Z}from"./index-26bedde3.js";import{g as q}from"./index-6bc13ea8.js";import{au as J,av as K}from"./ex-pkg-element-plus-f609432a.js";import{y as U,a as X,w as Y,Z as _,z as f,G as k,H as C,A as w,a3 as ee,O as te,Q as A,P as ne,F as re,L as ae}from"./ex-pkg-@vue-feb543c0.js";import"./ex-pkg-mockjs-ec7a233b.js";import"./index-e2dbd5ff.js";import"./useWindowSizeFn-3a4b39e4.js";import"./propTypes-605b60b6.js";import"./useTimeout-998fb248.js";import"./index-8ceb82bc.js";import"./tsxHelper-ab68d96a.js";import"./index-93f62e3c.js";import"./index-8a4d5146.js";import"./lock-e44984cc.js";const se=U({name:"LayoutBreadcrumb",components:{ElBreadcrumb:J,ElBreadcrumbItem:K,Icon:N},props:{},setup(){const e=X([]),{currentRoute:t}=T(),{prefixCls:s}=G("layout-header-breadcrumb"),{getShowBreadCrumbIcon:g}=H(),d=O();Y(()=>R(this,null,function*(){var j,I,E;if(t.value.name===V)return;const n=yield q(),r=t.value.matched,a=r==null?void 0:r[r.length-1];let o=t.value.path;a&&((j=a==null?void 0:a.meta)==null?void 0:j.currentActiveMenu)&&(o=a.meta.currentActiveMenu);const c=Q(n,o),l=n.filter(M=>M.path===c[0]),u=h(l,c);if(!u||u.length===0)return;const v=b(u);((I=t.value.meta)==null?void 0:I.currentActiveMenu)&&v.push(y(B({},t.value),{name:((E=t.value.meta)==null?void 0:E.title)||t.value.name})),e.value=v}));function h(n,r){const a=[];return n.forEach(o=>{var c,l;r.includes(o.path)&&a.push(y(B({},o),{name:((c=o.meta)==null?void 0:c.title)||o.name})),((l=o.children)==null?void 0:l.length)&&a.push(...h(o.children,r))}),a}function b(n){return W(n,r=>{const{meta:a,name:o}=r;if(!a)return!!o;const{title:c,hideBreadcrumb:l}=a;return!(!c||l)}).filter(r=>{var a;return!((a=r.meta)==null?void 0:a.hideBreadcrumb)})}function m(n,r,a){a==null||a.preventDefault();const{children:o,redirect:c,meta:l}=n;if((o==null?void 0:o.length)&&!c){a==null||a.stopPropagation();return}if(!(l==null?void 0:l.carryParam))if(c&&Z(c))d(c);else{let u="";r.length===1?u=r[0]:u=`${r.slice(1).pop()||""}`,u=/^\//.test(u)?u:`/${u}`,d(u)}}function i(n,r){return n.indexOf(r)!==n.length-1}function p(n){var r;return(r=n.meta)==null?void 0:r.icon}return{routes:e,prefixCls:s,getIcon:p,getShowBreadCrumbIcon:g,handleClick:m,hasRedirect:i}}}),oe={key:1};function ce(e,t,s,g,d,h){const b=_("Icon"),m=_("router-link"),i=_("ElBreadcrumbItem"),p=_("ElBreadcrumb");return f(),k(p,{separator:"/",class:ae(e.prefixCls),routes:e.routes},{default:C(()=>[(f(!0),w(re,null,ee(e.routes,n=>(f(),k(i,{key:n.name},{default:C(()=>[e.getShowBreadCrumbIcon&&e.getIcon(n)?(f(),k(b,{key:0,icon:e.getIcon(n),size:"14",class:"mr-1"},null,8,["icon"])):te("",!0),e.hasRedirect(e.routes,n)?(f(),k(m,{key:2,to:"",onClick:r=>e.handleClick(n,e.routes,r)},{default:C(()=>[ne(A(n.name||n.meta.title),1)]),_:2},1032,["onClick"])):(f(),w("span",oe,A(n.name||n.meta.title),1))]),_:2},1024))),128))]),_:1},8,["class","routes"])}var Ce=F(se,[["render",ce]]);export{Ce as default};
