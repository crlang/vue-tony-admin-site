var $=Object.defineProperty,D=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var P=(e,t,r)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))L.call(t,r)&&P(e,r,t[r]);if(w)for(var r of w(t))T.call(t,r)&&P(e,r,t[r]);return e},C=(e,t)=>D(e,z(t));var R=(e,t,r)=>new Promise((g,f)=>{var k=i=>{try{p(r.next(i))}catch(d){f(d)}},h=i=>{try{p(r.throw(i))}catch(d){f(d)}},p=i=>i.done?g(i.value):Promise.resolve(i.value).then(k,h);p((r=r.apply(e,t)).next())});import{ck as F}from"./ex-pkg-vendor-69b4619e.js";import{_ as N,I as G,u as H,o as O,j as V,e as Q,R as W,t as Z,D as q,a7 as J}from"./index-8e69729b.js";import{g as K}from"./index-a23cd652.js";import{aw as U,ax as X}from"./ex-pkg-element-plus-6a2cfc13.js";import{y as Y,a as ee,w as te,Z as v,z as b,G as _,H as y,A,a3 as ne,O as ae,Q as M,P as re,F as se,L as oe}from"./ex-pkg-@vue-6f720869.js";import"./ex-pkg-mockjs-abb76a9d.js";import"./index-16d734bc.js";import"./useWindowSizeFn-414339e6.js";import"./propTypes-fbd6d81b.js";import"./useTimeout-e48d95f5.js";import"./index-583c82b1.js";import"./tsxHelper-fbe4f683.js";import"./index-9b3b57b7.js";import"./index-e74afd53.js";import"./lock-1beaaba7.js";const ce=Y({name:"LayoutBreadcrumb",components:{ElBreadcrumb:U,ElBreadcrumbItem:X,Icon:G},props:{},setup(){const e=ee([]),{currentRoute:t}=F(),{prefixCls:r}=H("layout-header-breadcrumb"),{getShowBreadCrumbIcon:g}=O(),f=V(),{t:k}=Q();te(()=>R(this,null,function*(){var B,E,x;if(t.value.name===W)return;const s=yield K(),a=t.value.matched,n=a==null?void 0:a[a.length-1];let o=t.value.path;n&&((B=n==null?void 0:n.meta)==null?void 0:B.currentActiveMenu)&&(o=n.meta.currentActiveMenu);const c=Z(s,o),m=s.filter(S=>S.path===c[0]),l=h(m,c);if(!l||l.length===0)return;const j=p(l);((E=t.value.meta)==null?void 0:E.currentActiveMenu)&&j.push(C(I({},t.value),{name:((x=t.value.meta)==null?void 0:x.title)||t.value.name})),e.value=j}));function h(s,a){const n=[];return s.forEach(o=>{var c,m;a.includes(o.path)&&n.push(C(I({},o),{name:((c=o.meta)==null?void 0:c.title)||o.name})),((m=o.children)==null?void 0:m.length)&&n.push(...h(o.children,a))}),n}function p(s){return q(s,a=>{const{meta:n,name:o}=a;if(!n)return!!o;const{title:c,hideBreadcrumb:m}=n;return!(!c||m)}).filter(a=>{var n;return!((n=a.meta)==null?void 0:n.hideBreadcrumb)})}function i(s,a,n){n==null||n.preventDefault();const{children:o,redirect:c,meta:m}=s;if((o==null?void 0:o.length)&&!c){n==null||n.stopPropagation();return}if(!(m==null?void 0:m.carryParam))if(c&&J(c))f(c);else{let l="";a.length===1?l=a[0]:l=`${a.slice(1).pop()||""}`,l=/^\//.test(l)?l:`/${l}`,f(l)}}function d(s,a){return s.indexOf(a)!==s.length-1}function u(s){var a;return(a=s.meta)==null?void 0:a.icon}return{routes:e,t:k,prefixCls:r,getIcon:u,getShowBreadCrumbIcon:g,handleClick:i,hasRedirect:d}}}),ie={key:1};function ue(e,t,r,g,f,k){const h=v("Icon"),p=v("router-link"),i=v("ElBreadcrumbItem"),d=v("ElBreadcrumb");return b(),_(d,{separator:"/",class:oe(e.prefixCls),routes:e.routes},{default:y(()=>[(b(!0),A(se,null,ne(e.routes,u=>(b(),_(i,{key:u.name},{default:y(()=>[e.getShowBreadCrumbIcon&&e.getIcon(u)?(b(),_(h,{key:0,icon:e.getIcon(u),size:"14",class:"mr-1"},null,8,["icon"])):ae("",!0),e.hasRedirect(e.routes,u)?(b(),_(p,{key:2,to:"",onClick:s=>e.handleClick(u,e.routes,s)},{default:y(()=>[re(M(e.t(u.name||u.meta.title)),1)]),_:2},1032,["onClick"])):(b(),A("span",ie,M(e.t(u.name||u.meta.title)),1))]),_:2},1024))),128))]),_:1},8,["class","routes"])}var Ee=N(ce,[["render",ue]]);export{Ee as default};
