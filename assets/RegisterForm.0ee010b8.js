var k=(w,l,d)=>new Promise((f,u)=>{var m=n=>{try{p(d.next(n))}catch(c){u(c)}},o=n=>{try{p(d.throw(n))}catch(c){u(c)}},p=n=>n.done?f(n.value):Promise.resolve(n.value).then(m,o);p((d=d.apply(w,l)).next())});import{S as h}from"./index.87273d76.js";import{C as v}from"./index.8d342d10.js";import{e as F}from"./index.dea57c76.js";import{u as I,a as R,L as j,b as L}from"./useLogin.1a23ccae.js";import{x as U,M as b,I as B,y as N,u as e,z as P,Y as T,a2 as r,$ as a,al as g,aW as i,aX as _,aa as y,F as V,aK as S,aY as D,a9 as M,n as x}from"./vendor.6c1ff918.js";import"./propTypes.13e00d90.js";const q=U({setup(w){const{t:l}=F(),{handleBackLogin:d,getLoginState:f}=I(),u=b(),m=b(!1),o=B({account:"",password:"",confirmPassword:"",mobile:"",sms:"",policy:!1}),{getFormRules:p}=R(o),{validForm:n}=L(u),c=N(()=>e(f)===j.REGISTER);function C(){return k(this,null,function*(){if(!!(yield n()))try{m.value=!0,x({title:l("sys.login.registerSuccessTitle"),message:l("sys.login.registerSuccessDesc"),type:"success"})}catch(s){x({title:l("sys.api.errorTip"),message:s.message||l("sys.api.networkExceptionMsg"),type:"error"})}finally{m.value=!1}})}return(E,s)=>e(c)?(P(),T(e(D),{key:0,model:e(o),rules:e(p),ref_key:"formRef",ref:u},{default:r(()=>[a(e(i),{prop:"account"},{default:r(()=>[a(e(g),{modelValue:e(o).account,"onUpdate:modelValue":s[0]||(s[0]=t=>e(o).account=t),placeholder:e(l)("sys.login.userName")},null,8,["modelValue","placeholder"])]),_:1}),a(e(i),{prop:"mobile"},{default:r(()=>[a(e(g),{modelValue:e(o).mobile,"onUpdate:modelValue":s[1]||(s[1]=t=>e(o).mobile=t),placeholder:e(l)("sys.login.mobile")},null,8,["modelValue","placeholder"])]),_:1}),a(e(i),{prop:"sms"},{default:r(()=>[a(e(v),{modelValue:e(o).sms,"onUpdate:modelValue":s[2]||(s[2]=t=>e(o).sms=t),placeholder:e(l)("sys.login.smsCode")},null,8,["modelValue","placeholder"])]),_:1}),a(e(i),{prop:"password"},{default:r(()=>[a(e(h),{modelValue:e(o).password,"onUpdate:modelValue":s[3]||(s[3]=t=>e(o).password=t),placeholder:e(l)("sys.login.password")},null,8,["modelValue","placeholder"])]),_:1}),a(e(i),{prop:"confirmPassword"},{default:r(()=>[a(e(g),{modelValue:e(o).confirmPassword,"onUpdate:modelValue":s[4]||(s[4]=t=>e(o).confirmPassword=t),placeholder:e(l)("sys.login.confirmPassword"),clearable:"","show-password":""},null,8,["modelValue","placeholder"])]),_:1}),a(e(i),{prop:"policy"},{default:r(()=>[a(e(_),{modelValue:e(o).policy,"onUpdate:modelValue":s[5]||(s[5]=t=>e(o).policy=t),checked:e(o).policy},{default:r(()=>[y(V(e(l)("sys.login.policy")),1)]),_:1},8,["modelValue","checked"])]),_:1}),a(e(S),{type:"primary",class:"login--submit",onClick:C,loading:m.value,disabled:e(o).policy===!1},{default:r(()=>[y(V(e(l)("sys.login.registerButton")),1)]),_:1},8,["loading","disabled"]),a(e(S),{onClick:e(d),class:"login--back"},{default:r(()=>[y(V(e(l)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])]),_:1},8,["model","rules"])):M("",!0)}});export{q as default};
