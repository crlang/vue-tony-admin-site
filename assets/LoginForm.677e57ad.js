var w=(_,i,r)=>new Promise((c,d)=>{var f=s=>{try{l(r.next(s))}catch(o){d(o)}},p=s=>{try{l(r.throw(s))}catch(o){d(o)}},l=s=>s.done?c(s.value):Promise.resolve(s.value).then(f,p);l((r=r.apply(_,i)).next())});import{d as h,p as x,r as F,q as L,c as R,b as e,s as b,v as k,o as A,j as I,i as t,h as a,E as C,x as N,y as V,m as g,z as U}from"./index.b263d89e.js";import{u as K,a as z,L as v,b as M}from"./useLogin.586fa9ad.js";import{E,a as O}from"./index.a766b686.js";import{a as y,E as T}from"./index.1cc837a8.js";import{E as $}from"./index.dfd5a36d.js";import"./form-item.337e4360.js";import"./isEqual.2e3b6ef4.js";import"./_baseIsEqual.0e612cfa.js";import"./row.e3bb9b75.js";const j=g("\u8BB0\u4F4F\u6211"),q=g("\u5FD8\u8BB0\u5BC6\u7801?"),G=g("\u767B\u5F55"),ae=h({__name:"LoginForm",setup(_){const{notification:i}=U(),r=x(),{setLoginState:c,getLoginState:d}=K(),{getFormRules:f}=z(),p=F(),l=F(!1),s=F(!1),o=L({account:"admin",password:"123456"}),{validForm:S}=M(p),D=R(()=>e(d)===v.LOGIN);function B(){return w(this,null,function*(){yield S();try{l.value=!0;const m=yield r.login({password:o.password,username:o.account,mode:"none"});m&&i.success({title:"\u767B\u5F55\u6210\u529F",message:`\u6B22\u8FCE\u56DE\u6765: ${m.realName}`,duration:3e3})}catch(m){i.error({title:"\u9519\u8BEF\u63D0\u793A",message:m.message||"\u7F51\u7EDC\u5F02\u5E38\uFF0C\u8BF7\u68C0\u67E5\u60A8\u7684\u7F51\u7EDC\u8FDE\u63A5\u662F\u5426\u6B63\u5E38"})}finally{l.value=!1}})}return(m,u)=>b((A(),I(e(O),{model:o,rules:e(f),ref_key:"formRef",ref:p},{default:t(()=>[a(e(E),{prop:"account"},{default:t(()=>[a(e(C),{modelValue:o.account,"onUpdate:modelValue":u[0]||(u[0]=n=>o.account=n),placeholder:"\u8D26\u53F7 admin/tony"},null,8,["modelValue"])]),_:1}),a(e(E),{prop:"password",class:"mb-1"},{default:t(()=>[a(e(C),{modelValue:o.password,"onUpdate:modelValue":u[1]||(u[1]=n=>o.password=n),placeholder:"\u5BC6\u7801 123456",onKeypress:N(B,["enter"])},null,8,["modelValue","onKeypress"])]),_:1}),a(e(T),{class:"mt-3"},{default:t(()=>[a(e(y),{span:12},{default:t(()=>[a(e($),{modelValue:s.value,"onUpdate:modelValue":u[2]||(u[2]=n=>s.value=n),size:"small"},{default:t(()=>[j]),_:1},8,["modelValue"])]),_:1}),a(e(y),{span:12,class:"text-right"},{default:t(()=>[a(e(V),{text:"",onClick:u[3]||(u[3]=n=>e(c)(e(v).RESET_PASSWORD))},{default:t(()=>[q]),_:1})]),_:1})]),_:1}),a(e(E),null,{default:t(()=>[a(e(V),{type:"primary",class:"login--submit",loading:l.value,onClick:B},{default:t(()=>[G]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])),[[k,e(D)]])}});export{ae as default};
