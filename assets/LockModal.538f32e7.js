var f=(e,d,o)=>new Promise((p,r)=>{var m=s=>{try{a(o.next(s))}catch(n){r(n)}},t=s=>{try{a(o.throw(s))}catch(n){r(n)}},a=s=>s.done?p(s.value):Promise.resolve(s.value).then(m,t);a((o=o.apply(e,d)).next())});import{_ as j,e as w,u as y,h as F}from"./index.c38c7de5.js";import{B as S,b as $}from"./index.724f1992.js";import{u as I}from"./lock.94ee0fce.js";import{h as L}from"./header.837ca3c8.js";import{B as M}from"./BasicForm.5b4e187b.js";import{u as x}from"./useForm.d6410a30.js";import{x as N,aI as R,y as _,Y as u,z as E,Z as V,a3 as h,D as i,G as c,F as B,a0 as g,ab as z}from"./vendor.041d4bc7.js";import"./useAttrs.374c949f.js";import"./useWindowSizeFn.b4a2eb84.js";import"./index.8a676b72.js";import"./index.a0c3ab5a.js";import"./uuid.2b29000c.js";import"./download.0159c5b0.js";import"./base64Conver.bb012c73.js";import"./index.eae7ea3e.js";const D=N({name:"LockModal",components:{ElButton:R,BasicModal:S,BasicForm:M},props:{visible:{type:Boolean,default:!1}},setup(){const{t:e}=w(),{prefixCls:d}=y("header-lock-modal"),o=F(),p=I(),r=_(()=>{var l;return(l=o.getUserInfo)==null?void 0:l.realName}),[m,{closeModal:t}]=$(),[a,{validateField:s,resetFields:n,getFieldsValue:k}]=x({showActionButtonGroup:!1,schemas:[{field:"password",label:"",component:"ElInput",componentProps:{type:"password",placeholder:e("layout.header.lockScreenPassword")},required:!0}]});function v(){return f(this,null,function*(){yield s();const C=k().password;t(),p.setLockInfo({isLock:!0,pwd:C}),yield n()})}const b=_(()=>{const{avatar:l}=o.getUserInfo;return l||L});return{prefixCls:d,getRealName:r,register:m,registerForm:a,avatar:b,t:e,handleLock:v}}}),U=["src"];function A(e,d,o,p,r,m){const t=u("BasicForm"),a=u("ElButton"),s=u("BasicModal");return E(),V(s,{title:e.t("layout.header.lockScreen"),onRegister:e.register,width:600,showCancelBtn:!1,showConfirmBtn:!1,footer:null,"custom-class":e.prefixCls},{default:h(()=>[i("div",{class:c(`${e.prefixCls}__entry`)},[i("div",{class:c(`${e.prefixCls}__header`)},[i("img",{src:e.avatar,class:c(`${e.prefixCls}__header-img`)},null,10,U),i("p",{class:c(`${e.prefixCls}__header-name`)},B(e.getRealName),3)],2),g(t,{onRegister:e.registerForm},null,8,["onRegister"]),i("div",{class:c(`${e.prefixCls}__footer`)},[g(a,{type:"primary",class:"mt-2",onClick:e.handleLock},{default:h(()=>[z(B(e.t("layout.header.lockScreenBtn")),1)]),_:1},8,["onClick"])],2)],2)]),_:1},8,["title","onRegister","custom-class"])}var ae=j(D,[["render",A]]);export{ae as default};
