var H=Object.defineProperty,M=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var j=(e,n,s)=>n in e?H(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,p=(e,n)=>{for(var s in n||(n={}))Y.call(n,s)&&j(e,s,n[s]);if(q)for(var s of q(n))Z.call(n,s)&&j(e,s,n[s]);return e},S=(e,n)=>M(e,X(n));var U=(e,n,s)=>new Promise((u,i)=>{var d=t=>{try{o(s.next(t))}catch(c){i(c)}},a=t=>{try{o(s.throw(t))}catch(c){i(c)}},o=t=>t.done?u(t.value):Promise.resolve(t.value).then(d,a);o((s=s.apply(e,n)).next())});import{w as _,b as x,_ as ee,U as T,V as oe,I as se}from"./index-795cdaa0.js";import{S as ne}from"./index-22989de9.js";import{B as te}from"./index-9c67be75.js";import{f as ae}from"./index-e82f403d.js";import{C as re,n as le,a5 as ie,o as ue,an as ce,a4 as J}from"./elementui-66980f2a.js";import{E as de,r as y,f as k,u as l,w as z,g as N,n as K,ac as b,ap as pe,p as m,I as O,J as D,t as fe,L as h,q as $,S as A,O as w,R as G,P as F,Q as R,F as v,K as me,G as I,W as Q,a8 as P,b as ge}from"./vue-d691a816.js";const W={modelValue:{type:Boolean},title:{type:String},isDetail:Boolean,loading:Boolean,loadingText:String,closeFn:{type:Function,default:null},showFooter:Boolean,showConfirmBtn:{type:Boolean,default:!0},confirmOptions:{type:Object,default:{btnText:"确认",type:"primary"}},showCancelBtn:{type:Boolean,default:!0},cancelOptions:{type:Object,default:{btnText:"取消",type:"default"}}},we=p(S(p({},ae),{appendToBody:{type:Boolean,default:!0},modelValue:{type:Boolean}}),W),ve=de({name:"BasicDrawer",components:{ElDrawer:re,ElButton:le,ScrollContainer:ne,BasicTitle:te,SvgIcon:_},directives:{loading:ie.directive},inheritAttrs:!1,props:we,emits:["update:modelValue","visible-change","confirm","cancel","register"],setup(e,{attrs:n,emit:s}){const u=y(!1),i=y(null),{prefixCls:d}=x("basic-drawer"),a=N(),o=k(()=>{const r=p(p({},e),l(i)),f=`${d} ${(r==null?void 0:r.customClass)||""} ${d}-${a==null?void 0:a.uid}`;return S(p({},r),{class:f,customClass:f})}),t=k(()=>{const r=p(p({},n),l(o)),f=Object.keys(W);return ue(r,f)}),c=k(()=>{var r;return!!((r=l(o))!=null&&r.loading)});function C(r){i.value=p(p({},l(i)),r),Reflect.has(r,"modelValue")&&(u.value=!!r.modelValue)}function E(){return U(this,null,function*(){const{closeFn:r}=l(o);if(typeof r=="function"){const f=yield r();u.value=!f;return}else u.value=!1;s("cancel")})}function g(){s("confirm")}const V={setDrawerProps:C,emitVisible:void 0};return a&&s("register",V),z(()=>e.modelValue,r=>{u.value=!!r},{deep:!0}),z(()=>u.value,r=>{K(()=>{var f;s("visible-change",r),s("update:modelValue",r),a&&((f=V.emitVisible)==null||f.call(V,r,a.uid))})}),{handleClose:E,prefixCls:d,visibleRef:u,getProps:o,getLoading:c,getBindValues:t,handleOk:g}}});function ye(e,n,s,u,i,d){const a=b("SvgIcon"),o=b("BasicTitle"),t=b("ScrollContainer"),c=b("ElButton"),C=b("ElDrawer"),E=pe("loading");return m(),O(C,I({onClose:n[1]||(n[1]=g=>e.handleClose())},e.getBindValues,{modelValue:e.visibleRef,"onUpdate:modelValue":n[2]||(n[2]=g=>e.visibleRef=g)}),{header:D(()=>[fe("div",{class:h(`${e.prefixCls}-header`)},[e.isDetail?(m(),$("span",{key:0,class:h(`${e.prefixCls}-header__back`),onClick:n[0]||(n[0]=g=>e.handleClose())},[A(a,{name:"left"})],2)):w("",!0),A(o,{class:h(`${e.prefixCls}-header__title`)},{default:D(()=>[e.title?(m(),$(G,{key:0},[F(R(e.title||""),1)],64)):v(e.$slots,"header",{key:1})]),_:3},8,["class"]),e.$slots.toolbar?(m(),$("span",{key:1,class:h(`${e.prefixCls}-header__toolbar`)},[v(e.$slots,"toolbar")],2)):w("",!0)],2)]),default:D(()=>{var g;return[me((m(),O(t,{class:h(`${e.prefixCls}-body`),"element-loading-text":e.loadingText},{default:D(()=>[v(e.$slots,"default")]),_:3},8,["class","element-loading-text"])),[[E,e.getLoading]]),e.showFooter?(m(),$("div",{key:0,class:h(`${e.prefixCls}-footer`)},[e.$slots.footer?v(e.$slots,"footer",{key:0}):(m(),$(G,{key:1},[e.$slots.prependFooter?v(e.$slots,"prependFooter",{key:0}):w("",!0),e.showCancelBtn?(m(),O(c,I({key:1,onClick:e.handleClose},e.cancelOptions),{default:D(()=>[F(R(e.cancelOptions.btnText||"Cancel"),1)]),_:1},16,["onClick"])):w("",!0),e.$slots.centerFooter?v(e.$slots,"centerFooter",{key:2}):w("",!0),e.showConfirmBtn?(m(),O(c,I({key:3,onClick:e.handleOk},e.confirmOptions,{loading:(g=e.getProps.confirmOptions)==null?void 0:g.loading}),{default:D(()=>[F(R(e.confirmOptions.btnText||"Ok"),1)]),_:1},16,["onClick","loading"])):w("",!0),e.$slots.appendFooter?v(e.$slots,"appendFooter",{key:4}):w("",!0)],64))],2)):w("",!0)]}),_:3},16,["modelValue"])}const Ce=ee(ve,[["render",ye]]),B=Q({}),L=Q({});function Oe(){N()||T("useDrawer() can only be used inside setup() or functional components!");const e=y(null),n=y(!1),s=y("");function u(a,o){J(()=>{e.value=null,n.value=null,B[l(s)]=null}),!(l(n)&&oe()&&a===l(e))&&(s.value=o,e.value=a,n.value=!0,a.emitVisible=(t,c)=>{L[c]=t})}const i=()=>{const a=l(e);return a||T("The drawer instance has not been obtained, please make sure the instance is rendered when performing the instance operation!"),a},d={setDrawerProps:a=>{var o;(o=i())==null||o.setDrawerProps(a)},getVisible:k(()=>L[~~l(s)]),openDrawer:(a=!0,o,t=!0)=>{var C;if((C=i())==null||C.setDrawerProps({modelValue:a}),!o)return;if(t){B[l(s)]=null,B[l(s)]=P(o);return}ce(P(B[l(s)]),P(o))||(B[l(s)]=P(o))},closeDrawer:()=>{var a;(a=i())==null||a.setDrawerProps({modelValue:!1})}};return[u,d]}const Pe=e=>{const n=y(null),s=N(),u=y("");s||T("useDrawerInner() can only be used inside setup() or functional components!");const i=()=>{const o=l(n);if(!o){T("useDrawerInner instance is undefined!");return}return o},d=(o,t)=>{J(()=>{n.value=null}),u.value=t,n.value=o,s==null||s.emit("register",o,t)},a={getVisible:k(()=>L[~~l(u)]),changeLoading:(o=!0)=>{var t;(t=i())==null||t.setDrawerProps({loading:o})},changeConfirmLoading:(o=!0)=>{var t;(t=i())==null||t.setDrawerProps({confirmOptions:{loading:o}})},closeDrawer:()=>{var o;(o=i())==null||o.setDrawerProps({modelValue:!1})},setDrawerProps:o=>{var t;(t=i())==null||t.setDrawerProps(o)}};return ge(()=>{const o=B[l(u)];o&&(!e||typeof e!="function"||K(()=>{e(o)}))}),[d,a]},Te=se(Ce);export{Te as B,Pe as a,Oe as u};
