var V=Object.defineProperty,q=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var N=(r,e,a)=>e in r?V(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,k=(r,e)=>{for(var a in e||(e={}))U.call(e,a)&&N(r,a,e[a]);if(D)for(var a of D(e))Y.call(e,a)&&N(r,a,e[a]);return r},I=(r,e)=>q(r,G(e));var x=(r,e,a)=>new Promise((f,s)=>{var h=l=>{try{u(a.next(l))}catch(_){s(_)}},y=l=>{try{u(a.throw(l))}catch(_){s(_)}},u=l=>l.done?f(l.value):Promise.resolve(l.value).then(h,y);u((a=a.apply(r,e)).next())});import{N as j,c4 as H,d as R,F as L,r as S,M as J,Y as Q,o as p,f as B,I as T,n as g,b,C as z,O as W,D as X,ah as Z,g as ee,j as v,i as $,K as re,$ as te,t as w,U as ae,L as ne,ac as oe,_ as se,bj as ce,bn as le,aR as ie,aA as ue,bF as me,bw as pe,bD as de,e as C,bm as be,k as fe,m as _e,am as he,l as ye}from"./index.b263d89e.js";import{I as ge}from"./index.26dc116b.js";import{g as ve}from"./index.7b185c54.js";import"./index.12ea0f65.js";import"./useWindowSizeFn.159736d7.js";import"./index.53cddd5b.js";import"./_baseIsEqual.0e612cfa.js";import"./_baseUniq.82ba82ab.js";import"./index.ac2e14a0.js";import"./index.7eeeac30.js";import"./index.ee4e75a5.js";import"./useTimeout.f7502887.js";import"./index.ae873226.js";import"./dropdown.109c4d5b.js";import"./index.b816e23f.js";import"./index.80d0f5e3.js";import"./index.151e0821.js";import"./drawer.95bcb9ff.js";import"./use-dialog.adf6f7df.js";import"./index.7bce58f8.js";import"./refs.63e616a9.js";import"./index.3d0d290c.js";import"./lock.c281e323.js";const F=Symbol("breadcrumbKey"),ke=j({separator:{type:String,default:"/"},separatorIcon:{type:H,default:""}}),Ie={name:"ElBreadcrumb"},Be=R(I(k({},Ie),{props:ke,setup(r){const e=r,a=L("breadcrumb"),f=S();return J(F,e),Q(()=>{const s=f.value.querySelectorAll(`.${a.e("item")}`);s.length&&s[s.length-1].setAttribute("aria-current","page")}),(s,h)=>(p(),B("div",{ref_key:"breadcrumb",ref:f,class:g(b(a).b()),"aria-label":"Breadcrumb",role:"navigation"},[T(s.$slots,"default")],2))}}));var Ce=z(Be,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const $e=j({to:{type:W([String,Object]),default:""},replace:{type:Boolean,default:!1}}),Ee={name:"ElBreadcrumbItem"},Pe=R(I(k({},Ee),{props:$e,setup(r){const e=r,a=ae(),f=X(F,void 0),s=L("breadcrumb"),{separator:h,separatorIcon:y}=Z(f),u=a.appContext.config.globalProperties.$router,l=S(),_=()=>{!e.to||!u||(e.replace?u.replace(e.to):u.push(e.to))};return(t,n)=>(p(),B("span",{class:g(b(s).e("item"))},[ee("span",{ref_key:"link",ref:l,class:g([b(s).e("inner"),b(s).is("link",!!t.to)]),role:"link",onClick:_},[T(t.$slots,"default")],2),b(y)?(p(),v(b(te),{key:0,class:g(b(s).e("separator"))},{default:$(()=>[(p(),v(re(b(y))))]),_:1},8,["class"])):(p(),B("span",{key:1,class:g(b(s).e("separator")),role:"presentation"},w(b(h)),3))],2))}}));var K=z(Pe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const we=ne(Ce,{BreadcrumbItem:K}),Re=oe(K);const Se=R({name:"LayoutBreadcrumb",components:{ElBreadcrumb:we,ElBreadcrumbItem:Re,Icon:ge},props:{},setup(){const r=S([]),{currentRoute:e}=ce(),{prefixCls:a}=ye("layout-header-breadcrumb"),{getShowBreadCrumbIcon:f}=le(),s=ie();ue(()=>x(this,null,function*(){var P,A,M;if(e.value.name===me)return;const t=yield ve(),n=e.value.matched,o=n==null?void 0:n[n.length-1];let c=e.value.path;o&&((P=o==null?void 0:o.meta)==null?void 0:P.currentActiveMenu)&&(c=o.meta.currentActiveMenu);const i=pe(t,c),d=t.filter(O=>O.path===i[0]),m=h(d,i);if(!m||m.length===0)return;const E=y(m);(A=e.value.meta)!=null&&A.currentActiveMenu&&E.push(I(k({},e.value),{name:((M=e.value.meta)==null?void 0:M.title)||e.value.name})),r.value=E}));function h(t,n){const o=[];return t.forEach(c=>{var i,d;n.includes(c.path)&&o.push(I(k({},c),{name:((i=c.meta)==null?void 0:i.title)||c.name})),(d=c.children)!=null&&d.length&&o.push(...h(c.children,n))}),o}function y(t){return de(t,n=>{const{meta:o,name:c}=n;if(!o)return!!c;const{title:i,hideBreadcrumb:d}=o;return!(!i||d)}).filter(n=>{var o;return!((o=n.meta)!=null&&o.hideBreadcrumb)})}function u(t,n,o){o==null||o.preventDefault();const{children:c,redirect:i,meta:d}=t;if((c==null?void 0:c.length)&&!i){o==null||o.stopPropagation();return}if(!(d!=null&&d.carryParam))if(i&&typeof i=="string")s(i);else{let m="";n.length===1?m=n[0]:m=`${n.slice(1).pop()||""}`,m=/^\//.test(m)?m:`/${m}`,s(m)}}function l(t,n){return t.indexOf(n)!==t.length-1}function _(t){var n;return(n=t.meta)==null?void 0:n.icon}return{routes:r,prefixCls:a,getIcon:_,getShowBreadCrumbIcon:f,handleClick:u,hasRedirect:l}}}),Ae={key:1};function Me(r,e,a,f,s,h){const y=C("Icon"),u=C("router-link"),l=C("ElBreadcrumbItem"),_=C("ElBreadcrumb");return p(),v(_,{separator:"/",class:g(r.prefixCls)},{default:$(()=>[(p(!0),B(he,null,be(r.routes,t=>(p(),v(l,{key:t.name},{default:$(()=>[r.getShowBreadCrumbIcon&&r.getIcon(t)?(p(),v(y,{key:0,name:r.getIcon(t),size:"14",class:"mr-1"},null,8,["name"])):fe("",!0),r.hasRedirect(r.routes,t)?(p(),v(u,{key:2,to:"",onClick:n=>r.handleClick(t,r.routes,n)},{default:$(()=>[_e(w(t.name||t.meta.title),1)]),_:2},1032,["onClick"])):(p(),B("span",Ae,w(t.name||t.meta.title),1))]),_:2},1024))),128))]),_:1},8,["class"])}var ar=se(Se,[["render",Me]]);export{ar as default};
