import{C as y}from"./index-bf00342a.js";import{u as w}from"./domUtils-3a96435f.js";import{r as W,a as _}from"./index-d5a424e4.js";import{s as x,r as v,u as c,A as b,g as $,E as B,ac as g,p as I,I as R,J as m,S as d,P as C}from"./vue-d691a816.js";import{n as E}from"./elementui-66980f2a.js";import{_ as S}from"./index-795cdaa0.js";import"./index-02c8116c.js";import"./tsxHelper-f44f22cd.js";import"./index-9c67be75.js";const M=Symbol("watermark-dom");function P(n=v(document.body)){const r=w(function(){const e=c(n);if(!e)return;const{clientHeight:t,clientWidth:o}=e;s({height:t,width:o})}),i=M.toString(),l=x(),f=()=>{const e=c(l);l.value=void 0;const t=c(n);t&&(e&&t.removeChild(e),W(t,r))};function k(e){const t=document.createElement("canvas"),o=300,u=240;Object.assign(t,{width:o,height:u});const a=t.getContext("2d");return a&&(a.rotate(-20*Math.PI/120),a.font="15px Vedana",a.fillStyle="rgba(0, 0, 0, 0.15)",a.textAlign="left",a.textBaseline="middle",a.fillText(e,o/20,u)),t.toDataURL("image/png")}function s(e={}){const t=c(l);t&&(e!=null&&e.width&&(t.style.width=`${e.width}px`),e!=null&&e.height&&(t.style.height=`${e.height}px`),e!=null&&e.str&&(t.style.background=`url(${k(e.str)}) left top repeat`))}const p=e=>{if(c(l))return s({str:e}),i;const t=document.createElement("div");l.value=t,t.id=i,t.style.pointerEvents="none",t.style.top="0px",t.style.left="0px",t.style.position="absolute",t.style.zIndex="100000";const o=c(n);if(!o)return i;const{clientHeight:u,clientWidth:a}=o;return s({str:e,width:a,height:u}),o.appendChild(t),i};function h(e){p(e),_(document.documentElement,r),$()&&b(()=>{f()})}return{setWatermark:h,clear:f}}const z=B({components:{ElButton:E,CollapseContainer:y},setup(){const{setWatermark:n,clear:r}=P();return{setWatermark:n,clear:r}}});function A(n,r,i,l,f,k){const s=g("el-button"),p=g("CollapseContainer"),h=g("PageWrapper");return I(),R(h,{title:"水印示例"},{default:m(()=>[d(p,{class:"w-full h-32 bg-white rounded-md",title:"Global WaterMark"},{default:m(()=>[d(s,{type:"primary",class:"mr-2",onClick:r[0]||(r[0]=e=>n.setWatermark("WaterMark Info"))},{default:m(()=>[C("Create")]),_:1}),d(s,{type:"danger",class:"mr-2",onClick:n.clear},{default:m(()=>[C("Clear")]),_:1},8,["onClick"]),d(s,{type:"warning",class:"mr-2",onClick:r[1]||(r[1]=e=>n.setWatermark("WaterMark Info New"))},{default:m(()=>[C("Reset")]),_:1})]),_:1})]),_:1})}const G=S(z,[["render",A]]);export{G as default};
