var L=Object.defineProperty,S=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var M=(e,t,s)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,C=(e,t)=>{for(var s in t||(t={}))O.call(t,s)&&M(e,s,t[s]);if(P)for(var s of P(t))T.call(t,s)&&M(e,s,t[s]);return e},k=(e,t)=>S(e,N(t));var $=(e,t,s)=>new Promise((_,f)=>{var h=l=>{try{m(s.next(l))}catch(p){f(p)}},g=l=>{try{m(s.throw(l))}catch(p){f(p)}},m=l=>l.done?_(l.value):Promise.resolve(l.value).then(h,g);m((s=s.apply(e,t)).next())});import{E as V,r as j,au as q,b as z,ac as b,p as d,I as B,J as E,q as w,R as F,a7 as G,O as J,Q as A,P as Q,L as Y}from"./vue-d691a816.js";import{I as Z}from"./index-a2d8523e.js";import{f as x,a as H,R as K,i as U,j as W,b as X,_ as ee}from"./index-795cdaa0.js";import{g as te}from"./index-84e8d8c1.js";import{aY as ne,aZ as ae}from"./elementui-66980f2a.js";import"./lock-a612cd3d.js";import"./useTimeout-ff985c90.js";import"./index-22989de9.js";import"./index-d5a424e4.js";import"./index-1d31dc0e.js";import"./useWindowSizeFn-f51aba85.js";const re=V({name:"LayoutBreadcrumb",components:{ElBreadcrumb:ne,ElBreadcrumbItem:ae,Icon:Z},props:{},setup(){const e=j([]),{currentRoute:t}=q(),{prefixCls:s}=X("layout-header-breadcrumb"),{getShowBreadCrumbIcon:_}=x(),f=H();z(()=>$(this,null,function*(){var I,y,R;if(t.value.name===K)return;const n=yield te(),a=t.value.matched,r=a==null?void 0:a[a.length-1];let o=t.value.path;r&&((I=r==null?void 0:r.meta)!=null&&I.currentActiveMenu)&&(o=r.meta.currentActiveMenu);const c=U(n,o),i=n.filter(D=>D.path===c[0]),u=h(i,c);if(!u||u.length===0)return;const v=g(u);(y=t.value.meta)!=null&&y.currentActiveMenu&&v.push(k(C({},t.value),{name:((R=t.value.meta)==null?void 0:R.title)||t.value.name})),e.value=v}));function h(n,a){const r=[];return n.forEach(o=>{var c,i;a.includes(o.path)&&r.push(k(C({},o),{name:((c=o.meta)==null?void 0:c.title)||o.name})),(i=o.children)!=null&&i.length&&r.push(...h(o.children,a))}),r}function g(n){return W(n,a=>{const{meta:r,name:o}=a;if(!r)return!!o;const{title:c,hideBreadcrumb:i}=r;return!(!c||i)}).filter(a=>{var r;return!((r=a.meta)!=null&&r.hideBreadcrumb)})}function m(n,a,r){r==null||r.preventDefault();const{children:o,redirect:c,meta:i}=n;if(o!=null&&o.length&&!c){r==null||r.stopPropagation();return}if(!(i!=null&&i.carryParam))if(c&&typeof c=="string")f(c);else{let u="";a.length===1?u=a[0]:u=`${a.slice(1).pop()||""}`,u=/^\//.test(u)?u:`/${u}`,f(u)}}function l(n,a){return n.indexOf(a)!==n.length-1}function p(n){var a;return(a=n.meta)==null?void 0:a.icon}return{routes:e,prefixCls:s,getIcon:p,getShowBreadCrumbIcon:_,handleClick:m,hasRedirect:l}}});const se={key:1};function oe(e,t,s,_,f,h){const g=b("Icon"),m=b("router-link"),l=b("ElBreadcrumbItem"),p=b("ElBreadcrumb");return d(),B(p,{separator:"/",class:Y(e.prefixCls)},{default:E(()=>[(d(!0),w(F,null,G(e.routes,n=>(d(),B(l,{key:n.name},{default:E(()=>[e.getShowBreadCrumbIcon&&e.getIcon(n)?(d(),B(g,{key:0,name:e.getIcon(n),class:"mr-1"},null,8,["name"])):J("",!0),e.hasRedirect(e.routes,n)?(d(),B(m,{key:2,to:"",onClick:a=>e.handleClick(n,e.routes,a)},{default:E(()=>[Q(A(n.name||n.meta.title),1)]),_:2},1032,["onClick"])):(d(),w("span",se,A(n.name||n.meta.title),1))]),_:2},1024))),128))]),_:1},8,["class"])}const Be=ee(re,[["render",oe]]);export{Be as default};
