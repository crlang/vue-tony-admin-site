import{b as I,_ as w,I as $}from"./index-795cdaa0.js";import{r as f,b as C,E as z,o as E,V as y,ac as S,p as u,I as g,J as T,q as h,F as k,G as x,_ as L}from"./vue-d691a816.js";import{aa as N}from"./elementui-66980f2a.js";function O({target:e,root:i,onIntersect:s,rootMargin:n="0px",threshold:a=.1}){let o=()=>{};const t=f(null),r=C(()=>{o(),t.value=new IntersectionObserver(s,{root:i?i.value:null,rootMargin:n,threshold:a});const l=e.value;l&&t.value.observe(l),o=()=>{t.value&&(t.value.disconnect(),e.value&&t.value.unobserve(e.value))}});return{observer:t,stop:()=>{o(),r()}}}const R=z({name:"LazyContainer",components:{ElSkeleton:N},inheritAttrs:!1,props:{timeout:{type:Number},viewport:{type:typeof window!="undefined"?window.HTMLElement:Object,default:()=>null},threshold:{type:String,default:"0px"},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},tag:{type:String,default:"div"},maxWaitingTime:{type:Number,default:120},transitionName:{type:String,default:"lazy-container"}},emits:["init"],setup(e,{emit:i}){const s=f(),n=f(!1),a=f(!1),{prefixCls:o}=I("lazy-container");function t(){const{timeout:c}=e;c&&setTimeout(()=>{r()},c)}function r(){a.value=!0,setTimeout(()=>{n.value||(n.value=!0,i("init"))},e.maxWaitingTime||120)}function l(){const{timeout:c,direction:_,threshold:d}=e;if(c)return;let p="0px";switch(_){case"vertical":p=`${d} 0px`;break;case"horizontal":p=`0px ${d}`;break}try{const{stop:m,observer:b}=O({rootMargin:p,target:y(s.value,"$el"),onIntersect:v=>{(v[0].isIntersecting||v[0].intersectionRatio)&&(r(),b&&m())},root:y(e,"viewport")})}catch(m){r()}}return E(()=>{t(),l()}),{prefixCls:o,elRef:s,isInit:n,loading:a}}});const B={key:"component"},M={key:"skeleton"};function G(e,i,s,n,a,o){const t=S("ElSkeleton");return u(),g(L,x({class:e.prefixCls},e.$attrs,{ref:"elRef",name:e.transitionName,tag:e.tag,mode:"out-in"}),{default:T(()=>[e.isInit?(u(),h("div",B,[k(e.$slots,"default",{loading:e.loading})])):(u(),h("div",M,[e.$slots.skeleton?k(e.$slots,"skeleton",{key:0}):(u(),g(t,{key:1}))]))]),_:3},16,["class","name","tag"])}const W=w(R,[["render",G]]),F=$(W);export{F as L};
