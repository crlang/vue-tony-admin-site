var y=(g,s,l)=>new Promise((m,t)=>{var d=a=>{try{o(l.next(a))}catch(i){t(i)}},c=a=>{try{o(l.throw(a))}catch(i){t(i)}},o=a=>a.done?m(a.value):Promise.resolve(a.value).then(d,c);o((l=l.apply(g,s)).next())});import{C as E}from"./index.8d342d10.js";import{e as _}from"./index.dea57c76.js";import{u as b,a as C,L as F,b as L}from"./useLogin.1a23ccae.js";import{x as S,M as V,I as k,y as I,u as e,z as h,Y as w,a2 as u,$ as r,al as B,aW as f,aK as j,aa as N,F as R,aY as D,a9 as M,n as v}from"./vendor.6c1ff918.js";const O=S({setup(g){const{t:s}=_(),{getLoginState:l}=b(),m=V(),t=V(!1),{getFormRules:d}=C(),{validForm:c}=L(m),o=k({mobile:"",sms:""}),a=I(()=>e(l)===F.MOBILE);function i(){return y(this,null,function*(){if(!!(yield c()))try{t.value=!0,v({title:s("sys.login.loginSuccessTitle"),message:s("sys.login.loginSuccessDesc"),type:"success"})}catch(n){v({title:s("sys.api.errorTip"),message:n.message||s("sys.api.networkExceptionMsg"),type:"error"})}finally{t.value=!1}})}return(x,n)=>e(a)?(h(),w(e(D),{key:0,model:e(o),rules:e(d),ref_key:"formRef",ref:m},{default:u(()=>[r(e(f),{prop:"mobile"},{default:u(()=>[r(e(B),{modelValue:e(o).mobile,"onUpdate:modelValue":n[0]||(n[0]=p=>e(o).mobile=p),placeholder:e(s)("sys.login.mobile")},null,8,["modelValue","placeholder"])]),_:1}),r(e(f),{prop:"sms"},{default:u(()=>[r(e(E),{modelValue:e(o).sms,"onUpdate:modelValue":n[1]||(n[1]=p=>e(o).sms=p),placeholder:e(s)("sys.login.smsCode")},null,8,["modelValue","placeholder"])]),_:1}),r(e(f),null,{default:u(()=>[r(e(j),{type:"primary",onClick:i,loading:t.value,class:"login--submit"},{default:u(()=>[N(R(e(s)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])):M("",!0)}});export{O as default};
