!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){i(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function i(e,n,i){return(n=function(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,n||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===t(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}System.register(["./index-legacy-db4b469e.js","./tsxHelper-legacy-72a536d4.js","./useTimeout-legacy-ae97b676.js"],(function(t){"use strict";var e,i,o,r,a,s,c,u,l,f,m,d,g,p;return{setters:[function(t){e=t.d,i=t.s,o=t.r,r=t.c,a=t.w,s=t.aC,c=t.b,u=t.h,l=t.m,f=t.bC,m=t.aD,d=t.aE},function(t){g=t.g},function(t){p=t.u}],execute:function(t,y){var h={modelValue:{type:Boolean,default:!1},isSlot:{type:Boolean,default:!1},text:{type:String,default:"请按住滑块拖动"},successText:{type:String,default:"验证通过"},height:{type:Number,default:40},width:{type:Number,default:220},circle:{type:Boolean,default:!1},wrapStyle:{type:Object,default:{}},contentStyle:{type:Object,default:{}},barStyle:{type:Object,default:{}},actionStyle:{type:Object,default:{}}},v=n(n({},h),{},{src:{type:String},imgSize:{type:Number,default:260},imgWrapStyle:{type:Object,default:{}},minDegree:{type:Number,default:90},maxDegree:{type:Number,default:270},diffDegree:{type:Number,default:20}}),b=e({name:"BasicDragVerify",props:h,emits:["success","update:modelValue","change","start","move","end"],setup:function(t,e){var m=e.emit,d=e.slots,p=e.expose,y=i({isMoving:!1,isPassing:!1,moveDistance:0,toLeft:!1,startTime:0,endTime:0}),h=o(null),v=o(null),b=o(null),w=o(null),x=l("basic-drag-verify").prefixCls;document.addEventListener("mouseup",(function(){y.isMoving&&_()}));var S=r((function(){var e=t.height,i=t.actionStyle,o="".concat(e,"px");return n({left:0,width:o,height:o},i)})),T=r((function(){var e=t.height,i=t.width,o=t.circle,r=t.wrapStyle,a=e;return n({width:"".concat(i,"px"),height:"".concat(a,"px"),lineHeight:"".concat(a,"px"),borderRadius:o?"".concat(a/2,"px"):0},r)})),P=r((function(){var e=t.height,i=t.circle,o=t.barStyle,r=e;return n({height:"".concat(r,"px"),borderRadius:i?"".concat(r/2,"px 0 0 ").concat(r/2,"px"):0},o)})),O=r((function(){var e=t.height,i=t.width,o=t.contentStyle;return n({height:"".concat(e,"px"),width:"".concat(i,"px")},o)}));function D(t){return t.pageX||t.touches[0].pageX}function j(t){if(!y.isPassing){var e=c(w);e&&(m("start",t),y.moveDistance=D(t)-parseInt(e.style.left.replace("px",""),10),y.startTime=(new Date).getTime(),y.isMoving=!0)}}function M(e){var n=parseInt(e.style.width),i=t.width;return{offset:i-n-6,widthNum:i,actionWidth:n}}function R(e){var n=y.isMoving,i=y.moveDistance;if(n){var o=c(w),r=c(v);if(!o||!r)return;var a=M(o),s=a.offset,u=a.widthNum,l=a.actionWidth,f=D(e)-i;m("move",{event:e,moveDistance:i,moveX:f}),f>0&&f<=s?(o.style.left="".concat(f,"px"),r.style.width="".concat(f+l/2,"px")):f>s&&(o.style.left="".concat(u-l,"px"),r.style.width="".concat(u-l/2,"px"),t.isSlot||V())}}function N(e){var n=y.isMoving,i=y.isPassing,o=y.moveDistance;if(n&&!i){m("end",e);var r=c(w),a=c(v);if(!r||!a)return;var s=D(e)-o,u=M(r),l=u.offset,f=u.widthNum,d=u.actionWidth;s<l?t.isSlot?setTimeout((function(){if(t.modelValue){var e=c(b);e&&(e.style.width="".concat(parseInt(a.style.width),"px"))}else _()}),0):_():(r.style.left="".concat(f-d,"px"),a.style.width="".concat(f-d/2,"px"),V()),y.isMoving=!1}}function V(){t.isSlot?_():(y.endTime=(new Date).getTime(),y.isPassing=!0,y.isMoving=!1)}function _(){y.isMoving=!1,y.isPassing=!1,y.moveDistance=0,y.toLeft=!1,y.startTime=0,y.endTime=0;var t=c(w),e=c(v),n=c(b);t&&e&&n&&(y.toLeft=!0,setTimeout((function(){y.toLeft=!1,t.style.left="0",e.style.width="0"}),300),n.style.width=c(O).width)}return a((function(){return y.isPassing}),(function(t){if(t){var e=y.startTime,n=y.endTime;m("success",{isPassing:t,time:((n-e)/1e3).toFixed(1)}),m("update:modelValue",t),m("change",t)}})),s((function(){y.isPassing=!!t.modelValue})),p({resume:_}),function(){var e;return u("div",{class:x,ref:h,style:c(T),onMousemove:R,onTouchmove:R,onMouseleave:N,onMouseup:N,onTouchend:N},[(e=["".concat(x,"-bar")],y.toLeft&&e.push("to-left"),u("div",{class:e,ref:v,style:c(P)},null)),function(){var e=["".concat(x,"-content")],n=y.isPassing,i=t.text,o=t.successText;return n&&e.push("success"),u("div",{class:e,ref:b,style:c(O)},[g(d,"text",n)||(n?o:i)])}(),function(){var t=["".concat(x,"-action")],e=y.toLeft,n=y.isPassing;return e&&t.push("to-left"),u("div",{class:t,onMousedown:j,onTouchstart:j,style:c(S),ref:w},[g(d,"actionIcon",n)||u(f,{class:"".concat(x,"-action__icon"),name:"".concat(n?"check":"doubleright")},null)])}()])}}}),w=e({name:"RotateDragVerify",inheritAttrs:!1,props:v,emits:["success","change","update:modelValue"],setup:function(t,e){var s=e.emit,f=e.attrs,d=e.expose,g=o(null),y=i({showTip:!1,isPassing:!1,imgStyle:{},randomRotate:0,currentRotate:0,toOrigin:!1,startTime:0,endTime:0,draged:!1}),h=l("basic-img-verify").prefixCls,v=r((function(){var e=t.imgWrapStyle,i=t.imgSize;return n({width:"".concat(i,"px"),height:"".concat(i,"px")},e)})),w=r((function(){return t.minDegree===t.maxDegree?Math.floor(1+1*Math.random())/10+1:1}));function x(){y.startTime=(new Date).getTime()}function S(e){y.draged=!0;var n=t.imgSize,i=t.height,o=t.maxDegree,r=e.moveX,a=Math.ceil(r/(n-i)*o*c(w));y.currentRotate=a,y.imgStyle={transform:"rotateZ(".concat(y.randomRotate-a,"deg)")}}function T(){var e=t.minDegree,n=t.maxDegree,i=Math.floor(e+Math.random()*(n-e));y.randomRotate=i,y.imgStyle={transform:"rotateZ(".concat(i,"deg)")}}function P(){var e=y.randomRotate,n=y.currentRotate,i=t.diffDegree;Math.abs(e-n)>=(i||20)?(y.imgStyle={transform:"rotateZ(".concat(e,"deg)")},y.toOrigin=!0,p((function(){y.toOrigin=!1,y.showTip=!0}),300)):(y.isPassing=!0,y.endTime=(new Date).getTime()),y.showTip=!0}function O(){y.showTip=!1;var t=c(g);t&&(y.isPassing=!1,t.resume(),T())}return d({resume:O}),a((function(){return y.isPassing}),(function(t){if(t){var e=y.startTime,n=y.endTime;s("success",{isPassing:t,time:((n-e)/1e3).toFixed(1)}),s("change",t),s("update:modelValue",t)}})),function(){var e=t.src,i=t.width,o=y.toOrigin,r=y.isPassing,a=y.startTime,s=y.endTime,l=[];o&&l.push("to-origin");var d=(s-a)/1e3;return u("div",{class:"".concat(h)},[u("div",{class:"".concat(h,"-img__wrap"),style:c(v)},[u("img",{src:e,onLoad:T,width:i,class:l,style:y.imgStyle,onClick:function(){O()},alt:"verify"},null),y.showTip&&u("span",{class:["".concat(h,"-img__tip"),y.isPassing?"success":"error"]},[y.isPassing?"验证校验成功,耗时".concat(d.toFixed(1),"秒！"):"验证失败！"]),!y.showTip&&!y.draged&&u("span",{class:["".concat(h,"-img__tip"),"normal"]},["点击图片可刷新"])]),u(b,m({class:"".concat(h,"-drag__bar"),onMove:S,onEnd:P,onStart:x,ref:g},n(n({},f),t),{modelValue:r,isSlot:!0}),null)])}}});t("B",d(b)),t("R",d(w))}}}))}();