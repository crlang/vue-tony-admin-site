var $=Object.defineProperty,k=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var _=(e,t,o)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,C=(e,t)=>{for(var o in t||(t={}))D.call(t,o)&&_(e,o,t[o]);if(x)for(var o of x(t))S.call(t,o)&&_(e,o,t[o]);return e},g=(e,t)=>k(e,O(t));import{I as N,aQ as P}from"./index.b7d256c2.js";import{x as V,M as E,y as W,V as A,W as H,af as M,u as v,$ as c,a7 as R,b5 as Y,aY as q,b4 as B,bl as F,b8 as Q,cf as T,ae as U}from"./vendor.1ced56aa.js";function X(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!F(e)}const y="context-menu",z={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default(){return{x:0,y:0}}},items:{type:Array,default(){return[]}}},w=e=>{const{item:t}=e;return c("div",{class:`${y}__text`,onClick:e.handler.bind(null,t)},[e.showIcon&&t.icon&&c(N,{class:"mr-2",icon:t.icon},null),c("span",null,[t.label])])};var G=V({name:"ContextMenu",props:z,setup(e){const t=E(null),o=E(!1),u=W(()=>{const{axis:s,items:n,styles:r,width:l}=e,{x:i,y:m}=s||{x:0,y:0},p=(n||[]).length*40,b=l,h=document.body,j=h.clientWidth<i+b?i-b:i,L=h.clientHeight<m+p?m-p:m;return g(C({},r),{width:`${l}px`,left:`${j+1}px`,top:`${L+1}px`})});A(()=>{H(()=>o.value=!0)}),M(()=>{const s=v(t);s&&document.body.removeChild(s)});function f(s,n){const{handler:r,disabled:l}=s;l||(o.value=!1,n==null||n.stopPropagation(),n==null||n.preventDefault(),r==null||r())}function a(s){return s.map(n=>{const{disabled:r,label:l,children:i,divider:m=!1}=n,p={item:n,handler:f,showIcon:e.showIcon};return!i||i.length===0?c(R,null,[c(Y,{disabled:r,class:`${y}__item`,index:l},{default:()=>[c(w,p,null)]}),m?c(q,{key:`d-${l}`},null):null]):v(o)?c(B,{index:l,disabled:r,"popper-class":`${y}__popup`},{title:()=>c(w,p,null),default:()=>a(i)}):null})}return()=>{let s;if(!v(o))return null;const{items:n}=e;return c(Q,{"default-active":"12",mode:"vertical",collapse:!0,"unique-opened":!0,"menu-trigger":"hover",class:y,ref:t,style:v(u)},X(s=a(n))?s:{default:()=>[s]})}}});const d={domList:[],resolve:()=>{}},J=function(e){const{event:t}=e||{};if(t&&(t==null||t.preventDefault()),!!P)return new Promise(o=>{const u=document.body,f=document.createElement("div"),a={};e.styles&&(a.styles=e.styles),e.items&&(a.items=e.items),e.event&&(a.customEvent=t,a.axis={x:t.clientX,y:t.clientY});const s=c(G,a);T(s,f);const n=function(){d.resolve("")};d.domList.push(f);const r=function(){d.domList.forEach(l=>{try{l&&u.removeChild(l)}catch(i){}}),u.removeEventListener("click",n),u.removeEventListener("scroll",n)};d.resolve=function(l){r(),o(l)},r(),u.appendChild(f),u.addEventListener("click",n),u.addEventListener("scroll",n)})},I=function(){d&&(d.resolve(""),d.domList=[])};function te(e=!0){return U()&&e&&M(()=>{I()}),[J,I]}export{te as u};
