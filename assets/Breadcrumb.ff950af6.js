var F=Object.defineProperty,q=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var D=(t,e,a)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,v=(t,e)=>{for(var a in e||(e={}))U.call(e,a)&&D(t,a,e[a]);if(N)for(var a of N(e))Y.call(e,a)&&D(t,a,e[a]);return t},B=(t,e)=>q(t,G(e));var L=(t,e,a)=>new Promise((b,o)=>{var h=l=>{try{m(a.next(l))}catch(_){o(_)}},g=l=>{try{m(a.throw(l))}catch(_){o(_)}},m=l=>l.done?b(l.value):Promise.resolve(l.value).then(h,g);m((a=a.apply(t,e)).next())});import{N as O,cn as H,d as R,F as T,r as S,M as J,Y as Q,o as p,f as I,I as j,n as k,b as f,C as K,O as W,D as X,ah as Z,g as ee,j as y,i as $,K as te,$ as re,t as w,U as ae,L as ne,ac as se,_ as oe,bm as ce,bO as le,aR as ue,aA as me,bB as ie,br as pe,by as de,e as C,bk as fe,k as be,m as _e,am as he,l as ge}from"./index.12e2b36d.js";import{I as ke}from"./index.e7a25dd6.js";import{g as ye}from"./index.994f713c.js";import"./index.651c0a69.js";import"./index.a21af5b0.js";import"./index.77e99735.js";import"./useTimeout.b1e16c0a.js";import"./_baseUniq.bcd65e0c.js";import"./_baseIsEqual.df6af5a3.js";import"./index.87f8f9e1.js";import"./dropdown.28433873.js";import"./index.e79189fa.js";import"./index.00e0b22a.js";import"./index.a2058803.js";import"./useWindowSizeFn.5d430d85.js";import"./index.9cb3f094.js";import"./index.f06d033e.js";import"./drawer.06fffbf8.js";import"./use-dialog.24721d6a.js";import"./index.b028bbcd.js";import"./refs.b779a62e.js";import"./index.dbcaacfe.js";import"./lock.2e7e9a82.js";const V=Symbol("breadcrumbKey"),ve=O({separator:{type:String,default:"/"},separatorIcon:{type:H,default:""}}),Be={name:"ElBreadcrumb"},Ie=R(B(v({},Be),{props:ve,setup(t){const e=t,a=T("breadcrumb"),b=S();return J(V,e),Q(()=>{const o=b.value.querySelectorAll(`.${a.e("item")}`);o.length&&o[o.length-1].setAttribute("aria-current","page")}),(o,h)=>(p(),I("div",{ref_key:"breadcrumb",ref:b,class:k(f(a).b()),"aria-label":"Breadcrumb",role:"navigation"},[j(o.$slots,"default")],2))}}));var Ce=K(Ie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const $e=O({to:{type:W([String,Object]),default:""},replace:{type:Boolean,default:!1}}),Ee={name:"ElBreadcrumbItem"},Pe=R(B(v({},Ee),{props:$e,setup(t){const e=t,a=ae(),b=X(V,void 0),o=T("breadcrumb"),{separator:h,separatorIcon:g}=Z(b),m=a.appContext.config.globalProperties.$router,l=S(),_=()=>{!e.to||!m||(e.replace?m.replace(e.to):m.push(e.to))};return(r,n)=>(p(),I("span",{class:k(f(o).e("item"))},[ee("span",{ref_key:"link",ref:l,class:k([f(o).e("inner"),f(o).is("link",!!r.to)]),role:"link",onClick:_},[j(r.$slots,"default")],2),f(g)?(p(),y(f(re),{key:0,class:k(f(o).e("separator"))},{default:$(()=>[(p(),y(te(f(g))))]),_:1},8,["class"])):(p(),I("span",{key:1,class:k(f(o).e("separator")),role:"presentation"},w(f(h)),3))],2))}}));var x=K(Pe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const we=ne(Ce,{BreadcrumbItem:x}),Re=se(x);const Se=R({name:"LayoutBreadcrumb",components:{ElBreadcrumb:we,ElBreadcrumbItem:Re,Icon:ke},props:{},setup(){const t=S([]),{currentRoute:e}=ce(),{prefixCls:a}=ge("layout-header-breadcrumb"),{getShowBreadCrumbIcon:b}=le(),o=ue();me(()=>L(this,null,function*(){var P,A,M;if(e.value.name===ie)return;const r=yield ye(),n=e.value.matched,s=n==null?void 0:n[n.length-1];let c=e.value.path;s&&((P=s==null?void 0:s.meta)==null?void 0:P.currentActiveMenu)&&(c=s.meta.currentActiveMenu);const u=pe(r,c),d=r.filter(z=>z.path===u[0]),i=h(d,u);if(!i||i.length===0)return;const E=g(i);(A=e.value.meta)!=null&&A.currentActiveMenu&&E.push(B(v({},e.value),{name:((M=e.value.meta)==null?void 0:M.title)||e.value.name})),t.value=E}));function h(r,n){const s=[];return r.forEach(c=>{var u,d;n.includes(c.path)&&s.push(B(v({},c),{name:((u=c.meta)==null?void 0:u.title)||c.name})),(d=c.children)!=null&&d.length&&s.push(...h(c.children,n))}),s}function g(r){return de(r,n=>{const{meta:s,name:c}=n;if(!s)return!!c;const{title:u,hideBreadcrumb:d}=s;return!(!u||d)}).filter(n=>{var s;return!((s=n.meta)!=null&&s.hideBreadcrumb)})}function m(r,n,s){s==null||s.preventDefault();const{children:c,redirect:u,meta:d}=r;if((c==null?void 0:c.length)&&!u){s==null||s.stopPropagation();return}if(!(d!=null&&d.carryParam))if(u&&typeof u=="string")o(u);else{let i="";n.length===1?i=n[0]:i=`${n.slice(1).pop()||""}`,i=/^\//.test(i)?i:`/${i}`,o(i)}}function l(r,n){return r.indexOf(n)!==r.length-1}function _(r){var n;return(n=r.meta)==null?void 0:n.icon}return{routes:t,prefixCls:a,getIcon:_,getShowBreadCrumbIcon:b,handleClick:m,hasRedirect:l}}}),Ae={key:1};function Me(t,e,a,b,o,h){const g=C("Icon"),m=C("router-link"),l=C("ElBreadcrumbItem"),_=C("ElBreadcrumb");return p(),y(_,{separator:"/",class:k(t.prefixCls)},{default:$(()=>[(p(!0),I(he,null,fe(t.routes,r=>(p(),y(l,{key:r.name},{default:$(()=>[t.getShowBreadCrumbIcon&&t.getIcon(r)?(p(),y(g,{key:0,name:t.getIcon(r),size:"14",class:"mr-1"},null,8,["name"])):be("",!0),t.hasRedirect(t.routes,r)?(p(),y(m,{key:2,to:"",onClick:n=>t.handleClick(r,t.routes,n)},{default:$(()=>[_e(w(r.name||r.meta.title),1)]),_:2},1032,["onClick"])):(p(),I("span",Ae,w(r.name||r.meta.title),1))]),_:2},1024))),128))]),_:1},8,["class"])}var at=oe(Se,[["render",Me]]);export{at as default};
