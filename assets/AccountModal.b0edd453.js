import{B as A,b as w}from"./index.80078828.js";import{B as _}from"./index.7264ffb9.js";import{A as C}from"./index.8394304e.js";import{i as D,a as M}from"./system.6ca597c5.js";import{d as S,r as F,b as a,c as P,_ as v,e as d,o as I,k,i as h,h as B,aD as y}from"./index.a812ffa9.js";import{u as V}from"./useForm.e1145b7d.js";const G=[{label:"\u7528\u6237\u540D",prop:"account",width:120},{label:"\u6635\u79F0",prop:"nickname",width:120},{label:"\u90AE\u7BB1",prop:"email",width:120},{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:180},{label:"\u89D2\u8272",prop:"role",width:200},{label:"\u5907\u6CE8",prop:"remark"}],W=[{field:"account",label:"\u7528\u6237\u540D",component:"ElInput",colProps:{span:8}},{field:"nickname",label:"\u6635\u79F0",component:"ElInput",colProps:{span:8}},{label:"\u90AE\u7BB1",field:"email",component:"ElInput",colProps:{span:8}}],R=[{field:"account",label:"\u7528\u6237\u540D",component:"ElInput",helpMessage:["\u672C\u5B57\u6BB5\u6F14\u793A\u5F02\u6B65\u9A8C\u8BC1","\u4E0D\u80FD\u8F93\u5165\u5E26\u6709admin\u7684\u7528\u6237\u540D"],rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},{validator(o,n){return new Promise((e,t)=>{D(n).then(()=>e()).catch(s=>{t(s.message||"\u9A8C\u8BC1\u5931\u8D25")})})}}]},{field:"pwd",label:"\u5BC6\u7801",component:"ElInput",required:!0,ifShow:!1,componentProps:{showPassword:!0}},{label:"\u89D2\u8272",field:"role",component:"ElSelect",slot:"role",changeEvent:"change",required:!0},{field:"nickname",label:"\u6635\u79F0",component:"ElInput",required:!0},{label:"\u90AE\u7BB1",field:"email",component:"ElInput",required:!0},{label:"\u5907\u6CE8",field:"remark",component:"ElInput",componentProps:{type:"textarea"}}],$=S({name:"AccountModal",components:{BasicModal:A,BasicForm:_,ApiSelect:C},emits:["success","register"],setup(o,{emit:n}){const e=F(!0),t=F(""),[s,{setFieldsValue:f,updateSchema:c,resetFields:p,validate:m,getFieldsValue:r}]=V({labelWidth:100,schemas:R,showActionButtonGroup:!1,colProps:{span:24},actionColProps:{span:24}}),[i,{setModalProps:u,closeModal:b}]=w(async l=>{p(),u({confirmOptions:{loading:!1}}),e.value=!!(l!=null&&l.isUpdate),a(e)&&(t.value=l.record.id,f({...l.record})),c({field:"pwd",show:!a(e),ifShow:!a(e)})}),g=P(()=>a(e)?"\u7F16\u8F91\u8D26\u53F7":"\u65B0\u589E\u8D26\u53F7");async function E(){try{await m();const l=r();u({confirmOptions:{loading:!0}}),b(),n("success",{isUpdate:a(e),values:{...l,id:t.value}})}finally{u({confirmOptions:{loading:!1}})}}return{registerModal:i,registerForm:s,getTitle:g,handleSubmit:E,getAllRoleList:M}}});function q(o,n,e,t,s,f){const c=d("ApiSelect"),p=d("BasicForm"),m=d("BasicModal");return I(),k(m,y(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onConfirm:o.handleSubmit}),{default:h(()=>[B(p,{onRegister:o.registerForm},{role:h(({model:r,field:i})=>[B(c,{api:o.getAllRoleList,filterable:"",placeholder:"\u8BF7\u9009\u62E9",style:{width:"100%"},modelValue:r[i],"onUpdate:modelValue":u=>r[i]=u,labelField:"roleName",valueField:"roleValue"},null,8,["api","modelValue","onUpdate:modelValue"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onConfirm"])}const O=v($,[["render",q]]),x=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));export{O as A,x as a,G as c,W as s};
