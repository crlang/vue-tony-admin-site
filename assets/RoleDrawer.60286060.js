var E=Object.defineProperty;var D=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var F=(o,r,e)=>r in o?E(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e,w=(o,r)=>{for(var e in r||(r={}))v.call(r,e)&&F(o,e,r[e]);if(D)for(var e of D(r))C.call(r,e)&&F(o,e,r[e]);return o};var d=(o,r,e)=>new Promise((l,n)=>{var c=a=>{try{s(e.next(a))}catch(t){n(t)}},i=a=>{try{s(e.throw(a))}catch(t){n(t)}},s=a=>a.done?l(a.value):Promise.resolve(a.value).then(c,i);s((e=e.apply(o,r)).next())});import{B as y}from"./BasicForm.3025383c.js";import{u as R}from"./useForm.c868803e.js";import{B as V,a as k}from"./index.294c9e0b.js";import{d as j}from"./system.07d41a1c.js";import{_ as P}from"./index.b7d256c2.js";import{x as S,cd as $,M as g,y as I,u as f,X as b,z as N,Y as T,a2 as h,$ as B,a0 as L}from"./vendor.1ced56aa.js";const H=[{label:"\u89D2\u8272\u540D\u79F0",prop:"roleName",width:200},{label:"\u89D2\u8272\u503C",prop:"roleValue",width:180},{label:"\u6392\u5E8F",prop:"orderNo",width:50},{label:"\u72B6\u6001",prop:"status",width:120},{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:180},{label:"\u5907\u6CE8",prop:"remark"}],J=[{field:"roleNme",label:"\u89D2\u8272\u540D\u79F0",component:"ElInput",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"ElSelect",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]},colProps:{span:8}}],U=[{field:"roleName",label:"\u89D2\u8272\u540D\u79F0",required:!0,component:"ElInput"},{field:"roleValue",label:"\u89D2\u8272\u503C",required:!0,component:"ElInput"},{field:"status",label:"\u72B6\u6001",component:"ElRadioButton",defaultValue:"0",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]}},{label:"\u5907\u6CE8",field:"remark",component:"ElInput",componentProps:{type:"textarea"}},{label:" ",field:"menu",slot:"menu",component:"ElInput"}],x=S({name:"RoleDrawer",components:{ElTree:$,BasicDrawer:V,BasicForm:y},emits:["success","register"],setup(o,{emit:r}){const e=g(!0),l=g([]),[n,{resetFields:c,setFieldsValue:i,validate:s}]=R({labelWidth:90,schemas:U,showActionButtonGroup:!1}),[a,{setDrawerProps:t,closeDrawer:p}]=k(u=>d(this,null,function*(){c(),t({confirmLoading:!1}),f(l).length===0&&(l.value=yield j()),e.value=!!(u==null?void 0:u.isUpdate),f(e)&&i(w({},u.record))})),m=I(()=>f(e)?"\u7F16\u8F91\u89D2\u8272":"\u65B0\u589E\u89D2\u8272");function _(){return d(this,null,function*(){try{const u=yield s();t({confirmLoading:!0}),console.log(u),p(),r("success")}finally{t({confirmLoading:!1})}})}return{registerDrawer:a,registerForm:n,getTitle:m,handleSubmit:_,treeData:l}}});function M(o,r,e,l,n,c){const i=b("el-tree"),s=b("BasicForm"),a=b("BasicDrawer");return N(),T(a,L(o.$attrs,{onRegister:o.registerDrawer,showFooter:"",title:o.getTitle,width:"500px",onOk:o.handleSubmit}),{default:h(()=>[B(s,{onRegister:o.registerForm},{menu:h(({model:t,field:p})=>[B(i,{modelValue:t[p],"onUpdate:modelValue":m=>t[p]=m,treeData:o.treeData,prop:{label:"menuName",key:"id"},checkable:"",toolbar:"",title:"\u83DC\u5355\u5206\u914D"},null,8,["modelValue","onUpdate:modelValue","treeData"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var O=P(x,[["render",M]]),K=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:O});export{O as R,K as a,H as c,J as s};
