var F=Object.defineProperty,q=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var D=(t,e,a)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,v=(t,e)=>{for(var a in e||(e={}))U.call(e,a)&&D(t,a,e[a]);if(N)for(var a of N(e))Y.call(e,a)&&D(t,a,e[a]);return t},B=(t,e)=>q(t,G(e));var j=(t,e,a)=>new Promise((b,o)=>{var h=l=>{try{m(a.next(l))}catch(_){o(_)}},g=l=>{try{m(a.throw(l))}catch(_){o(_)}},m=l=>l.done?b(l.value):Promise.resolve(l.value).then(h,g);m((a=a.apply(t,e)).next())});import{N as L,cf as H,d as R,F as T,r as S,M as J,Y as Q,o as p,f as I,I as K,n as y,b as f,C as O,O as W,D as X,ah as Z,g as ee,j as k,i as E,K as te,$ as re,t as w,U as ae,L as ne,ac as se,_ as oe,bj as ce,bp as le,aR as ue,aA as me,bE as ie,bz as pe,by as de,e as C,bB as fe,k as be,m as _e,am as he,l as ge}from"./index.61be89a1.js";import{I as ye}from"./index.ee8c97d5.js";import{g as ke}from"./index.e14673d0.js";import"./lock.63bbbced.js";import"./index.21f47639.js";import"./index.e5719e3f.js";import"./index.91f8c4ba.js";import"./useTimeout.0d66b90d.js";import"./_baseUniq.8c6df5cb.js";import"./_baseIsEqual.3f9a7929.js";import"./index.a6a2ff86.js";import"./dropdown.7e7b7d81.js";import"./index.9574a6b4.js";import"./index.00e0b22a.js";import"./index.c00c0978.js";import"./useWindowSizeFn.a3ba0925.js";import"./index.37ecb140.js";import"./index.5e1ef5ac.js";import"./drawer.0f38de7e.js";import"./use-dialog.8207f305.js";import"./index.3df10ae2.js";import"./refs.a78f8491.js";import"./index.4e3bc3e4.js";const V=Symbol("breadcrumbKey"),ve=L({separator:{type:String,default:"/"},separatorIcon:{type:H,default:""}}),Be={name:"ElBreadcrumb"},Ie=R(B(v({},Be),{props:ve,setup(t){const e=t,a=T("breadcrumb"),b=S();return J(V,e),Q(()=>{const o=b.value.querySelectorAll(`.${a.e("item")}`);o.length&&o[o.length-1].setAttribute("aria-current","page")}),(o,h)=>(p(),I("div",{ref_key:"breadcrumb",ref:b,class:y(f(a).b()),"aria-label":"Breadcrumb",role:"navigation"},[K(o.$slots,"default")],2))}}));var Ce=O(Ie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const Ee=L({to:{type:W([String,Object]),default:""},replace:{type:Boolean,default:!1}}),$e={name:"ElBreadcrumbItem"},Pe=R(B(v({},$e),{props:Ee,setup(t){const e=t,a=ae(),b=X(V,void 0),o=T("breadcrumb"),{separator:h,separatorIcon:g}=Z(b),m=a.appContext.config.globalProperties.$router,l=S(),_=()=>{!e.to||!m||(e.replace?m.replace(e.to):m.push(e.to))};return(r,n)=>(p(),I("span",{class:y(f(o).e("item"))},[ee("span",{ref_key:"link",ref:l,class:y([f(o).e("inner"),f(o).is("link",!!r.to)]),role:"link",onClick:_},[K(r.$slots,"default")],2),f(g)?(p(),k(f(re),{key:0,class:y(f(o).e("separator"))},{default:E(()=>[(p(),k(te(f(g))))]),_:1},8,["class"])):(p(),I("span",{key:1,class:y(f(o).e("separator")),role:"presentation"},w(f(h)),3))],2))}}));var x=O(Pe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const we=ne(Ce,{BreadcrumbItem:x}),Re=se(x);const Se=R({name:"LayoutBreadcrumb",components:{ElBreadcrumb:we,ElBreadcrumbItem:Re,Icon:ye},props:{},setup(){const t=S([]),{currentRoute:e}=ce(),{prefixCls:a}=ge("layout-header-breadcrumb"),{getShowBreadCrumbIcon:b}=le(),o=ue();me(()=>j(this,null,function*(){var P,A,M;if(e.value.name===ie)return;const r=yield ke(),n=e.value.matched,s=n==null?void 0:n[n.length-1];let c=e.value.path;s&&((P=s==null?void 0:s.meta)==null?void 0:P.currentActiveMenu)&&(c=s.meta.currentActiveMenu);const u=pe(r,c),d=r.filter(z=>z.path===u[0]),i=h(d,u);if(!i||i.length===0)return;const $=g(i);(A=e.value.meta)!=null&&A.currentActiveMenu&&$.push(B(v({},e.value),{name:((M=e.value.meta)==null?void 0:M.title)||e.value.name})),t.value=$}));function h(r,n){const s=[];return r.forEach(c=>{var u,d;n.includes(c.path)&&s.push(B(v({},c),{name:((u=c.meta)==null?void 0:u.title)||c.name})),(d=c.children)!=null&&d.length&&s.push(...h(c.children,n))}),s}function g(r){return de(r,n=>{const{meta:s,name:c}=n;if(!s)return!!c;const{title:u,hideBreadcrumb:d}=s;return!(!u||d)}).filter(n=>{var s;return!((s=n.meta)!=null&&s.hideBreadcrumb)})}function m(r,n,s){s==null||s.preventDefault();const{children:c,redirect:u,meta:d}=r;if((c==null?void 0:c.length)&&!u){s==null||s.stopPropagation();return}if(!(d!=null&&d.carryParam))if(u&&typeof u=="string")o(u);else{let i="";n.length===1?i=n[0]:i=`${n.slice(1).pop()||""}`,i=/^\//.test(i)?i:`/${i}`,o(i)}}function l(r,n){return r.indexOf(n)!==r.length-1}function _(r){var n;return(n=r.meta)==null?void 0:n.icon}return{routes:t,prefixCls:a,getIcon:_,getShowBreadCrumbIcon:b,handleClick:m,hasRedirect:l}}}),Ae={key:1};function Me(t,e,a,b,o,h){const g=C("Icon"),m=C("router-link"),l=C("ElBreadcrumbItem"),_=C("ElBreadcrumb");return p(),k(_,{separator:"/",class:y(t.prefixCls)},{default:E(()=>[(p(!0),I(he,null,fe(t.routes,r=>(p(),k(l,{key:r.name},{default:E(()=>[t.getShowBreadCrumbIcon&&t.getIcon(r)?(p(),k(g,{key:0,name:t.getIcon(r),class:"mr-1"},null,8,["name"])):be("",!0),t.hasRedirect(t.routes,r)?(p(),k(m,{key:2,to:"",onClick:n=>t.handleClick(r,t.routes,n)},{default:E(()=>[_e(w(r.name||r.meta.title),1)]),_:2},1032,["onClick"])):(p(),I("span",Ae,w(r.name||r.meta.title),1))]),_:2},1024))),128))]),_:1},8,["class"])}var at=oe(Se,[["render",Me]]);export{at as default};
