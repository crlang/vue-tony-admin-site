var ce=Object.defineProperty,pe=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var Y=(e,s,o)=>s in e?ce(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,g=(e,s)=>{for(var o in s||(s={}))de.call(s,o)&&Y(e,o,s[o]);if(q)for(var o of q(s))ge.call(s,o)&&Y(e,o,s[o]);return e},L=(e,s)=>pe(e,fe(s));var G=(e,s,o)=>new Promise((p,a)=>{var f=l=>{try{n(o.next(l))}catch(u){a(u)}},t=l=>{try{n(o.throw(l))}catch(u){a(u)}},n=l=>l.done?p(l.value):Promise.resolve(l.value).then(f,t);n((o=o.apply(e,s)).next())});import{e as K,aS as me,_ as O,ah as we,Y as he,u as Ce,ap as Q,i as U,ab as ye,ad as W,w as $e}from"./index.ccefc80e.js";import{x as R,aK as De,X as D,z as m,A as k,a3 as w,a7 as X,Y as T,a2 as h,aa as A,F as V,a9 as b,G as B,S as J,bI as ve,D as Z,$ as F,bg as ke,M as C,y,u as i,t as P,o as Be,O as H,aQ as be,W as x,ae as E,ac as ee,a0 as I,ao as Pe,aL as Se,aM as Te,I as te,a_ as Ve,aj as Fe}from"./vendor.edbe4fa8.js";import{u as Ee}from"./useAttrs.07e29e2e.js";const{t:oe}=K(),j={showConfirmBtn:{type:Boolean,default:!0},confirmText:{type:String,default:oe("common.confirmText")},confirmType:{type:String,default:"primary"},confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelText:{type:String,default:oe("common.cancelText")},cancelType:{type:String,default:"default"},showFooter:{type:Boolean},footerHeight:{type:Number,default:60}},se={isDetail:{type:Boolean},showDetailBack:{type:Boolean,default:!0},loading:{type:Boolean},loadingText:{type:String},closeFunc:{type:[Function,Object],default:null}},Le=g(g(L(g({},me),{title:{type:String},modelValue:{type:Boolean}}),se),j),Oe=R({name:"BasicDrawerFooter",components:{ElButton:De},inheritAttrs:!1,props:L(g({},j),{prefixCls:{type:String},height:{type:String,default:"60px"}}),emits:["ok","close"],setup(e,{emit:s}){function o(){s("ok")}function p(){s("close")}return{handleOk:o,handleClose:p}}});function Re(e,s,o,p,a,f){const t=D("ElButton");return e.showFooter?(m(),k("div",{key:0,class:B(`${e.prefixCls}-footer`),style:J({height:e.height})},[e.$slots.footer?w(e.$slots,"footer",{key:0}):(m(),k(X,{key:1},[w(e.$slots,"insertFooter"),e.showCancelBtn?(m(),T(t,{key:0,onClick:e.handleClose},{default:h(()=>[A(V(e.cancelText),1)]),_:1},8,["onClick"])):b("",!0),w(e.$slots,"centerFooter"),e.showConfirmBtn?(m(),T(t,{key:1,type:e.confirmType,onClick:e.handleOk,loading:e.confirmLoading},{default:h(()=>[A(V(e.confirmText),1)]),_:1},8,["type","onClick","loading"])):b("",!0),w(e.$slots,"appendFooter")],64))],6)):b("",!0)}var Ae=O(Oe,[["render",Re]]);const He=R({name:"BasicDrawerHeader",components:{BasicTitle:we,ArrowLeft:ve},inheritAttrs:!1,props:{prefixCls:{type:String},isDetail:{type:Boolean},showDetailBack:{type:Boolean},title:{type:String}},emits:["close"],setup(e,{emit:s}){function o(){s("close")}return{handleClose:o}}}),Ie={key:1};function je(e,s,o,p,a,f){const t=D("ArrowLeft"),n=D("BasicTitle");return e.isDetail?(m(),k("div",{key:0,class:B(`${e.prefixCls}-header`)},[Z("span",{class:B(`${e.prefixCls}-header__title`)},[e.showDetailBack?(m(),k("span",{key:0,class:B(`${e.prefixCls}-header__back`),onClick:s[0]||(s[0]=(...l)=>e.handleClose&&e.handleClose(...l))},[F(t)],2)):b("",!0),e.title?(m(),k("span",Ie,V(e.title),1)):b("",!0)],2),Z("span",{class:B(`${e.prefixCls}-header__toolbar`)},[w(e.$slots,"titleToolbar")],2)],2)):(m(),T(n,{key:1,class:B(e.prefixCls)},{default:h(()=>[e.$slots.title?w(e.$slots,"title",{key:0}):(m(),k(X,{key:1},[A(V(e.title||""),1)],64))]),_:3},8,["class"]))}var _e=O(He,[["render",je]]);const Ne=R({components:{ElDrawer:ke,ScrollContainer:he,DrawerFooter:Ae,DrawerHeader:_e},inheritAttrs:!1,props:Le,emits:["visible-change","ok","close","register"],setup(e,{emit:s}){const o=C(!1),p=Ee(),a=C(null),f=C(),{t}=K(),{prefixCls:n}=Ce("basic-drawer"),l={setDrawerProps:ie,emitVisible:void 0},u=E();u&&s("register",l,u.uid);const d=y(()=>Q(P(e),i(a))),$=y(()=>{const r=g(g({},i(p)),i(d)),{isDetail:c,width:v,customClass:M}=r;if(c){v||(r.width="100%");const z=`${n}__detail`;r.customClass=M?`${M} ${z}`:z}return r}),re=y(()=>{const r=g({},i($));return r.customClass=`${n} ${r==null?void 0:r.customClass} basic-drawer-${u==null?void 0:u.uid}`,Be(r,Object.getOwnPropertyNames(g(g({},j),se)))}),N=y(()=>{const{footerHeight:r,showFooter:c}=i($);return c&&r?`${parseInt(r)}px`:"0px"}),ne=y(()=>{const r=i(N);return{position:"relative",height:`calc(100% - ${r})`}}),ae=y(()=>{var r;return!!((r=i($))==null?void 0:r.loading)});H(()=>e.modelValue,(r,c)=>{r!==c&&(o.value=r)},{deep:!0}),H(()=>{var r;return(r=a.value)==null?void 0:r.loading},r=>{var c,v;r?f.value=be.service({target:`.basic-drawer-${u==null?void 0:u.uid}`,text:((c=a.value)==null?void 0:c.loadingText)||e.loadingText||"Loading"}):(v=f.value)==null||v.close()},{deep:!0}),H(()=>o.value,r=>{x(()=>{var c;s("visible-change",r),u&&((c=l.emitVisible)==null||c.call(l,r,u.uid))})});function le(r){return G(this,null,function*(){const{closeFunc:c}=i($);if(s("close",r),c&&U(c)){const v=yield c();o.value=!v;return}o.value=!1})}function ie(r){a.value=Q(i(a)||{},r),Reflect.has(r,"modelValue")&&(o.value=!!r.modelValue)}function ue(){s("ok")}return{onClose:le,t,prefixCls:n,visibleRef:o,getMergeProps:d,getScrollContentStyle:ne,getProps:$,getLoading:ae,getBindValues:re,getFooterHeight:N,handleOk:ue}}});function Me(e,s,o,p,a,f){const t=D("DrawerHeader"),n=D("ScrollContainer"),l=D("DrawerFooter"),u=D("ElDrawer");return m(),T(u,I({onClose:e.onClose},e.getBindValues,{modelValue:e.visibleRef,"onUpdate:modelValue":s[0]||(s[0]=d=>e.visibleRef=d)}),{title:h(()=>[F(t,I(e.getProps,{prefixCls:e.prefixCls,onClose:e.onClose}),ee({_:2},[e.$slots.title?{name:"title",fn:h(()=>[w(e.$slots,"title")])}:void 0,e.$slots.titleToolbar?{name:"titleToolbar",fn:h(()=>[w(e.$slots,"titleToolbar")])}:void 0]),1040,["prefixCls","onClose"])]),default:h(()=>[F(n,{style:J(e.getScrollContentStyle)},{default:h(()=>[w(e.$slots,"default")]),_:3},8,["style"]),F(l,I(e.getProps,{prefixCls:e.prefixCls,height:e.getFooterHeight,onClose:e.onClose,onOk:e.handleOk}),ee({_:2},[Pe(Object.keys(e.$slots),d=>({name:d,fn:h($=>[w(e.$slots,d,Se(Te($||{})))])}))]),1040,["prefixCls","height","onClose","onOk"])]),_:3},16,["onClose","modelValue"])}var ze=O(Ne,[["render",Me]]);const S=te({}),_=te({});function Qe(){if(!E())throw new Error("useDrawer() can only be used inside setup() or functional components!");const e=C(null),s=C(!1),o=C("");function p(t,n){i(s)&&ye()&&t===i(e)||(o.value=n,e.value=t,s.value=!0,t.emitVisible=(l,u)=>{_[u]=l})}const a=()=>{const t=i(e);return t||W("useDrawer instance is undefined!"),t},f={setDrawerProps:t=>{var n;(n=a())==null||n.setDrawerProps(t)},getVisible:y(()=>_[~~i(o)]),openDrawer:(t=!0,n,l=!0)=>{var d;if((d=a())==null||d.setDrawerProps({modelValue:t}),!n)return;if(l){S[i(o)]=null,S[i(o)]=P(n);return}Ve(P(S[i(o)]),P(n))||(S[i(o)]=P(n))},closeDrawer:()=>{var t;(t=a())==null||t.setDrawerProps({modelValue:!1})}};return[p,f]}const Ue=e=>{const s=C(null),o=E(),p=C("");if(!E())throw new Error("useDrawerInner() can only be used inside setup() or functional components!");const a=()=>{const t=i(s);if(!t){W("useDrawerInner instance is undefined!");return}return t},f=(t,n)=>{p.value=n,s.value=t,o==null||o.emit("register",t,n)};return Fe(()=>{const t=S[i(p)];!t||!e||!U(e)||x(()=>{e(t)})}),[f,{changeLoading:(t=!0)=>{var n;(n=a())==null||n.setDrawerProps({loading:t})},changeOkLoading:(t=!0)=>{var n;(n=a())==null||n.setDrawerProps({confirmLoading:t})},getVisible:y(()=>_[~~i(p)]),closeDrawer:()=>{var t;(t=a())==null||t.setDrawerProps({modelValue:!1})},setDrawerProps:t=>{var n;(n=a())==null||n.setDrawerProps(t)}}]},We=$e(ze);export{We as B,Ue as a,Qe as u};
