var y=(g,s,t)=>new Promise((u,l)=>{var d=a=>{try{o(t.next(a))}catch(i){l(i)}},c=a=>{try{o(t.throw(a))}catch(i){l(i)}},o=a=>a.done?u(a.value):Promise.resolve(a.value).then(d,c);o((t=t.apply(g,s)).next())});import{C as x}from"./index.2d94dd73.js";import{e as E}from"./index.51427878.js";import{u as _,a as C,L as F,b as I}from"./useLogin.434506eb.js";import{x as L,M as b,I as S,y as k,u as e,z as h,Z as w,a3 as m,a0 as r,am as B,aU as f,aI as j,ab as N,F as R,aW as D,aa as M,n as V}from"./vendor.041d4bc7.js";const Z=L({setup(g){const{t:s}=E(),{getLoginState:t}=_(),u=b(),l=b(!1),{getFormRules:d}=C(),{validForm:c}=I(u),o=S({mobile:"",sms:""}),a=k(()=>e(t)===F.MOBILE);function i(){return y(this,null,function*(){if(!!(yield c()))try{l.value=!0,V({title:s("sys.login.loginSuccessTitle"),message:s("sys.login.loginSuccessDesc"),type:"success"})}catch(n){V({title:s("sys.api.errorTip"),message:n.message||s("sys.api.networkExceptionMsg"),type:"error"})}finally{l.value=!1}})}return(v,n)=>e(a)?(h(),w(e(D),{key:0,model:e(o),rules:e(d),ref_key:"formRef",ref:u},{default:m(()=>[r(e(f),{prop:"mobile"},{default:m(()=>[r(e(B),{modelValue:e(o).mobile,"onUpdate:modelValue":n[0]||(n[0]=p=>e(o).mobile=p),placeholder:e(s)("sys.login.mobile")},null,8,["modelValue","placeholder"])]),_:1}),r(e(f),{prop:"sms"},{default:m(()=>[r(e(x),{modelValue:e(o).sms,"onUpdate:modelValue":n[1]||(n[1]=p=>e(o).sms=p),placeholder:e(s)("sys.login.smsCode")},null,8,["modelValue","placeholder"])]),_:1}),r(e(f),null,{default:m(()=>[r(e(j),{type:"primary",onClick:i,loading:l.value,class:"login--submit"},{default:m(()=>[N(R(e(s)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])):M("",!0)}});export{Z as default};
