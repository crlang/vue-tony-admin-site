var v=Object.defineProperty;var h=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var w=(e,a,t)=>a in e?v(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,g=(e,a)=>{for(var t in a||(a={}))y.call(a,t)&&w(e,t,a[t]);if(h)for(var t of h(a))B.call(a,t)&&w(e,t,a[t]);return e};var m=(e,a,t)=>new Promise((s,n)=>{var p=o=>{try{l(t.next(o))}catch(r){n(r)}},i=o=>{try{l(t.throw(o))}catch(r){n(r)}},l=o=>o.done?s(o.value):Promise.resolve(o.value).then(p,i);l((t=t.apply(e,a)).next())});import{B as E}from"./index-a82db265.js";import{B as k,a as F}from"./index-9d19a498.js";import{s as P,d as C}from"./system-58567010.js";import{K as I,_ as N}from"./index-795cdaa0.js";import{as as T,aI as V}from"./elementui-66980f2a.js";import{ab as $,E as x,r as b,f as M,u as f,ac as d,p as G,I as j,J as _,S,G as q}from"./vue-d691a816.js";import{u as A}from"./useForm-af19a7b1.js";const ee=[{label:"角色名称",prop:"roleName",width:200},{label:"角色值",prop:"roleValue",width:180},{label:"排序",prop:"orderNo",width:50},{label:"状态",prop:"status",width:120,customRender:({record:e,scope:a})=>(Reflect.has(e,"pendingStatus")||(a.row.pendingStatus=!1),$(T,{modelValue:(e==null?void 0:e.status)==="0",activeText:"Y",inactiveText:"N",inlinePrompt:!0,loading:e==null?void 0:e.pendingStatus,onChange(t){a.row.pendingStatus=!0;const s=t?"0":"1",{createMessage:n}=I();P(e.id,s).then(()=>{a.row.status=s,n.success("已成功修改角色状态")}).catch(()=>{n.error("修改角色状态失败")}).finally(()=>{a.row.pendingStatus=!1})}}))},{label:"创建时间",prop:"createTime",width:180},{label:"备注",prop:"remark"}],te=[{field:"roleNme",label:"角色名称",component:"ElInput",colProps:{span:8}},{field:"status",label:"状态",component:"ElSelect",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},colProps:{span:8}}],L=[{field:"roleName",label:"角色名称",required:!0,component:"ElInput"},{field:"roleValue",label:"角色值",required:!0,component:"ElInput"},{field:"status",label:"状态",component:"ElRadioGroup",defaultValue:"0",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]}},{label:"备注",field:"remark",component:"ElInput",componentProps:{type:"textarea"}},{label:" ",field:"menu",slot:"menu",component:"ElInput"}],O=x({name:"RoleDrawer",components:{ElTree:V,BasicDrawer:k,BasicForm:E},emits:["success","register"],setup(e,{emit:a}){const t=b(!0),s=b([]),[n,{resetFields:p,setFieldsValue:i,validate:l}]=A({labelWidth:90,schemas:L,showActionButtonGroup:!1,colProps:{span:24},actionColProps:{span:24}}),[o,{closeDrawer:r,changeConfirmLoading:u}]=F(c=>m(this,null,function*(){p(),u(!1),f(s).length===0&&(s.value=yield C()),t.value=!!(c!=null&&c.isUpdate),f(t)&&i(g({},c.record))})),D=M(()=>f(t)?"编辑角色":"新增角色");function R(){return m(this,null,function*(){try{yield l(),u(!0),r(),a("success")}finally{u(!1)}})}return{registerDrawer:o,registerForm:n,getTitle:D,handleSubmit:R,treeData:s}}});function U(e,a,t,s,n,p){const i=d("el-tree"),l=d("BasicForm"),o=d("BasicDrawer");return G(),j(o,q(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onConfirm:e.handleSubmit}),{default:_(()=>[S(l,{onRegister:e.registerForm},{menu:_(({model:r,field:u})=>[S(i,{"default-checked-keys":r[u],data:e.treeData,"node-key":"id",defaultExpandAll:"",props:{label:"menuName"},"show-checkbox":"",title:"菜单分配"},null,8,["default-checked-keys","data"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onConfirm"])}const z=N(O,[["render",U]]),ae=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{z as R,ae as a,ee as c,te as s};
