import{d as V,r as R,s as T,c,b as i,w as B,Z as k,U as b,ak as I,h as l,m as M,aE as L,_ as U,e as E,o as P,k as j,i as m,j as A,g as p,t as F}from"./index.a812ffa9.js";import{d as q}from"./data.b3b564c3.js";import{E as Z}from"./index.6808290a.js";const z=V({name:"VirtualScroll",props:{height:[Number,String],width:[Number,String],itemHeight:{type:Number,required:!0},listData:{type:Array,default:()=>[]},bench:{type:Number,default:0},maxHeight:[Number,String],minHeight:[Number,String],maxWidth:[Number,String],minWidth:[Number,String]},setup(e,{slots:w}){const o=R(null),r=T({first:0,last:0,scrollTop:0}),{prefixCls:f}=M("virtual-scroll"),v=c(()=>parseInt(e.bench,10)),s=c(()=>parseInt(e.itemHeight,10)),h=c(()=>Math.max(0,r.first-i(v))),S=c(()=>Math.min((e.listData||[]).length,r.last+i(v))),d=c(()=>({height:a((e.listData||[]).length*i(s))})),D=c(()=>{const t={},n=a(e.height),u=a(e.minHeight),_=a(e.minWidth),g=a(e.maxHeight),x=a(e.maxWidth),N=a(e.width);return n&&(t.height=n),u&&(t.minHeight=u),_&&(t.minWidth=_),g&&(t.maxHeight=g),x&&(t.maxWidth=x),N&&(t.width=N),t});function a(t,n="px"){if(!(t==null||t===""))return isNaN(+t)?String(t):`${Number(t)}${n}`}function H(t){const n=i(o);if(!n)return 0;const u=parseInt(e.height||0,10)||n.clientHeight;return t+Math.ceil(u/i(s))}function W(){return Math.floor(r.scrollTop/i(s))}function y(){const t=i(o);!t||(r.scrollTop=t.scrollTop,r.first=W(),r.last=H(r.first))}function C(){const{listData:t=[]}=e;return t.slice(i(h),i(S)).map($)}function $(t,n){n+=i(h);const u=a(i(s)),_=a(n*i(s)),g=w.default;return l("div",{class:`${f}__item`,style:{top:_,height:u},key:n},{default:()=>g({index:n,item:t})})}return B([()=>e.itemHeight,()=>e.height],()=>{y()}),k(()=>{r.last=H(0),b(()=>{const t=i(o);!t||t.addEventListener("scroll",y)})}),I(()=>{b(()=>{const t=i(o);!t||t.removeEventListener("scroll",y)})}),()=>l("div",{class:f,style:i(D),ref:o},[l("div",{class:`${f}__container`,style:i(d)},[C()])])}});const G=L(z);const J=V({components:{ElDivider:Z,VirtualScroll:G},setup(){return{data:q}}}),K={class:"virtual-scroll-demo-wrap"},O={class:"virtual-scroll-demo__item"},Q={class:"virtual-scroll-demo-wrap"},X={class:"virtual-scroll-demo__item"};function Y(e,w,o,r,f,v){const s=E("el-divider"),h=E("VirtualScroll",!0),S=E("PageWrapper");return P(),j(S,{title:"\u865A\u62DF\u6EDA\u52A8\u793A\u4F8B"},{default:m(()=>[l(s,null,{default:m(()=>[A("\u57FA\u7840\u6EDA\u52A8\u793A\u4F8B")]),_:1}),p("div",K,[l(h,{itemHeight:60,listData:e.data,height:300},{default:m(({item:d,index:D})=>[p("div",O,F(D)+" - "+F(d.title),1)]),_:1},8,["listData"])]),l(s,null,{default:m(()=>[A("\u5373\u4F7F\u4E0D\u53EF\u89C1\uFF0C\u4E5F\u9884\u5148\u52A0\u8F7D50\u6761\u6570\u636E\uFF0C\u9632\u6B62\u7A7A\u767D")]),_:1}),p("div",Q,[l(h,{listData:e.data,itemHeight:60,height:300,bench:50},{default:m(({item:d})=>[p("div",X,F(d.title),1)]),_:1},8,["listData"])])]),_:1})}const nt=U(J,[["render",Y],["__scopeId","data-v-1af363cf"]]);export{nt as default};
