import{C as y}from"./index.397c2134.js";import{u as W}from"./domUtils.0dce6f1a.js";import{r as w,a as _}from"./index.00e0b22a.js";import{N as x,r as b,b as i,ak as v,W as $,_ as B,d as I,z as R,e as g,o as z,k as E,i as m,h as u,j as k}from"./index.a812ffa9.js";import"./index.18abe04a.js";import"./tsxHelper.25cd2f92.js";import"./index.6c72c066.js";import"./index.48be7fd2.js";import"./index.92c9b7b5.js";const M=Symbol("watermark-dom");function N(n=b(document.body)){const r=W(function(){const e=i(n);if(!e)return;const{clientHeight:t,clientWidth:o}=e;s({height:t,width:o})}),c=M.toString(),l=x(),f=()=>{const e=i(l);l.value=void 0;const t=i(n);!t||(e&&t.removeChild(e),w(t,r))};function C(e){const t=document.createElement("canvas"),o=300,d=240;Object.assign(t,{width:o,height:d});const a=t.getContext("2d");return a&&(a.rotate(-20*Math.PI/120),a.font="15px Vedana",a.fillStyle="rgba(0, 0, 0, 0.15)",a.textAlign="left",a.textBaseline="middle",a.fillText(e,o/20,d)),t.toDataURL("image/png")}function s(e={}){const t=i(l);!t||(e!=null&&e.width&&(t.style.width=`${e.width}px`),e!=null&&e.height&&(t.style.height=`${e.height}px`),e!=null&&e.str&&(t.style.background=`url(${C(e.str)}) left top repeat`))}const h=e=>{if(i(l))return s({str:e}),c;const t=document.createElement("div");l.value=t,t.id=c,t.style.pointerEvents="none",t.style.top="0px",t.style.left="0px",t.style.position="absolute",t.style.zIndex="100000";const o=i(n);if(!o)return c;const{clientHeight:d,clientWidth:a}=o;return s({str:e,width:a,height:d}),o.appendChild(t),c};function p(e){h(e),_(document.documentElement,r),$()&&v(()=>{f()})}return{setWatermark:p,clear:f}}const S=I({components:{ElButton:R,CollapseContainer:y},setup(){const{setWatermark:n,clear:r}=N();return{setWatermark:n,clear:r}}});function L(n,r,c,l,f,C){const s=g("el-button"),h=g("CollapseContainer"),p=g("PageWrapper");return z(),E(p,{title:"\u6C34\u5370\u793A\u4F8B"},{default:m(()=>[u(h,{class:"w-full h-32 bg-white rounded-md",title:"Global WaterMark"},{default:m(()=>[u(s,{type:"primary",class:"mr-2",onClick:r[0]||(r[0]=e=>n.setWatermark("WaterMark Info"))},{default:m(()=>[k("Create")]),_:1}),u(s,{type:"danger",class:"mr-2",onClick:n.clear},{default:m(()=>[k("Clear")]),_:1},8,["onClick"]),u(s,{type:"warning",class:"mr-2",onClick:r[1]||(r[1]=e=>n.setWatermark("WaterMark Info New"))},{default:m(()=>[k("Reset")]),_:1})]),_:1})]),_:1})}const G=B(S,[["render",L]]);export{G as default};
