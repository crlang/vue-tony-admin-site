var y=(g,s,l)=>new Promise((p,a)=>{var u=t=>{try{o(l.next(t))}catch(r){a(r)}},d=t=>{try{o(l.throw(t))}catch(r){a(r)}},o=t=>t.done?p(t.value):Promise.resolve(t.value).then(u,d);o((l=l.apply(g,s)).next())});import{y as j,a as x,_ as v,l as V,u as e,z as _,G as E,H as m,R as i,a9 as C,P as L,Q as S,O as h}from"./ex-pkg-@vue.dfd8e273.js";import{C as w}from"./index.51d433bf.js";import{e as F}from"./index.ec0491db.js";import{u as I,a as B,L as R,b as K}from"./useLogin.cea441e7.js";import{f as N,I as f,z as D,K as T,b as k}from"./ex-pkg-element-plus.7627c250.js";import"./ex-pkg-@vueuse.e5d644bd.js";import"./ex-pkg-vendor.0d33d667.js";import"./ex-pkg-xlsx.9db082f2.js";import"./ex-pkg-mockjs.907334ba.js";import"./ex-pkg-@element-plus.e8ce6c8b.js";import"./ex-pkg-@iconify.345c6dc9.js";import"./ex-pkg-@popperjs.f3a17871.js";const Y=j({setup(g){const{t:s}=F(),{getLoginState:l}=I(),p=x(),a=x(!1),{getFormRules:u}=B(),{validForm:d}=K(p),o=v({mobile:"",sms:""}),t=V(()=>e(l)===R.MOBILE);function r(){return y(this,null,function*(){if(!!(yield d()))try{a.value=!0,k({title:s("sys.login.loginSuccessTitle"),message:s("sys.login.loginSuccessDesc"),type:"success"})}catch(n){k({title:s("sys.api.errorTip"),message:n.message||s("sys.api.networkExceptionMsg"),type:"error"})}finally{a.value=!1}})}return(b,n)=>e(t)?(_(),E(e(T),{key:0,model:e(o),rules:e(u),ref_key:"formRef",ref:p},{default:m(()=>[i(e(f),{prop:"mobile"},{default:m(()=>[i(e(N),{modelValue:e(o).mobile,"onUpdate:modelValue":n[0]||(n[0]=c=>e(o).mobile=c),placeholder:e(s)("sys.login.mobile")},null,8,["modelValue","placeholder"])]),_:1}),i(e(f),{prop:"sms"},{default:m(()=>[i(e(w),{modelValue:e(o).sms,"onUpdate:modelValue":n[1]||(n[1]=c=>e(o).sms=c),placeholder:e(s)("sys.login.smsCode"),onKeypress:C(r,["enter"])},null,8,["modelValue","placeholder","onKeypress"])]),_:1}),i(e(f),null,{default:m(()=>[i(e(D),{type:"primary",onClick:r,loading:a.value,class:"login--submit"},{default:m(()=>[L(S(e(s)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])):h("",!0)}});export{Y as default};
