import{d as G,z as H,bC as W,r as v,c as $,b as r,cF as J,w as L,U as q,_ as K,m as M,W as I,e as B,bO as Q,o as c,k as V,i as D,g as X,n as C,f as b,h as N,l as m,al as j,j as T,t as F,F as w,v as Y,aD as S,s as U,cG as E,aw as O,aC as Z,aB as z,cH as _,aE as x}from"./index.a812ffa9.js";import{S as ee}from"./index.ba82fa59.js";import{B as oe}from"./index.6c72c066.js";import{h as se}from"./index.fbd5cbb3.js";import{E as ne}from"./index.6bf5f43d.js";import{E as te}from"./index.fb19ae5d.js";import{i as ae}from"./isEqual.f6c0098b.js";const A={modelValue:{type:Boolean},title:{type:String},isDetail:Boolean,loading:Boolean,loadingText:String,closeFn:{type:Function,default:null},showFooter:Boolean,showConfirmBtn:{type:Boolean,default:!0},confirmOptions:{type:Object,default:{btnText:"\u786E\u8BA4",type:"primary"}},showCancelBtn:{type:Boolean,default:!0},cancelOptions:{type:Object,default:{btnText:"\u53D6\u6D88",type:"default"}}},re={...se,appendToBody:{type:Boolean,default:!0},modelValue:{type:Boolean},...A};const le=G({name:"BasicDrawer",components:{ElDrawer:ne,ElButton:H,ScrollContainer:ee,BasicTitle:oe,SvgIcon:W},directives:{loading:te.directive},inheritAttrs:!1,props:re,emits:["update:modelValue","visible-change","confirm","cancel","register"],setup(e,{attrs:l,emit:t}){const i=v(!1),u=v(null),{prefixCls:d}=M("basic-drawer"),s=I(),o=$(()=>{const n={...e,...r(u)},f=`${d} ${(n==null?void 0:n.class)||""} ${d}-${s==null?void 0:s.uid}`;return{...n,class:f}}),a=$(()=>{const n={...l,...r(o)},f=Object.keys(A);return J(n,f)}),g=$(()=>{var n;return!!((n=r(o))!=null&&n.loading)});function y(n){u.value={...r(u),...n},Reflect.has(n,"modelValue")&&(i.value=!!n.modelValue)}async function P(){const{closeFn:n}=r(o);if(typeof n=="function"){const f=await n();i.value=!f;return}else i.value=!1;t("cancel")}function p(){t("confirm")}const k={setDrawerProps:y,emitVisible:void 0};return s&&t("register",k),L(()=>e.modelValue,n=>{i.value=!!n},{deep:!0}),L(()=>i.value,n=>{q(()=>{var f;t("visible-change",n),t("update:modelValue",n),s&&((f=k.emitVisible)==null||f.call(k,n,s.uid))})}),{handleClose:P,prefixCls:d,visibleRef:i,getProps:o,getLoading:g,getBindValues:a,handleOk:p}}});function ie(e,l,t,i,u,d){const s=B("SvgIcon"),o=B("BasicTitle"),a=B("ScrollContainer"),g=B("ElButton"),y=B("ElDrawer"),P=Q("loading");return c(),V(y,S({onClose:l[1]||(l[1]=p=>e.handleClose())},e.getBindValues,{modelValue:e.visibleRef,"onUpdate:modelValue":l[2]||(l[2]=p=>e.visibleRef=p)}),{header:D(()=>[X("div",{class:C(`${e.prefixCls}-header`)},[e.isDetail?(c(),b("span",{key:0,class:C(`${e.prefixCls}-header__back`),onClick:l[0]||(l[0]=p=>e.handleClose())},[N(s,{name:"left"})],2)):m("",!0),N(o,{class:C(`${e.prefixCls}-header__title`)},{default:D(()=>[e.title?(c(),b(j,{key:0},[T(F(e.title||""),1)],64)):w(e.$slots,"header",{key:1})]),_:3},8,["class"]),e.$slots.toolbar?(c(),b("span",{key:1,class:C(`${e.prefixCls}-header__toolbar`)},[w(e.$slots,"toolbar")],2)):m("",!0)],2)]),default:D(()=>{var p;return[Y((c(),V(a,{class:C(`${e.prefixCls}-body`),"element-loading-text":e.loadingText},{default:D(()=>[w(e.$slots,"default")]),_:3},8,["class","element-loading-text"])),[[P,e.getLoading]]),e.showFooter?(c(),b("div",{key:0,class:C(`${e.prefixCls}-footer`)},[e.$slots.footer?w(e.$slots,"footer",{key:0}):(c(),b(j,{key:1},[e.$slots.prependFooter?w(e.$slots,"prependFooter",{key:0}):m("",!0),e.showCancelBtn?(c(),V(g,S({key:1,onClick:e.handleClose},e.cancelOptions),{default:D(()=>[T(F(e.cancelOptions.btnText||"Cancel"),1)]),_:1},16,["onClick"])):m("",!0),e.$slots.centerFooter?w(e.$slots,"centerFooter",{key:2}):m("",!0),e.showConfirmBtn?(c(),V(g,S({key:3,onClick:e.handleOk},e.confirmOptions,{loading:(p=e.getProps.confirmOptions)==null?void 0:p.loading}),{default:D(()=>[T(F(e.confirmOptions.btnText||"Ok"),1)]),_:1},16,["onClick","loading"])):m("",!0),e.$slots.appendFooter?w(e.$slots,"appendFooter",{key:4}):m("",!0)],64))],2)):m("",!0)]}),_:3},16,["modelValue"])}const ue=K(le,[["render",ie]]),h=U({}),R=U({});function ve(){I()||E("useDrawer() can only be used inside setup() or functional components!");const e=v(null),l=v(!1),t=v("");function i(s,o){z(()=>{e.value=null,l.value=null,h[r(t)]=null}),!(r(l)&&_()&&s===r(e))&&(t.value=o,e.value=s,l.value=!0,s.emitVisible=(a,g)=>{R[g]=a})}const u=()=>{const s=r(e);return s||E("The drawer instance has not been obtained, please make sure the instance is rendered when performing the instance operation!"),s},d={setDrawerProps:s=>{var o;(o=u())==null||o.setDrawerProps(s)},getVisible:$(()=>R[~~r(t)]),openDrawer:(s=!0,o,a=!0)=>{var y;if((y=u())==null||y.setDrawerProps({modelValue:s}),!o)return;if(a){h[r(t)]=null,h[r(t)]=O(o);return}ae(O(h[r(t)]),O(o))||(h[r(t)]=O(o))},closeDrawer:()=>{var s;(s=u())==null||s.setDrawerProps({modelValue:!1})}};return[i,d]}const ye=e=>{const l=v(null),t=I(),i=v("");t||E("useDrawerInner() can only be used inside setup() or functional components!");const u=()=>{const o=r(l);if(!o){E("useDrawerInner instance is undefined!");return}return o},d=(o,a)=>{z(()=>{l.value=null}),i.value=a,l.value=o,t==null||t.emit("register",o,a)},s={getVisible:$(()=>R[~~r(i)]),changeLoading:(o=!0)=>{var a;(a=u())==null||a.setDrawerProps({loading:o})},changeConfirmLoading:(o=!0)=>{var a;(a=u())==null||a.setDrawerProps({confirmOptions:{loading:o}})},closeDrawer:()=>{var o;(o=u())==null||o.setDrawerProps({modelValue:!1})},setDrawerProps:o=>{var a;(a=u())==null||a.setDrawerProps(o)}};return Z(()=>{const o=h[r(i)];!o||!e||typeof e!="function"||q(()=>{e(o)})}),[d,s]},De=x(ue);export{De as B,ye as a,ve as u};
