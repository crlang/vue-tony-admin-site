import{B as g}from"./index.7264ffb9.js";import{B as F,a as E}from"./index.afc9bffe.js";import{s as B,d as _}from"./system.6ca597c5.js";import{bX as C,p as S,d as R,r as d,c as k,b as c,_ as v,e as m,o as y,k as P,i as h,h as D,aD as N}from"./index.a812ffa9.js";import{E as T}from"./index.2b992e0e.js";import{E as I}from"./index.8e3037cc.js";import{u as V}from"./useForm.e1145b7d.js";const W=[{label:"\u89D2\u8272\u540D\u79F0",prop:"roleName",width:200},{label:"\u89D2\u8272\u503C",prop:"roleValue",width:180},{label:"\u6392\u5E8F",prop:"orderNo",width:50},{label:"\u72B6\u6001",prop:"status",width:120,customRender:({record:e,scope:t})=>(Reflect.has(e,"pendingStatus")||(t.row.pendingStatus=!1),C(T,{modelValue:(e==null?void 0:e.status)==="0",activeText:"Y",inactiveText:"N",inlinePrompt:!0,loading:e==null?void 0:e.pendingStatus,onChange(o){t.row.pendingStatus=!0;const a=o?"0":"1",{createMessage:u}=S();B(e.id,a).then(()=>{t.row.status=a,u.success("\u5DF2\u6210\u529F\u4FEE\u6539\u89D2\u8272\u72B6\u6001")}).catch(()=>{u.error("\u4FEE\u6539\u89D2\u8272\u72B6\u6001\u5931\u8D25")}).finally(()=>{t.row.pendingStatus=!1})}}))},{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:180},{label:"\u5907\u6CE8",prop:"remark"}],X=[{field:"roleNme",label:"\u89D2\u8272\u540D\u79F0",component:"ElInput",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"ElSelect",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]},colProps:{span:8}}],$=[{field:"roleName",label:"\u89D2\u8272\u540D\u79F0",required:!0,component:"ElInput"},{field:"roleValue",label:"\u89D2\u8272\u503C",required:!0,component:"ElInput"},{field:"status",label:"\u72B6\u6001",component:"ElRadioGroup",defaultValue:"0",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]}},{label:"\u5907\u6CE8",field:"remark",component:"ElInput",componentProps:{type:"textarea"}},{label:" ",field:"menu",slot:"menu",component:"ElInput"}],x=R({name:"RoleDrawer",components:{ElTree:I,BasicDrawer:F,BasicForm:g},emits:["success","register"],setup(e,{emit:t}){const o=d(!0),a=d([]),[u,{resetFields:f,setFieldsValue:l,validate:r}]=V({labelWidth:90,schemas:$,showActionButtonGroup:!1,colProps:{span:24},actionColProps:{span:24}}),[i,{closeDrawer:p,changeConfirmLoading:s}]=E(async n=>{f(),s(!1),c(a).length===0&&(a.value=await _()),o.value=!!(n!=null&&n.isUpdate),c(o)&&l({...n.record})}),w=k(()=>c(o)?"\u7F16\u8F91\u89D2\u8272":"\u65B0\u589E\u89D2\u8272");async function b(){try{await r(),s(!0),p(),t("success")}finally{s(!1)}}return{registerDrawer:i,registerForm:u,getTitle:w,handleSubmit:b,treeData:a}}});function M(e,t,o,a,u,f){const l=m("el-tree"),r=m("BasicForm"),i=m("BasicDrawer");return y(),P(i,N(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onConfirm:e.handleSubmit}),{default:h(()=>[D(r,{onRegister:e.registerForm},{menu:h(({model:p,field:s})=>[D(l,{"default-checked-keys":p[s],data:e.treeData,"node-key":"id",defaultExpandAll:"",props:{label:"menuName"},"show-checkbox":"",title:"\u83DC\u5355\u5206\u914D"},null,8,["default-checked-keys","data"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onConfirm"])}const A=v(x,[["render",M]]),Y=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));export{A as R,Y as a,W as c,X as s};
