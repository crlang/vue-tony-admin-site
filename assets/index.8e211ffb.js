import{_ as b,d as w,E as B,z as k,s as y,gh as F,aC as N,c as _,fY as T,ag as O,e as n,o as h,k as I,i as t,h as s,g as a,j as f,t as g,f as C,al as A,bw as L}from"./index.a812ffa9.js";import{E as S,a as P}from"./index.510e3cb5.js";import{E as W}from"./index.a77a8f23.js";import{E as $}from"./index.68f69cb3.js";import"./col.93f66016.js";import"./card.bf554046.js";const R=w({components:{ElRow:S,ElCol:P,ElInput:B,ElCard:W,ElButton:k,ElTag:$},setup(){const e=y({server:"ws://localhost:3300/test",sendValue:"",recordList:[]}),{status:o,data:d,send:E,close:v,open:D}=F(e.server,{autoReconnect:!1,heartbeat:!0});N(()=>{if(d.value)try{const m=JSON.parse(d.value);e.recordList.push(m)}catch(m){e.recordList.push({res:d.value,id:Math.ceil(Math.random()*1e3),time:new Date().getTime()})}});const u=_(()=>o.value==="OPEN"),i=_(()=>u.value?"success":"danger"),p=_(()=>[...e.recordList].reverse());function r(){E(e.sendValue),e.sendValue=""}function c(){u.value?v():D()}return{status:o,formatToDateTime:T,...O(e),handlerSend:r,getList:p,toggle:c,getIsOpen:u,getTagColor:i}}}),G={class:"flex items-center"},M=a("span",{class:"mr-4"},"\u8FDE\u63A5\u72B6\u6001:",-1),U={class:"min-h-85 overflow-auto"},j={class:"flex items-center"},z=a("span",{class:"mr-2 text-primary"},"\u6536\u5230\u6D88\u606F:",-1);function J(e,o,d,E,v,D){const u=n("el-tag"),i=n("el-button"),p=n("el-input"),r=n("el-card"),c=n("el-col"),m=n("el-row"),V=n("PageWrapper");return h(),I(V,{title:"WebSocket \u793A\u4F8B"},{default:t(()=>[s(m,{gutter:24,class:"pb-4"},{default:t(()=>[s(c,{span:8},{default:t(()=>[s(r,{class:"mb-4"},{header:t(()=>[a("div",G,[M,s(u,{type:e.getTagColor},{default:t(()=>[f(g(e.status),1)]),_:1},8,["type"])])]),default:t(()=>[s(p,{modelValue:e.server,"onUpdate:modelValue":o[0]||(o[0]=l=>e.server=l),placeholder:"Please input",class:"input-with-select"},{prepend:t(()=>[f("\u670D\u52A1\u5730\u5740")]),append:t(()=>[s(i,{type:e.getIsOpen?"danger":"primary",onClick:e.toggle,loading:e.status==="CONNECTING"},{default:t(()=>[f(g(e.getIsOpen?"\u5173\u95ED\u8FDE\u63A5":e.status==="CONNECTING"?"\u8FDE\u63A5\u4E2D...":"\u5F00\u542F\u8FDE\u63A5"),1)]),_:1},8,["type","onClick","loading"])]),_:1},8,["modelValue"])]),_:1}),s(r,{header:"\u6D4B\u8BD5"},{default:t(()=>[s(p,{maxlength:"30",placeholder:"\u9700\u8981\u53D1\u9001\u5230\u670D\u52A1\u5668\u7684\u5185\u5BB9",disabled:!e.getIsOpen,modelValue:e.sendValue,"onUpdate:modelValue":o[1]||(o[1]=l=>e.sendValue=l),"show-word-limit":"",rows:5,type:"textarea"},null,8,["disabled","modelValue"]),s(i,{type:"primary",block:"",class:"mt-4",disabled:!e.getIsOpen,onClick:e.handlerSend},{default:t(()=>[f("\u53D1\u9001")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1}),s(c,{span:16},{default:t(()=>[s(r,{header:"\u6D88\u606F\u8BB0\u5F55"},{default:t(()=>[a("div",U,[a("ul",null,[(h(!0),C(A,null,L(e.getList,l=>(h(),C("li",{class:"mt-2",key:l.time},[a("div",j,[z,a("span",null,g(e.formatToDateTime(l.time)),1)]),a("div",null,g(l.res),1)]))),128))])])]),_:1})]),_:1})]),_:1})]),_:1})}const Z=b(R,[["render",J]]);export{Z as default};
