import{d as A,r as $,s as T,c,b as i,w as B,Y as I,R as b,al as M,h as l,l as k,aC as L,_ as P,e as F,o as U,j,i as m,g as v,t as w,m as C}from"./index.61be89a1.js";import{d as q}from"./data.b3b564c3.js";import{E as Y}from"./index.8a2b5e67.js";var z=A({name:"VirtualScroll",props:{height:[Number,String],width:[Number,String],itemHeight:{type:Number,required:!0},listData:{type:Array,default:()=>[]},bench:{type:Number,default:0},maxHeight:[Number,String],minHeight:[Number,String],maxWidth:[Number,String],minWidth:[Number,String]},setup(e,{slots:E}){const o=$(null),r=T({first:0,last:0,scrollTop:0}),{prefixCls:_}=k("virtual-scroll"),p=c(()=>parseInt(e.bench,10)),s=c(()=>parseInt(e.itemHeight,10)),h=c(()=>Math.max(0,r.first-i(p))),S=c(()=>Math.min((e.listData||[]).length,r.last+i(p))),d=c(()=>({height:a((e.listData||[]).length*i(s))})),D=c(()=>{const t={},n=a(e.height),u=a(e.minHeight),f=a(e.minWidth),g=a(e.maxHeight),x=a(e.maxWidth),N=a(e.width);return n&&(t.height=n),u&&(t.minHeight=u),f&&(t.minWidth=f),g&&(t.maxHeight=g),x&&(t.maxWidth=x),N&&(t.width=N),t});function a(t,n="px"){if(!(t==null||t===""))return isNaN(+t)?String(t):`${Number(t)}${n}`}function H(t){const n=i(o);if(!n)return 0;const u=parseInt(e.height||0,10)||n.clientHeight;return t+Math.ceil(u/i(s))}function V(){return Math.floor(r.scrollTop/i(s))}function y(){const t=i(o);!t||(r.scrollTop=t.scrollTop,r.first=V(),r.last=H(r.first))}function W(){const{listData:t=[]}=e;return t.slice(i(h),i(S)).map(R)}function R(t,n){n+=i(h);const u=a(i(s)),f=a(n*i(s)),g=E.default;return l("div",{class:`${_}__item`,style:{top:f,height:u},key:n},{default:()=>g({index:n,item:t})})}return B([()=>e.itemHeight,()=>e.height],()=>{y()}),I(()=>{r.last=H(0),b(()=>{const t=i(o);!t||t.addEventListener("scroll",y)})}),M(()=>{b(()=>{const t=i(o);!t||t.removeEventListener("scroll",y)})}),()=>l("div",{class:_,style:i(D),ref:o},[l("div",{class:`${_}__container`,style:i(d)},[W()])])}});const G=L(z);const J=A({components:{ElDivider:Y,VirtualScroll:G},setup(){return{data:q}}}),K=C("\u57FA\u7840\u6EDA\u52A8\u793A\u4F8B"),O={class:"virtual-scroll-demo-wrap"},Q={class:"virtual-scroll-demo__item"},X=C("\u5373\u4F7F\u4E0D\u53EF\u89C1\uFF0C\u4E5F\u9884\u5148\u52A0\u8F7D50\u6761\u6570\u636E\uFF0C\u9632\u6B62\u7A7A\u767D"),Z={class:"virtual-scroll-demo-wrap"},tt={class:"virtual-scroll-demo__item"};function et(e,E,o,r,_,p){const s=F("el-divider"),h=F("VirtualScroll",!0),S=F("PageWrapper");return U(),j(S,{title:"\u865A\u62DF\u6EDA\u52A8\u793A\u4F8B"},{default:m(()=>[l(s,null,{default:m(()=>[K]),_:1}),v("div",O,[l(h,{itemHeight:60,listData:e.data,height:300},{default:m(({item:d,index:D})=>[v("div",Q,w(D)+" - "+w(d.title),1)]),_:1},8,["listData"])]),l(s,null,{default:m(()=>[X]),_:1}),v("div",Z,[l(h,{listData:e.data,itemHeight:60,height:300,bench:50},{default:m(({item:d})=>[v("div",tt,w(d.title),1)]),_:1},8,["listData"])])]),_:1})}var at=P(J,[["render",et],["__scopeId","data-v-1af363cf"]]);export{at as default};
