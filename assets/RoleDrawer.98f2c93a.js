var _=Object.defineProperty;var h=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var w=(e,a,t)=>a in e?_(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,D=(e,a)=>{for(var t in a||(a={}))C.call(a,t)&&w(e,t,a[t]);if(h)for(var t of h(a))S.call(a,t)&&w(e,t,a[t]);return e};var m=(e,a,t)=>new Promise((u,s)=>{var p=o=>{try{r(t.next(o))}catch(l){s(l)}},n=o=>{try{r(t.throw(o))}catch(l){s(l)}},r=o=>o.done?u(o.value):Promise.resolve(o.value).then(p,n);r((t=t.apply(e,a)).next())});import{B as v}from"./index.595488ed.js";import{B as R,a as y}from"./index.d08a4a2f.js";import{s as k,d as P}from"./system.94ccc1fc.js";import{c4 as N,z as T,d as I,r as g,c as V,b as f,_ as $,e as d,o as x,j as M,i as b,h as F,aB as j}from"./index.a3be5a06.js";import{E as A}from"./index.e6855c9a.js";import{E as q}from"./index.582d90fd.js";import{u as z}from"./useForm.b48ee51d.js";const ee=[{label:"\u89D2\u8272\u540D\u79F0",prop:"roleName",width:200},{label:"\u89D2\u8272\u503C",prop:"roleValue",width:180},{label:"\u6392\u5E8F",prop:"orderNo",width:50},{label:"\u72B6\u6001",prop:"status",width:120,customRender:({record:e,scope:a})=>(Reflect.has(e,"pendingStatus")||(a.row.pendingStatus=!1),N(A,{modelValue:(e==null?void 0:e.status)==="0",activeText:"Y",inactiveText:"N",inlinePrompt:!0,loading:e==null?void 0:e.pendingStatus,onChange(t){a.row.pendingStatus=!0;const u=t?"0":"1",{createMessage:s}=T();k(e.id,u).then(()=>{a.row.status=u,s.success("\u5DF2\u6210\u529F\u4FEE\u6539\u89D2\u8272\u72B6\u6001")}).catch(()=>{s.error("\u4FEE\u6539\u89D2\u8272\u72B6\u6001\u5931\u8D25")}).finally(()=>{a.row.pendingStatus=!1})}}))},{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:180},{label:"\u5907\u6CE8",prop:"remark"}],te=[{field:"roleNme",label:"\u89D2\u8272\u540D\u79F0",component:"ElInput",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"ElSelect",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]},colProps:{span:8}}],G=[{field:"roleName",label:"\u89D2\u8272\u540D\u79F0",required:!0,component:"ElInput"},{field:"roleValue",label:"\u89D2\u8272\u503C",required:!0,component:"ElInput"},{field:"status",label:"\u72B6\u6001",component:"ElRadioGroup",defaultValue:"0",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]}},{label:"\u5907\u6CE8",field:"remark",component:"ElInput",componentProps:{type:"textarea"}},{label:" ",field:"menu",slot:"menu",component:"ElInput"}],L=I({name:"RoleDrawer",components:{ElTree:q,BasicDrawer:R,BasicForm:v},emits:["success","register"],setup(e,{emit:a}){const t=g(!0),u=g([]),[s,{resetFields:p,setFieldsValue:n,validate:r}]=z({labelWidth:90,schemas:G,showActionButtonGroup:!1,colProps:{span:24},actionColProps:{span:24}}),[o,{closeDrawer:l,changeConfirmLoading:i}]=y(c=>m(this,null,function*(){p(),i(!1),f(u).length===0&&(u.value=yield P()),t.value=!!(c!=null&&c.isUpdate),f(t)&&n(D({},c.record))})),E=V(()=>f(t)?"\u7F16\u8F91\u89D2\u8272":"\u65B0\u589E\u89D2\u8272");function B(){return m(this,null,function*(){try{yield r(),i(!0),l(),a("success")}finally{i(!1)}})}return{registerDrawer:o,registerForm:s,getTitle:E,handleSubmit:B,treeData:u}}});function O(e,a,t,u,s,p){const n=d("el-tree"),r=d("BasicForm"),o=d("BasicDrawer");return x(),M(o,j(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onConfirm:e.handleSubmit}),{default:b(()=>[F(r,{onRegister:e.registerForm},{menu:b(({model:l,field:i})=>[F(n,{"default-checked-keys":l[i],data:e.treeData,"node-key":"id",defaultExpandAll:"",props:{label:"menuName"},"show-checkbox":"",title:"\u83DC\u5355\u5206\u914D"},null,8,["default-checked-keys","data"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onConfirm"])}var U=$(L,[["render",O]]),ae=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"}));export{U as R,ae as a,ee as c,te as s};
