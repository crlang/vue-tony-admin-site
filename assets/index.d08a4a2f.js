var Q=Object.defineProperty,W=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var q=(e,t,s)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,p=(e,t)=>{for(var s in t||(t={}))Y.call(t,s)&&q(e,s,t[s]);if(j)for(var s of j(t))Z.call(t,s)&&q(e,s,t[s]);return e},N=(e,t)=>W(e,X(t));var U=(e,t,s)=>new Promise((u,i)=>{var d=n=>{try{o(s.next(n))}catch(c){i(c)}},r=n=>{try{o(s.throw(n))}catch(c){i(c)}},o=n=>n.done?u(n.value):Promise.resolve(n.value).then(d,r);o((s=s.apply(e,t)).next())});import{d as _,y as x,bT as ee,r as v,c as k,b as l,cB as oe,w as z,R as H,_ as se,l as te,U as L,e as b,bU as ne,o as f,j as O,i as D,g as re,f as $,h as A,n as B,k as g,m as S,t as F,am as G,I as w,s as ae,aB as R,q as J,cD as P,bl as E,aA as le,az as K,cE as ie,aC as ue}from"./index.a3be5a06.js";import{S as ce}from"./index.2b6d2952.js";import{B as de}from"./index.6215c19b.js";import{f as pe}from"./index.a49e7427.js";import{E as fe}from"./index.019e5707.js";import{E as me}from"./index.d49960e2.js";import{i as ge}from"./isEqual.db5beb94.js";const M={modelValue:{type:Boolean},title:{type:String},isDetail:Boolean,loading:Boolean,loadingText:String,closeFn:{type:Function,default:null},showFooter:Boolean,showConfirmBtn:{type:Boolean,default:!0},confirmOptions:{type:Object,default:{btnText:"\u786E\u8BA4",type:"primary"}},showCancelBtn:{type:Boolean,default:!0},cancelOptions:{type:Object,default:{btnText:"\u53D6\u6D88",type:"default"}}},we=p(N(p({},pe),{appendToBody:{type:Boolean,default:!0},modelValue:{type:Boolean}}),M);const ve=_({name:"BasicDrawer",components:{ElDrawer:fe,ElButton:x,ScrollContainer:ce,BasicTitle:de,SvgIcon:ee},directives:{loading:me.directive},inheritAttrs:!1,props:we,emits:["update:modelValue","visible-change","confirm","cancel","register"],setup(e,{attrs:t,emit:s}){const u=v(!1),i=v(null),{prefixCls:d}=te("basic-drawer"),r=L(),o=k(()=>{const a=p(p({},e),l(i));return a.customClass=`${d} ${(a==null?void 0:a.customClass)||""} ${d}-${r==null?void 0:r.uid}`,a}),n=k(()=>{const a=p(p({},t),l(o)),C=Object.keys(M);return oe(a,C)}),c=k(()=>{var a;return!!((a=l(o))!=null&&a.loading)});function y(a){i.value=p(p({},l(i)),a),Reflect.has(a,"modelValue")&&(u.value=!!a.modelValue)}function T(){return U(this,null,function*(){const{closeFn:a}=l(o);if(typeof a=="function"){const C=yield a();u.value=!C;return}else u.value=!1;s("cancel")})}function m(){s("confirm")}const V={setDrawerProps:y,emitVisible:void 0};return r&&s("register",V),z(()=>e.modelValue,a=>{u.value=!!a},{deep:!0}),z(()=>u.value,a=>{H(()=>{var C;s("visible-change",a),s("update:modelValue",a),r&&((C=V.emitVisible)==null||C.call(V,a,r.uid))})}),{handleClose:T,prefixCls:d,visibleRef:u,getProps:o,getLoading:c,getBindValues:n,handleOk:m}}});function ye(e,t,s,u,i,d){const r=b("SvgIcon"),o=b("BasicTitle"),n=b("ScrollContainer"),c=b("ElButton"),y=b("ElDrawer"),T=ne("loading");return f(),O(y,R({onClose:t[1]||(t[1]=m=>e.handleClose())},e.getBindValues,{modelValue:e.visibleRef,"onUpdate:modelValue":t[2]||(t[2]=m=>e.visibleRef=m)}),{header:D(()=>[re("div",{class:B(`${e.prefixCls}-header`)},[e.isDetail?(f(),$("span",{key:0,class:B(`${e.prefixCls}-header__back`),onClick:t[0]||(t[0]=m=>e.handleClose())},[A(r,{name:"arrow-right",size:16,rotate:"180deg"})],2)):g("",!0),A(o,{class:B(`${e.prefixCls}-header__title`)},{default:D(()=>[e.title?(f(),$(G,{key:0},[S(F(e.title||""),1)],64)):w(e.$slots,"header",{key:1})]),_:3},8,["class"]),e.$slots.toolbar?(f(),$("span",{key:1,class:B(`${e.prefixCls}-header__toolbar`)},[w(e.$slots,"toolbar")],2)):g("",!0)],2)]),default:D(()=>{var m;return[ae((f(),O(n,{class:B(`${e.prefixCls}-body`),"element-loading-text":e.loadingText},{default:D(()=>[w(e.$slots,"default")]),_:3},8,["class","element-loading-text"])),[[T,e.getLoading]]),e.showFooter?(f(),$("div",{key:0,class:B(`${e.prefixCls}-footer`)},[e.$slots.footer?w(e.$slots,"footer",{key:0}):(f(),$(G,{key:1},[e.$slots.prependFooter?w(e.$slots,"prependFooter",{key:0}):g("",!0),e.showCancelBtn?(f(),O(c,R({key:1,onClick:e.handleClose},e.cancelOptions),{default:D(()=>[S(F(e.cancelOptions.btnText||"Cancel"),1)]),_:1},16,["onClick"])):g("",!0),e.$slots.centerFooter?w(e.$slots,"centerFooter",{key:2}):g("",!0),e.showConfirmBtn?(f(),O(c,R({key:3,onClick:e.handleOk},e.confirmOptions,{loading:(m=e.getProps.confirmOptions)==null?void 0:m.loading}),{default:D(()=>[S(F(e.confirmOptions.btnText||"Ok"),1)]),_:1},16,["onClick","loading"])):g("",!0),e.$slots.appendFooter?w(e.$slots,"appendFooter",{key:4}):g("",!0)],64))],2)):g("",!0)]}),_:3},16,["modelValue"])}var Ce=se(ve,[["render",ye]]);const h=J({}),I=J({});function Ee(){L()||P("useDrawer() can only be used inside setup() or functional components!");const e=v(null),t=v(!1),s=v("");function u(r,o){K(()=>{e.value=null,t.value=null,h[l(s)]=null}),!(l(t)&&ie()&&r===l(e))&&(s.value=o,e.value=r,t.value=!0,r.emitVisible=(n,c)=>{I[c]=n})}const i=()=>{const r=l(e);return r||P("The drawer instance has not been obtained, please make sure the instance is rendered when performing the instance operation!"),r},d={setDrawerProps:r=>{var o;(o=i())==null||o.setDrawerProps(r)},getVisible:k(()=>I[~~l(s)]),openDrawer:(r=!0,o,n=!0)=>{var y;if((y=i())==null||y.setDrawerProps({modelValue:r}),!o)return;if(n){h[l(s)]=null,h[l(s)]=E(o);return}ge(E(h[l(s)]),E(o))||(h[l(s)]=E(o))},closeDrawer:()=>{var r;(r=i())==null||r.setDrawerProps({modelValue:!1})}};return[u,d]}const Pe=e=>{const t=v(null),s=L(),u=v("");s||P("useDrawerInner() can only be used inside setup() or functional components!");const i=()=>{const o=l(t);if(!o){P("useDrawerInner instance is undefined!");return}return o},d=(o,n)=>{K(()=>{t.value=null}),u.value=n,t.value=o,s==null||s.emit("register",o,n)},r={getVisible:k(()=>I[~~l(u)]),changeLoading:(o=!0)=>{var n;(n=i())==null||n.setDrawerProps({loading:o})},changeConfirmLoading:(o=!0)=>{var n;(n=i())==null||n.setDrawerProps({confirmOptions:{loading:o}})},closeDrawer:()=>{var o;(o=i())==null||o.setDrawerProps({modelValue:!1})},setDrawerProps:o=>{var n;(n=i())==null||n.setDrawerProps(o)}};return le(()=>{const o=h[l(u)];!o||!e||typeof e!="function"||H(()=>{e(o)})}),[d,r]},Te=ue(Ce);export{Te as B,Pe as a,Ee as u};
