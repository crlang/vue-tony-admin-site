var m=(t,e,n)=>new Promise((s,u)=>{var l=a=>{try{r(n.next(a))}catch(c){u(c)}},o=a=>{try{r(n.throw(a))}catch(c){u(c)}},r=a=>a.done?s(a.value):Promise.resolve(a.value).then(l,o);r((n=n.apply(t,e)).next())});import{_ as v,i as _,e as k,u as E,w as C}from"./index.16f9732e.js";import{m as F,_ as h,r as j,w as g,l as S,U as x,a as p,u as d,y as w,Z as f,z as I,G as $,H as b,P as T,Q as V,D as y,R as N}from"./ex-pkg-@vue.dfd8e273.js";import{t as A}from"./ex-pkg-@vueuse.e5d644bd.js";import{z as D,f as U}from"./ex-pkg-element-plus.e1a09009.js";import{a as z}from"./ex-pkg-vendor.ab2d902e.js";function O(t,e="modelValue",n="change",s){const u=F(),l=u==null?void 0:u.emit,o=h({value:t[e]}),r=j(o),a=i=>{o.value=i};return g(()=>{o.value=t[e]}),[S({get(){return o.value},set(i){z(i,r.value)||(o.value=i,x(()=>{l==null||l(n,i,s)}))}}),a,r]}function P(t){const e=p(t),n=p(!1);let s;function u(){s&&window.clearInterval(s)}function l(){n.value=!1,u(),s=null}function o(){d(n)||!!s||(n.value=!0,s=setInterval(()=>{d(e)===1?(l(),e.value=t):e.value-=1},1e3))}function r(){e.value=t,l()}function a(){r(),o()}return A(()=>{r()}),{start:o,reset:r,restart:a,clear:u,stop:l,currentCount:e,isStart:n}}const R={value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},q=w({name:"CountButton",components:{ElButton:D},props:R,setup(t){const e=p(!1),{currentCount:n,isStart:s,start:u,reset:l}=P(t.count),{t:o}=k(),r=S(()=>d(s)?o("component.countdown.sendText",[d(n)]):o("component.countdown.normalText"));g(()=>{t.value===void 0&&l()});function a(){return m(this,null,function*(){const{beforeStartFunc:c}=t;if(c&&_(c)){e.value=!0;try{(yield c())&&u()}finally{e.value=!1}}else u()})}return{handleStart:a,currentCount:n,loading:e,getButtonText:r,isStart:s}}});function G(t,e,n,s,u,l){const o=f("ElButton");return I(),$(o,y(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:b(()=>[T(V(t.getButtonText),1)]),_:1},16,["disabled","onClick","loading"])}var B=v(q,[["render",G]]);const H={count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},Q=w({name:"CountDownInput",components:{ElInput:U,CountButton:B},inheritAttrs:!1,props:H,setup(t){const{prefixCls:e}=E("countdown-input"),[n]=O(t);return{prefixCls:e,state:n}}});function Z(t,e,n,s,u,l){const o=f("CountButton"),r=f("ElInput");return I(),$(r,y(t.$attrs,{class:t.prefixCls,modelValue:t.state,"onUpdate:modelValue":e[0]||(e[0]=a=>t.state=a)}),{append:b(()=>[N(o,{count:t.count,value:t.state,beforeStartFunc:t.sendCodeApi},null,8,["count","value","beforeStartFunc"])]),_:1},16,["class","modelValue"])}var J=v(Q,[["render",Z]]);const tt=C(J);C(B);export{tt as C,O as u};
