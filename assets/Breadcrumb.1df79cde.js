var F=Object.defineProperty,G=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var N=(t,e,a)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,y=(t,e)=>{for(var a in e||(e={}))U.call(e,a)&&N(t,a,e[a]);if(D)for(var a of D(e))Y.call(e,a)&&N(t,a,e[a]);return t},I=(t,e)=>G(t,q(e));var j=(t,e,a)=>new Promise((b,o)=>{var h=l=>{try{m(a.next(l))}catch(_){o(_)}},g=l=>{try{m(a.throw(l))}catch(_){o(_)}},m=l=>l.done?b(l.value):Promise.resolve(l.value).then(h,g);m((a=a.apply(t,e)).next())});import{N as L,c5 as H,d as R,F as T,r as S,M as J,Y as Q,o as p,f as B,I as K,n as k,b as f,C as O,O as W,D as X,ah as Z,g as ee,j as v,i as $,K as te,$ as re,t as w,U as ae,L as ne,ac as se,_ as oe,bj as ce,bn as le,aR as ue,aA as me,bG as ie,bw as pe,bD as de,e as C,bm as fe,k as be,m as _e,am as he,l as ge}from"./index.a3be5a06.js";import{I as ke}from"./index.4c86d7ee.js";import{g as ve}from"./index.c639f020.js";import"./index.f598c73b.js";import"./useWindowSizeFn.2567e0b4.js";import"./index.d49960e2.js";import"./_baseIsEqual.5fab7397.js";import"./_baseUniq.33ff9dfc.js";import"./index.877d1a1e.js";import"./index.6370a45c.js";import"./index.f722e5a3.js";import"./useTimeout.62b6f0c9.js";import"./index.5afdc983.js";import"./dropdown.817d847e.js";import"./index.2b6d2952.js";import"./index.80d0f5e3.js";import"./index.019e5707.js";import"./drawer.470a0bec.js";import"./use-dialog.b591a60e.js";import"./index.99dc64d9.js";import"./refs.11e1edb5.js";import"./index.acde674e.js";import"./lock.b9ded7d3.js";const V=Symbol("breadcrumbKey"),ye=L({separator:{type:String,default:"/"},separatorIcon:{type:H,default:""}}),Ie={name:"ElBreadcrumb"},Be=R(I(y({},Ie),{props:ye,setup(t){const e=t,a=T("breadcrumb"),b=S();return J(V,e),Q(()=>{const o=b.value.querySelectorAll(`.${a.e("item")}`);o.length&&o[o.length-1].setAttribute("aria-current","page")}),(o,h)=>(p(),B("div",{ref_key:"breadcrumb",ref:b,class:k(f(a).b()),"aria-label":"Breadcrumb",role:"navigation"},[K(o.$slots,"default")],2))}}));var Ce=O(Be,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const $e=L({to:{type:W([String,Object]),default:""},replace:{type:Boolean,default:!1}}),Ee={name:"ElBreadcrumbItem"},Pe=R(I(y({},Ee),{props:$e,setup(t){const e=t,a=ae(),b=X(V,void 0),o=T("breadcrumb"),{separator:h,separatorIcon:g}=Z(b),m=a.appContext.config.globalProperties.$router,l=S(),_=()=>{!e.to||!m||(e.replace?m.replace(e.to):m.push(e.to))};return(r,n)=>(p(),B("span",{class:k(f(o).e("item"))},[ee("span",{ref_key:"link",ref:l,class:k([f(o).e("inner"),f(o).is("link",!!r.to)]),role:"link",onClick:_},[K(r.$slots,"default")],2),f(g)?(p(),v(f(re),{key:0,class:k(f(o).e("separator"))},{default:$(()=>[(p(),v(te(f(g))))]),_:1},8,["class"])):(p(),B("span",{key:1,class:k(f(o).e("separator")),role:"presentation"},w(f(h)),3))],2))}}));var x=O(Pe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const we=ne(Ce,{BreadcrumbItem:x}),Re=se(x);const Se=R({name:"LayoutBreadcrumb",components:{ElBreadcrumb:we,ElBreadcrumbItem:Re,Icon:ke},props:{},setup(){const t=S([]),{currentRoute:e}=ce(),{prefixCls:a}=ge("layout-header-breadcrumb"),{getShowBreadCrumbIcon:b}=le(),o=ue();me(()=>j(this,null,function*(){var P,A,M;if(e.value.name===ie)return;const r=yield ve(),n=e.value.matched,s=n==null?void 0:n[n.length-1];let c=e.value.path;s&&((P=s==null?void 0:s.meta)==null?void 0:P.currentActiveMenu)&&(c=s.meta.currentActiveMenu);const u=pe(r,c),d=r.filter(z=>z.path===u[0]),i=h(d,u);if(!i||i.length===0)return;const E=g(i);(A=e.value.meta)!=null&&A.currentActiveMenu&&E.push(I(y({},e.value),{name:((M=e.value.meta)==null?void 0:M.title)||e.value.name})),t.value=E}));function h(r,n){const s=[];return r.forEach(c=>{var u,d;n.includes(c.path)&&s.push(I(y({},c),{name:((u=c.meta)==null?void 0:u.title)||c.name})),(d=c.children)!=null&&d.length&&s.push(...h(c.children,n))}),s}function g(r){return de(r,n=>{const{meta:s,name:c}=n;if(!s)return!!c;const{title:u,hideBreadcrumb:d}=s;return!(!u||d)}).filter(n=>{var s;return!((s=n.meta)!=null&&s.hideBreadcrumb)})}function m(r,n,s){s==null||s.preventDefault();const{children:c,redirect:u,meta:d}=r;if((c==null?void 0:c.length)&&!u){s==null||s.stopPropagation();return}if(!(d!=null&&d.carryParam))if(u&&typeof u=="string")o(u);else{let i="";n.length===1?i=n[0]:i=`${n.slice(1).pop()||""}`,i=/^\//.test(i)?i:`/${i}`,o(i)}}function l(r,n){return r.indexOf(n)!==r.length-1}function _(r){var n;return(n=r.meta)==null?void 0:n.icon}return{routes:t,prefixCls:a,getIcon:_,getShowBreadCrumbIcon:b,handleClick:m,hasRedirect:l}}}),Ae={key:1};function Me(t,e,a,b,o,h){const g=C("Icon"),m=C("router-link"),l=C("ElBreadcrumbItem"),_=C("ElBreadcrumb");return p(),v(_,{separator:"/",class:k(t.prefixCls)},{default:$(()=>[(p(!0),B(he,null,fe(t.routes,r=>(p(),v(l,{key:r.name},{default:$(()=>[t.getShowBreadCrumbIcon&&t.getIcon(r)?(p(),v(g,{key:0,name:t.getIcon(r),size:"14",class:"mr-1"},null,8,["name"])):be("",!0),t.hasRedirect(t.routes,r)?(p(),v(m,{key:2,to:"",onClick:n=>t.handleClick(r,t.routes,n)},{default:$(()=>[_e(w(r.name||r.meta.title),1)]),_:2},1032,["onClick"])):(p(),B("span",Ae,w(r.name||r.meta.title),1))]),_:2},1024))),128))]),_:1},8,["class"])}var at=oe(Se,[["render",Me]]);export{at as default};
