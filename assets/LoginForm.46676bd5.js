import{d as S,p as D,q as x,r as n,s as L,c as k,b as e,v as R,x as b,o as h,k as N,i as o,h as a,E as F,y as A,j as m,z as E}from"./index.a812ffa9.js";import{u as I,a as U,L as g,b as K}from"./useLogin.4d63aad6.js";import{E as i,a as z}from"./index.c6940f23.js";import{E as M,a as B}from"./index.510e3cb5.js";import{E as O}from"./index.a7c381f2.js";import"./form-item.7fe87d07.js";import"./col.93f66016.js";import"./isEqual.f6c0098b.js";import"./_baseIsEqual.bce9394a.js";const X=S({__name:"LoginForm",setup(T){const{createNotification:d}=D(),w=x(),{setLoginState:y,getLoginState:C}=I(),{getFormRules:V}=U(),p=n(),r=n(!1),c=n(!1),t=L({account:"admin",password:"123456"}),{validForm:_}=K(p),v=k(()=>e(C)===g.LOGIN);async function f(){await _();try{r.value=!0;const l=await w.login({password:t.password,username:t.account,mode:"none"});l&&d({title:"\u767B\u5F55\u6210\u529F",type:"success",message:`\u6B22\u8FCE\u56DE\u6765: ${l.realName}`,duration:3e3})}catch(l){d({title:"\u9519\u8BEF\u63D0\u793A",type:"error",message:l.message||"\u7F51\u7EDC\u5F02\u5E38\uFF0C\u8BF7\u68C0\u67E5\u60A8\u7684\u7F51\u7EDC\u8FDE\u63A5\u662F\u5426\u6B63\u5E38"})}finally{r.value=!1}}return(l,s)=>R((h(),N(e(z),{model:t,rules:e(V),ref_key:"formRef",ref:p},{default:o(()=>[a(e(i),{prop:"account"},{default:o(()=>[a(e(F),{modelValue:t.account,"onUpdate:modelValue":s[0]||(s[0]=u=>t.account=u),placeholder:"\u8D26\u53F7 admin/tony"},null,8,["modelValue"])]),_:1}),a(e(i),{prop:"password",class:"mb-1"},{default:o(()=>[a(e(F),{modelValue:t.password,"onUpdate:modelValue":s[1]||(s[1]=u=>t.password=u),placeholder:"\u5BC6\u7801 123456",onKeypress:A(f,["enter"])},null,8,["modelValue","onKeypress"])]),_:1}),a(e(M),{class:"mt-3"},{default:o(()=>[a(e(B),{span:12},{default:o(()=>[a(e(O),{modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=u=>c.value=u),size:"small"},{default:o(()=>[m("\u8BB0\u4F4F\u6211")]),_:1},8,["modelValue"])]),_:1}),a(e(B),{span:12,class:"text-right"},{default:o(()=>[a(e(E),{text:"",onClick:s[3]||(s[3]=u=>e(y)(e(g).RESET_PASSWORD))},{default:o(()=>[m("\u5FD8\u8BB0\u5BC6\u7801?")]),_:1})]),_:1})]),_:1}),a(e(i),null,{default:o(()=>[a(e(E),{type:"primary",class:"login--submit",loading:r.value,onClick:f},{default:o(()=>[m("\u767B\u5F55")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])),[[b,e(v)]])}});export{X as default};
